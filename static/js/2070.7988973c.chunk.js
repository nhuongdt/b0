"use strict";(self.webpackChunklayout_jsx=self.webpackChunklayout_jsx||[]).push([[2070],{36073:(e,n,i)=>{i.d(n,{Z:()=>d,r:()=>l});var t,o,a=i(47313);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},r.apply(this,arguments)}function s(e,n){let{title:i,titleId:s,...l}=e;return a.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":s},l),i?a.createElement("title",{id:s},i):null,t||(t=a.createElement("path",{d:"M4 8H12",stroke:"#FFFAFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),o||(o=a.createElement("path",{d:"M8 12V4",stroke:"#FFFAFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const l=a.forwardRef(s),d=i.p+"static/media/add.0b705e20dfa5086a83bee9c502946102.svg"},61566:(e,n,i)=>{i.d(n,{Z:()=>d,r:()=>l});var t,o,a=i(47313);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},r.apply(this,arguments)}function s(e,n){let{title:i,titleId:s,...l}=e;return a.createElement("svg",r({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":s},l),i?a.createElement("title",{id:s},i):null,t||(t=a.createElement("path",{d:"M9.58335 17.5003C13.9556 17.5003 17.5 13.9559 17.5 9.58366C17.5 5.2114 13.9556 1.66699 9.58335 1.66699C5.2111 1.66699 1.66669 5.2114 1.66669 9.58366C1.66669 13.9559 5.2111 17.5003 9.58335 17.5003Z",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),o||(o=a.createElement("path",{d:"M18.3334 18.3337L16.6667 16.667",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const l=a.forwardRef(s),d=i.p+"static/media/search-normal.4032718719c7e2bac848ef728621bbbe.svg"},77275:(e,n,i)=>{i.d(n,{Z:()=>o});var t=function(e){return e[e.Cancel=0]="Cancel",e[e.Wait=1]="Wait",e[e.Confirm=2]="Confirm",e[e.CheckIn=3]="CheckIn",e[e.Success=4]="Success",e}(t||{});const o=t},36896:(e,n,i)=>{i.d(n,{Z:()=>Q});var t,o,a,r,s=i(94469),l=i(33604),d=i(61113),c=i(47131),h=i(96467),g=i(9019),x=i(9506),u=i(48623),p=i(24631),Z=i(41727),f=i(24193),m=i(48119),v=i(16429),j=i(1550),y=i(23306),b=i(40454),C=i(51405),k=i(4117),D=i(47313),w=i(36073),S=i(26417),F=i(7410),T=i(69551),I=i(68507),E=i(47655),H=i(61566);function V(){return V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},V.apply(this,arguments)}function P(e,n){let{title:i,titleId:s,...l}=e;return D.createElement("svg",V({width:60,height:60,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":s},l),i?D.createElement("title",{id:s},i):null,t||(t=D.createElement("path",{d:"M22.5 5C15.95 5 10.625 10.325 10.625 16.875C10.625 23.3 15.65 28.5 22.2 28.725C22.4 28.7 22.6 28.7 22.75 28.725C22.8 28.725 22.825 28.725 22.875 28.725C22.9 28.725 22.9 28.725 22.925 28.725C29.325 28.5 34.35 23.3 34.375 16.875C34.375 10.325 29.05 5 22.5 5Z",fill:"#A3ADC2"})),o||(o=D.createElement("path",{d:"M35.2 35.375C28.225 30.725 16.85 30.725 9.82502 35.375C6.65002 37.5 4.90002 40.375 4.90002 43.45C4.90002 46.525 6.65002 49.375 9.80002 51.475C13.3 53.825 17.9 55 22.5 55C27.1 55 31.7 53.825 35.2 51.475C38.35 49.35 40.1 46.5 40.1 43.4C40.075 40.325 38.35 37.475 35.2 35.375Z",fill:"#A3ADC2"})),a||(a=D.createElement("path",{d:"M49.975 18.35C50.375 23.2 46.925 27.45 42.15 28.025C42.125 28.025 42.125 28.025 42.1 28.025H42.025C41.875 28.025 41.725 28.025 41.6 28.075C39.175 28.2 36.95 27.425 35.275 26C37.85 23.7 39.325 20.25 39.025 16.5C38.85 14.475 38.15 12.625 37.1 11.05C38.05 10.575 39.15 10.275 40.275 10.175C45.175 9.75001 49.55 13.4 49.975 18.35Z",fill:"#A3ADC2"})),r||(r=D.createElement("path",{d:"M54.975 41.475C54.775 43.9 53.225 46 50.625 47.425C48.125 48.8 44.975 49.45 41.85 49.375C43.65 47.75 44.7 45.725 44.9 43.575C45.15 40.475 43.675 37.5 40.725 35.125C39.05 33.8 37.1 32.75 34.975 31.975C40.5 30.375 47.45 31.45 51.725 34.9C54.025 36.75 55.2 39.075 54.975 41.475Z",fill:"#A3ADC2"})))}const N=D.forwardRef(P);i.p;var z=i(21933);const M=z.Ry().shape({idDonViQuiDoi:z.Z_().required("D\u1ecbch v\u1ee5 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),idKhachHang:z.Z_().required("Kh\xe1ch h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),startTime:z.Z_().required("Vui l\xf2ng ch\u1ecdn ng\xe0y l\xe0m d\u1ecbch v\u1ee5"),startHours:z.Z_().required("Vui l\xf2ng ch\u1ecdn th\u1eddi gian l\xe0m d\u1ecbch v\u1ee5")});var W=i(95412),O=i(2878),B=i(60701),K=i(89469),A=i(7596),L=i(79015),G=i(46417);class R extends D.Component{constructor(){super(...arguments),this.state={isShowKhachHangModal:!1,thoiGianThucHien:"0"},this.onOpenKhachHangModal=()=>{this.setState({isShowKhachHangModal:!this.state.isShowKhachHangModal})},this.handleSubmit=async e=>{var n;const i=await A.Z.onCreateOrEditBooking({id:e.id,idChiNhanh:null!==(n=I.Z.get("IdChiNhanh"))&&void 0!==n?n:"",idDonViQuiDoi:e.idDonViQuiDoi,idKhachHang:e.idKhachHang,idNhanVien:e.idNhanVien,startHours:e.startHours,startTime:e.startTime,ghiChu:e.ghiChu,trangThai:e.trangThai});null!=i?(0,E.yv)(e.id===T.ZP.guidEmpty||""===e.id?"Th\xeam m\u1edbi th\xe0nh c\xf4ng":"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:3e3}):(0,E.yv)("C\xf3 l\u1ed7i s\u1ea3y ra vui l\xf2ng th\u1eed l\u1ea1i sau!",{variant:"error",autoHideDuration:3e3}),this.props.onOk(i.id)}}componentDidMount(){W.Z.createKhachHangDto(),K.default.getSuggestKhachHang()}render(){const{visible:e,onCancel:n}=this.props,i=A.Z.createOrEditBookingDto;return(0,G.jsxs)(s.Z,{open:e,onClose:n,fullWidth:!0,maxWidth:"md",children:[(0,G.jsxs)(l.Z,{sx:{borderBottom:"1px solid #E6E1E6"},children:[(0,G.jsx)(d.Z,{fontSize:"24px",fontWeight:"700",children:""===i.id||i.id===T.ZP.guidEmpty?"Th\xeam cu\u1ed9c h\u1eb9n":"C\u1eadp h\u1eadt l\u1ecbch h\u1eb9n"}),(0,G.jsx)(c.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,"&:hover svg":{filter:"brightness(0) saturate(100%) invert(34%) sepia(44%) saturate(2405%) hue-rotate(316deg) brightness(98%) contrast(92%)"}},children:(0,G.jsx)(S.r,{})})]}),(0,G.jsx)(h.Z,{sx:{pr:"0",pb:"0"},children:(0,G.jsx)(F.J9,{initialValues:i,onSubmit:this.handleSubmit,validationSchema:M,children:e=>{var i,t,o,a,r,s,l,c,h,D,S,I,E,V;let{errors:P,touched:z,values:M,handleChange:W,setFieldValue:O,isSubmitting:B}=e;return(0,G.jsxs)(F.l0,{onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()},children:[(0,G.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,G.jsx)(g.ZP,{item:!0,xs:12,sm:5,children:(0,G.jsxs)(x.Z,{display:"flex",justifyContent:"space-between",width:"100%",height:"100%",flexDirection:"column",children:[(0,G.jsxs)(x.Z,{children:[(0,G.jsx)(u.Z,{sx:{pt:"24px"},options:K.default.suggestKhachHang,getOptionLabel:e=>"".concat(e.tenKhachHang," ").concat(""!==e.soDienThoai?e.soDienThoai:""),value:null!==(i=null===(t=K.default.suggestKhachHang)||void 0===t||null===(o=t.filter((e=>e.id==M.idKhachHang)))||void 0===o?void 0:o[0])&&void 0!==i?i:{id:"",soDienThoai:"",tenKhachHang:""},size:"small",fullWidth:!0,disablePortal:!0,onChange:(e,n)=>{O("idKhachHang",n?n.id:"")},placeholder:"Ch\u1ecdn kh\xe1ch h\xe0ng",renderInput:e=>(0,G.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,G.jsx)(p.Z,{...e,placeholder:"Ch\u1ecdn kh\xe1ch h\xe0ng",InputProps:{...e.InputProps,startAdornment:(0,G.jsxs)(G.Fragment,{children:[e.InputProps.startAdornment,(0,G.jsx)(Z.Z,{position:"start",children:(0,G.jsx)(H.r,{})})]})}}),(0,G.jsx)(f.Z,{size:"small",variant:"text",sx:{color:"var(--color-main)","& svg":{filter:"var(--color-hoverIcon)",width:"24px",height:"24px"},minWidth:"36px",width:"36px",height:"36px",borderRadius:"4px",border:"1px solid #319DFF"},onClick:this.onOpenKhachHangModal,children:(0,G.jsx)(w.r,{})})]})}),P.idKhachHang&&z.idKhachHang&&(0,G.jsx)("small",{className:"text-danger",children:P.idKhachHang})]}),(0,G.jsxs)(x.Z,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,G.jsx)(m.Z,{sx:{width:"140px",height:"140px",bgcolor:"#EEF0F4"},children:(0,G.jsx)(N,{width:"60px",height:"60px"})}),(0,G.jsx)(d.Z,{marginTop:"40px",marginBottom:"12px",color:"#3D475C",fontSize:"18px",fontWeight:"700",children:"Th\xeam kh\xe1ch h\xe0ng"}),(0,G.jsx)(d.Z,{color:"#8492AE",fontSize:"14px",fontWeight:400,children:"S\u1eed d\u1ee5ng t\xecm ki\u1ebfm \u0111\u1ec3 th\xeam kh\xe1ch h\xe0ng"})]})]})}),(0,G.jsxs)(g.ZP,{item:!0,xs:12,sm:7,sx:{bgcolor:"#F9FAFC",pr:"24px"},children:[(0,G.jsx)(v.Z,{className:"mt-4 mb-1",children:(0,G.jsx)(L.Z,{props:{width:"100%",size:"small",label:(0,G.jsxs)(d.Z,{variant:"subtitle2",children:["Ng\xe0y",(0,G.jsx)("span",{className:"text-danger",children:" *"})]}),error:Boolean(P.startTime),helperText:Boolean(P.startTime)&&(0,G.jsx)("span",{className:"text-danger",children:String(P.startTime)})},defaultVal:M.startTime,handleChangeDate:e=>{M.startTime=e}})}),(0,G.jsxs)(g.ZP,{container:!0,spacing:2,sx:{marginTop:"4px"},children:[(0,G.jsx)(g.ZP,{item:!0,md:8,sm:6,xs:12,children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(u.Z,{options:null!==(a=null===K.default||void 0===K.default?void 0:K.default.suggestDichVu)&&void 0!==a?a:[],getOptionLabel:e=>"".concat(e.tenDichVu),value:null!==(r=null===(s=K.default.suggestDichVu)||void 0===s||null===(l=s.filter((e=>e.id==M.idDonViQuiDoi)))||void 0===l?void 0:l[0])&&void 0!==r?r:{id:"",donGia:0,tenDichVu:""},size:"small",fullWidth:!0,disablePortal:!0,onChange:async(e,n)=>{O("idDonViQuiDoi",n?n.id:""),await K.default.getSuggestKyThuatVienByIdDichVu(n?n.id:"")},renderInput:e=>(0,G.jsx)(p.Z,{...e,label:(0,G.jsxs)(d.Z,{variant:"subtitle2",fontSize:"14px",children:["D\u1ecbch v\u1ee5 ",(0,G.jsx)("span",{className:"text-danger",children:"*"})]}),error:!(!P.idDonViQuiDoi||!z.idDonViQuiDoi),helperText:P.idDonViQuiDoi&&z.idDonViQuiDoi&&(0,G.jsx)("small",{className:"text-danger",children:P.idDonViQuiDoi}),placeholder:"Nh\u1eadp t\xean d\u1ecbch v\u1ee5"})})})}),(0,G.jsx)(g.ZP,{item:!0,md:4,xs:12,sm:6,children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(p.Z,{label:(0,G.jsxs)(d.Z,{variant:"subtitle2",fontSize:"14px",children:["Th\u1eddi gian b\u1eaft \u0111\u1ea7u ",(0,G.jsx)("span",{className:"text-danger",children:"*"})]}),error:!(!P.startHours||!z.startHours),helperText:P.startHours&&z.startHours&&(0,G.jsx)("span",{className:"text-danger",children:P.startHours}),InputLabelProps:{shrink:!0},type:"time",size:"small",name:"startHours",value:M.startHours,onChange:W})})}),(0,G.jsxs)(g.ZP,{container:!0,item:!0,spacing:[4,2],children:[(0,G.jsx)(g.ZP,{item:!0,md:8,sm:6,xs:12,children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(u.Z,{options:null!==(c=null===K.default||void 0===K.default?void 0:K.default.suggestKyThuatVien)&&void 0!==c?c:[],getOptionLabel:e=>"".concat(e.tenNhanVien),value:null!==(h=null===(D=K.default.suggestKyThuatVien)||void 0===D||null===(S=D.filter((e=>e.id==M.idNhanVien)))||void 0===S?void 0:S[0])&&void 0!==h?h:{id:"",avatar:"",chucVu:"",soDienThoai:"",tenNhanVien:""},size:"small",fullWidth:!0,disablePortal:!0,onChange:(e,n)=>{O("idNhanVien",n?n.id:"")},renderInput:e=>(0,G.jsx)(p.Z,{...e,label:(0,G.jsx)(d.Z,{variant:"body1",fontSize:"14px",children:"Nh\xe2n vi\xean"}),placeholder:"Nh\u1eadp t\xean nh\xe2n vi\xean"})})})}),(0,G.jsx)(g.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(p.Z,{label:(0,G.jsx)(d.Z,{variant:"subtitle2",fontSize:"14px",children:"Th\u1eddi gian l\xe0m"}),value:null!==(I=null===(E=K.default.suggestDichVu)||void 0===E||null===(V=E.find((e=>e.id==M.idDonViQuiDoi)))||void 0===V?void 0:V.thoiGianThucHien)&&void 0!==I?I:"0",type:"text",size:"small"})})})]})]}),(0,G.jsx)(g.ZP,{item:!0,sx:{marginTop:"16px"},children:(0,G.jsxs)(j.Z,{fullWidth:!0,children:[(0,G.jsx)(y.Z,{children:(0,G.jsx)(d.Z,{fontSize:"14px",children:"Tr\u1ea1ng th\xe1i"})}),(0,G.jsx)(b.Z,{label:(0,G.jsx)(d.Z,{fontSize:"14px",children:"Tr\u1ea1ng th\xe1i"}),fullWidth:!0,size:"small",name:"trangThai",value:M.trangThai,onChange:W,children:T.ZP.trangThaiCheckIn.map((e=>(0,G.jsx)(C.Z,{value:e.value,children:e.name},e.value)))})]})}),(0,G.jsx)(g.ZP,{item:!0,sx:{marginTop:"16px"},children:(0,G.jsx)(v.Z,{className:"mt-2 mb-4",children:(0,G.jsx)(p.Z,{label:(0,G.jsx)(d.Z,{variant:"subtitle2",fontSize:"14px",children:"Ghi ch\xfa"}),type:"text",multiline:!0,rows:4,size:"small",name:"ghiChu",value:M.ghiChu,onChange:W})})})]})]}),(0,G.jsx)(k.Z,{sx:{pr:"0",pb:"24px",position:"sticky",bgcolor:"#fff",bottom:"0",left:"0"},children:(0,G.jsx)(g.ZP,{container:!0,children:(0,G.jsx)(g.ZP,{item:!0,xs:12,sx:{bgcolor:"#F9FAFC"},children:(0,G.jsxs)(x.Z,{display:"flex",justifyContent:"end",gap:"8px",sx:{"& button":{textTransform:"unset!important"}},children:[(0,G.jsx)(f.Z,{className:"btn-outline-hover",variant:"outlined",size:"small",sx:{borderColor:"#E6E1E6",color:"var(--color-main)"},onClick:n,children:"H\u1ee7y"}),B?(0,G.jsx)(f.Z,{className:"btn-container-hover",variant:"contained",type:"submit",sx:{backgroundColor:"var(--color-main)!important"},children:"\u0110ang l\u01b0u"}):(0,G.jsx)(f.Z,{className:"btn-container-hover",variant:"contained",type:"submit",sx:{backgroundColor:"var(--color-main)!important"},children:"L\u01b0u"})]})})})})]})}})}),(0,G.jsx)(O.Z,{visible:this.state.isShowKhachHangModal,formRef:W.Z.createEditKhachHangDto,onCancel:this.onOpenKhachHangModal,onOk:async e=>{await K.default.getSuggestKhachHang(),this.onOpenKhachHangModal()},title:"Th\xeam m\u1edbi kh\xe1ch h\xe0ng"})]})}}const Q=(0,B.Pi)(R)},20605:(e,n,i)=>{i.r(n),i.d(n,{default:()=>oe});var t=i(47313),o=i(9506),a=i(61113),r=i(24193),s=i(48119),l=i(85630),d=i(36073),c=i(7596),h=i(2447),g=i(68507),x=i(36896),u=i(14881),p=i(69551),Z=i(11198),f=i(94469),m=i(47131),v=i(9019),j=i(6820),y=i(66835),b=i(23477),C=i(24076),k=i(67478),D=i(57861),w=i(35898),S=i(4117),F=i(60701),T=i(89600),I=i(52028),E=i(77275),H=i(5006),V=i(47655),P=i(46417);const N=(0,F.Pi)((()=>{var e,n,i,t,l,d,h,g,x,u,F,N,z;return(0,P.jsx)(f.Z,{open:c.Z.isShowBookingInfo,onClose:async()=>{await c.Z.onShowBookingInfo(),c.Z.idBooking=p.ZP.guidEmpty},sx:{borderRadius:"8px"},fullWidth:!0,maxWidth:"sm",children:(0,P.jsxs)(o.Z,{children:[(0,P.jsxs)(o.Z,{display:"flex",justifyContent:"space-between",padding:"16px 24px",borderBottom:"1px solid #C2C9D6",children:[(0,P.jsx)(a.Z,{fontSize:"24px",fontWeight:700,children:"Chi ti\u1ebft cu\u1ed9c h\u1eb9n"}),(0,P.jsx)(m.Z,{onClick:async()=>{await c.Z.onShowBookingInfo(),c.Z.idBooking=p.ZP.guidEmpty},children:(0,P.jsx)(Z.Z,{})})]}),(0,P.jsx)(o.Z,{children:(0,P.jsxs)(v.ZP,{container:!0,children:[(0,P.jsx)(v.ZP,{item:!0,xs:12,padding:"8px 24px",justifyContent:"space-between",children:(0,P.jsxs)(o.Z,{display:"flex",justifyContent:"space-between",children:[(0,P.jsxs)(o.Z,{display:"flex",children:[(0,P.jsx)(s.Z,{src:null===(e=c.Z.bookingInfoDto)||void 0===e?void 0:e.avatarKhachHang}),(0,P.jsxs)(o.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",marginLeft:"5px",children:[(0,P.jsx)(a.Z,{children:null===(n=c.Z.bookingInfoDto)||void 0===n?void 0:n.tenKhachHang}),(0,P.jsx)(a.Z,{children:null===(i=c.Z.bookingInfoDto)||void 0===i?void 0:i.soDienThoai})]})]}),(0,P.jsx)(o.Z,{children:(0,P.jsxs)(j.Z,{orientation:"horizontal",children:[(0,P.jsx)(r.Z,{onClick:async()=>{var e;await c.Z.onShowBookingInfo(),await c.Z.getForEditBooking(null===(e=c.Z.bookingInfoDto)||void 0===e?void 0:e.id),c.Z.isShowCreateOrEdit=!0},children:"Ch\u1ec9nh s\u1eeda"}),(0,P.jsx)(r.Z,{onClick:async()=>{c.Z.isShowConfirmDelete=!0},children:"X\xf3a"})]})})]})}),(0,P.jsx)(v.ZP,{item:!0,xs:12,padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",children:(0,P.jsxs)(y.Z,{children:[(0,P.jsx)(b.Z,{children:(0,P.jsxs)(C.Z,{children:[(0,P.jsx)(k.Z,{sx:{fontSize:"13px"},children:"Ng\xe0y"}),(0,P.jsx)(k.Z,{sx:{fontSize:"13px"},children:"D\u1ecbch v\u1ee5"}),(0,P.jsx)(k.Z,{sx:{fontSize:"13px"},children:"Gi\xe1"}),(0,P.jsx)(k.Z,{sx:{fontSize:"13px"},children:"Nh\xe2n vi\xean"}),(0,P.jsx)(k.Z,{sx:{fontSize:"13px"},children:"Ghi ch\xfa"})]})}),(0,P.jsx)(D.Z,{children:(0,P.jsxs)(C.Z,{children:[(0,P.jsx)(k.Z,{children:(0,P.jsxs)(a.Z,{sx:{color:"black",fontFamily:"Roboto",fontSize:"13px",fontWeight:"500",marginLeft:"8px"},children:[(0,T.Z)(new Date(c.Z.bookingInfoDto.bookingDate),"iii, dd/MM/yyyy",{locale:I.Z})," ","(",c.Z.bookingInfoDto.startTime," -"," ",c.Z.bookingInfoDto.endTime,")"]})}),(0,P.jsx)(k.Z,{children:(0,P.jsx)(a.Z,{sx:{color:"black",fontFamily:"Roboto",fontSize:"13px",fontWeight:"500",marginLeft:"8px"},children:c.Z.bookingInfoDto.tenDichVu})}),(0,P.jsx)(k.Z,{children:new Intl.NumberFormat("vi-VN").format(c.Z.bookingInfoDto.donGia)}),(0,P.jsx)(k.Z,{children:(0,P.jsx)(a.Z,{sx:{color:"black",fontFamily:"Roboto",fontSize:"13px",fontWeight:"500",marginLeft:"8px"},children:c.Z.bookingInfoDto.nhanVienThucHien})}),(0,P.jsx)(k.Z,{children:(0,P.jsx)(a.Z,{sx:{color:"black",fontFamily:"Roboto",fontSize:"13px",fontWeight:"500",marginLeft:"8px"},children:c.Z.bookingInfoDto.ghiChu})})]})})]})}),(0,P.jsx)(v.ZP,{item:!0,xs:12,padding:"8px 24px",children:(0,P.jsxs)(o.Z,{padding:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(a.Z,{fontSize:"13px",children:"Tr\u1ea1ng th\xe1i:"}),(0,P.jsxs)(w.Z,{direction:"row",children:[(0,P.jsx)(r.Z,{variant:"text",onClick:()=>{c.Z.bookingInfoDto.trangThai=E.Z.Wait},sx:{"&:hover":{background:"#FF9900",color:"#FFF"},background:(null===(t=c.Z.bookingInfoDto)||void 0===t?void 0:t.trangThai)==E.Z.Wait?"#FF9900":"#FF99001a",color:(null===(l=c.Z.bookingInfoDto)||void 0===l?void 0:l.trangThai)==E.Z.Wait?"#FFF":"#FF9900"},children:"\u0110ang ch\u1edd"}),(0,P.jsx)(r.Z,{onClick:()=>{c.Z.bookingInfoDto.trangThai=E.Z.Confirm},sx:{"&:hover":{background:"#7DC1FF",color:"#FFF"},background:(null===(d=c.Z.bookingInfoDto)||void 0===d?void 0:d.trangThai)==E.Z.Confirm?"#7DC1FF":"#7DC1FF1a",color:(null===(h=c.Z.bookingInfoDto)||void 0===h?void 0:h.trangThai)==E.Z.Confirm?"#FFF":"#7DC1FF"},children:"\u0110\xe3 x\xe1c nh\u1eadn"}),(0,P.jsx)(r.Z,{onClick:()=>{c.Z.bookingInfoDto.trangThai=E.Z.CheckIn},sx:{"&:hover":{background:"#009EF7",color:"#FFF"},background:(null===(g=c.Z.bookingInfoDto)||void 0===g?void 0:g.trangThai)==E.Z.CheckIn?"#009EF7":"#009EF71a",color:(null===(x=c.Z.bookingInfoDto)||void 0===x?void 0:x.trangThai)==E.Z.CheckIn?"#FFF":"#009EF7"},children:"\u0110\xe3 checkin"}),(0,P.jsx)(r.Z,{onClick:()=>{c.Z.bookingInfoDto.trangThai=E.Z.Success},sx:{"&:hover":{background:"#50CD89",color:"#FFF"},background:(null===(u=c.Z.bookingInfoDto)||void 0===u?void 0:u.trangThai)==E.Z.Success?"#50CD89":"#50CD891a",color:(null===(F=c.Z.bookingInfoDto)||void 0===F?void 0:F.trangThai)==E.Z.Success?"#FFF":"#50CD89"},children:"\u0110\xe3 ho\xe0n th\xe0nh"}),(0,P.jsx)(r.Z,{onClick:()=>{c.Z.bookingInfoDto.trangThai=E.Z.Cancel},sx:{"&:hover":{background:"#F1416C",color:"#FFF"},background:(null===(N=c.Z.bookingInfoDto)||void 0===N?void 0:N.trangThai)==E.Z.Cancel?"#F1416C":"#F1416C1a",color:(null===(z=c.Z.bookingInfoDto)||void 0===z?void 0:z.trangThai)==E.Z.Cancel?"#FFF":"#F1416C"},children:"H\u1ee7y"})]})]})})]})}),(0,P.jsx)(S.Z,{children:(0,P.jsx)(r.Z,{color:"primary",variant:"contained",onClick:async()=>{var e,n;const i=await H.Z.UpdateTrangThaiBooking(null===(e=c.Z.bookingInfoDto)||void 0===e?void 0:e.id,null===(n=c.Z.bookingInfoDto)||void 0===n?void 0:n.trangThai);await c.Z.onShowBookingInfo(),c.Z.idBooking=p.ZP.guidEmpty,await c.Z.getData(),(0,V.yv)(i.message,{variant:i.status,autoHideDuration:3e3})},children:"L\u01b0u tr\u1ea1ng th\xe1i"})})]})})}));i(1578);var z=i(89469),M=i(87068),W=i(20660),O=i(14829),B=i(48623),K=i(24631),A=i(41727),L=i(40454),G=i(51405),R=i(89790),Q=i(54045),_=i(57983);const q=(0,F.Pi)((e=>{let{initialView:n,initialDate:i,handleChangeViewType:t,toDayClick:s,handleNext:l,handlePrevious:d}=e;return(0,P.jsxs)(v.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{paddingTop:"1.5277777777777777vw",marginBottom:"10px"},children:[(0,P.jsx)(v.ZP,{item:!0,xs:12,sm:2,children:(0,P.jsx)(B.Z,{options:z.default.suggestKyThuatVien||[],getOptionLabel:e=>"".concat(e.tenNhanVien),size:"small",fullWidth:!0,disablePortal:!0,onChange:async(e,n)=>{var i,t;await c.Z.onChangeEmployee(null!==(i=null===n||void 0===n?void 0:n.id)&&void 0!==i?i:""),c.Z.createOrEditBookingDto.idNhanVien=null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:""},renderInput:e=>(0,P.jsx)(K.Z,{sx:{bgcolor:"#fff"},...e,placeholder:"T\xecm t\xean",InputProps:{...e.InputProps,startAdornment:(0,P.jsxs)(P.Fragment,{children:[e.InputProps.startAdornment,(0,P.jsx)(A.Z,{position:"start",children:(0,P.jsx)(_.Z,{})})]})}})})}),(0,P.jsx)(v.ZP,{item:!0,xs:12,sm:7,children:(0,P.jsxs)(o.Z,{display:"flex",sx:{"& button:not(.btn-to-day)":{minWidth:"unset",borderColor:"#E6E1E6",bgcolor:"#fff!important",px:"7px!important"},"& svg":{color:"#666466!important"},alignItems:"center",justifyContent:"center"},children:[(0,P.jsx)(r.Z,{variant:"outlined",sx:{mr:"16px"},className:"btn-outline-hover",onClick:d,children:(0,P.jsx)(R.Z,{})}),(0,P.jsx)(r.Z,{className:"btn-to-day",variant:"text",sx:{color:"var(--color-main)!important",fontSize:"16px!important",textTransform:"unset!important",bgcolor:"transparent!important",fontWeight:"400",paddingX:"0",mr:"20px"},onClick:s,children:"H\xf4m nay"}),(0,P.jsx)(a.Z,{fontSize:"16px",fontWeight:"700",children:(0,T.Z)(i,"cccc, dd 'th\xe1ng' MM, 'n\u0103m' yyyy",{locale:I.Z})}),(0,P.jsx)(r.Z,{variant:"outlined",sx:{ml:"16px"},onClick:l,children:(0,P.jsx)(Q.Z,{})})]})}),(0,P.jsxs)(v.ZP,{item:!0,xs:12,sm:3,sx:{display:"flex",alignItems:"center",justifyContent:"end",gap:"8px"},children:[(0,P.jsxs)(L.Z,{size:"small",value:n,onChange:t,sx:{bgcolor:"#fff",fontSize:"14px"},children:[(0,P.jsx)(G.Z,{value:"resourceTimeGridDay",children:"Ng\xe0y"}),(0,P.jsx)(G.Z,{value:"timeGridWeek",children:"Tu\u1ea7n"}),(0,P.jsx)(G.Z,{value:"dayGridMonth",children:"Th\xe1ng"})]}),(0,P.jsx)(B.Z,{options:z.default.suggestDichVu||[],getOptionLabel:e=>"".concat(e.tenDichVu),size:"small",fullWidth:!0,disablePortal:!0,onChange:async(e,n)=>{var i,t;await c.Z.onChangeService(null!==(i=null===n||void 0===n?void 0:n.id)&&void 0!==i?i:""),c.Z.createOrEditBookingDto.idDonViQuiDoi=null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:""},renderInput:e=>(0,P.jsx)(K.Z,{sx:{bgcolor:"#fff"},...e,placeholder:"T\xecm d\u1ecbch v\u1ee5",InputProps:{...e.InputProps,startAdornment:(0,P.jsxs)(P.Fragment,{children:[e.InputProps.startAdornment,(0,P.jsx)(A.Z,{position:"start",children:(0,P.jsx)(_.Z,{})})]})}})})]})]})}));var J=i(61682),U=i(2e3),X=i(87259),Y=i(10306),$=i(34032),ee=i(19673),ne=i(46119),ie=i(50514),te=i(55459);const oe=(0,F.Pi)((()=>{var e,n,i,s;const Z=(0,t.useContext)(h.Il).chinhanhCurrent,[f,m]=(0,t.useState)(!1),[v,j]=(0,t.useState)("dayGridMonth"),[y,b]=(0,t.useState)(new Date),C=(0,t.useRef)(null),[k,D]=(0,t.useState)(""),[w,S]=(0,t.useState)(),[F,I]=(0,t.useState)(),E=async()=>{var e;let n="week";const i=null!==(e=g.Z.get("lich-hen-view"))&&void 0!==e?e:"timeGridWeek";j(i);const t=C.current;t&&t.getApi&&t.getApi().changeView(i),n="dayGridMonth"==i?"month":"timeGridWeek"==i?"week":"day",c.Z.selectedDate=(0,T.Z)(y,"yyyy-MM-dd"),c.Z.typeView=n,await c.Z.getData()};(0,t.useEffect)((()=>{E(),(async()=>{await z.default.getSuggestKhachHang(),await z.default.getSuggestKyThuatVien(),await z.default.getSuggestDichVu(c.Z.idNhanVien)})()}),[Z.id]);(0,t.useEffect)((()=>{B()}),[]);const B=async()=>{const e=(new W.s).withUrl("https://localhost:44311/bookingHub").build();try{await e.start(),console.log("SignalR connected"),S(e),e.on("RecieiveAppointment",(()=>{E()}))}catch(n){console.error("SignalR connection error: ",n)}},K=async()=>{const e=(new W.s).withUrl("https://localhost:44311/notifications").build();I(e),e&&("Connected"!==e.state&&await e.start(),e.invoke("SendNotification").then((()=>{console.log("B\u1eaft \u0111\u1ea7u g\u1eedi th\xf4ng b\xe1o")})).catch((e=>{console.error("Error invoking SendNotification:",e)})))},A=e=>{D(e),m(!f),c.Z.isShowCreateOrEdit=!c.Z.isShowCreateOrEdit};return(0,P.jsxs)(o.Z,{sx:{padding:"16px 8px",height:"100%"},children:[(0,P.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #E6E1E6",paddingBottom:"1.5277777777777777vw"},children:[(0,P.jsx)(a.Z,{marginTop:"4px",fontSize:"16px",fontWeight:"700",children:"L\u1ecbch h\u1eb9n"}),(0,P.jsxs)(o.Z,{sx:{"& button":{minWidth:"unset"},display:"flex",gap:"8px"},children:[(0,P.jsx)(r.Z,{variant:"outlined",className:"btn-outline-hover",sx:{bgcolor:"#fff!important",paddingX:"8px"},children:(0,P.jsx)(l.r,{})}),(0,P.jsx)(r.Z,{startIcon:(0,P.jsx)(d.r,{}),variant:"outlined",className:"btn-outline-hover",sx:{bgcolor:"#fff!important",fontSize:"14px",fontWeight:"400",color:"#666466","& svg":{filter:" brightness(0) saturate(100%) invert(39%) sepia(6%) saturate(131%) hue-rotate(251deg) brightness(95%) contrast(85%)"}},children:"Th\xeam th\u1eddi gian ch\u1eb7n"}),(0,P.jsx)(r.Z,{hidden:!u.Z.isGrandPermission("Pages.Booking.Create"),startIcon:(0,P.jsx)(d.r,{}),variant:"contained",onClick:async()=>{c.Z.createNewBookingDto(),A("")},className:"btn-container-hover",sx:{bgcolor:"var(--color-main)",fontSize:"14px",fontWeight:"400"},children:"Th\xeam cu\u1ed9c h\u1eb9n"})]})]}),(0,P.jsxs)(o.Z,{children:[(0,P.jsx)(q,{initialView:v,initialDate:y,handleChangeViewType:async e=>{j(e.target.value);const n=C.current;n&&n.getApi&&n.getApi().changeView(e.target.value);let i=e.target.value;i="dayGridMonth"==i?"month":"timeGridWeek"==i?"week":"day",g.Z.set("lich-hen-view",e.target.value),await c.Z.onChangeTypeView(i)},toDayClick:async()=>{const e=new Date;b(e);const n=C.current;if(n&&n.getApi){n.getApi().today();const e=n.getApi().getDate();b(e),await c.Z.onChangeDate((0,T.Z)(e,"yyyy-MM-dd"))}},handlePrevious:async()=>{const e=C.current;if(e&&e.getApi){e.getApi().prev();const n=e.getApi().getDate();b(n),await c.Z.onChangeDate((0,T.Z)(n,"yyyy-MM-dd")),console.log(n),c.Z.selectedDate=(0,T.Z)(n,"yyyy-MM-dd")}},handleNext:async()=>{const e=C.current;if(e&&e.getApi){e.getApi().next();const n=e.getApi().getDate();b(n),await c.Z.onChangeDate((0,T.Z)(n,"yyyy-MM-dd")),c.Z.selectedDate=(0,T.Z)(n,"yyyy-MM-dd")}}}),(0,P.jsx)(J.Z,{ref:C,plugins:[U.Z,X.Z,Y.ZP,$.Z,ee.Z,ne.Z],schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",resources:void 0!==c.Z.idNhanVien&&""!==c.Z.idNhanVien?null!==(e=null===(n=z.default.suggestKyThuatVien)||void 0===n?void 0:n.filter((e=>e.id===c.Z.idNhanVien)).map((e=>({id:e.id,title:"".concat(JSON.stringify(e))}))))&&void 0!==e?e:[]:null!==(i=null===(s=z.default.suggestKyThuatVien)||void 0===s?void 0:s.map((e=>({title:"".concat(JSON.stringify(e)),id:e.id}))))&&void 0!==i?i:[],resourceLabelContent:ae,headerToolbar:!1,locale:"vi",initialView:v,firstDay:1,editable:!0,selectable:!0,titleFormat:{weekday:"long"},height:748,initialDate:y,selectMirror:!1,dayMaxEvents:!0,dayMaxEventRows:4,slotMinTime:"07:00:00",slotMaxTime:"23:00:00",allDaySlot:!1,dayHeaderFormat:{weekday:"long",day:"timeGridWeek"===v?"numeric":"2-digit"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",omitZeroMinute:!1},events:void 0!==c.Z.fullCalendarEvents?c.Z.fullCalendarEvents:[],weekends:!0,select:async e=>{const n=e.view.calendar,i=e.startStr,t=(0,ie.Z)(i),o=(0,T.Z)(t,"HH:mm"),a=(0,T.Z)(t,"yyyy-MM-dd");var r,s;(n.unselect(),c.Z.createOrEditBookingDto.startHours=o,c.Z.createOrEditBookingDto.startTime=a,"resourceTimeGridDay"===e.view.type)&&(c.Z.createOrEditBookingDto.idNhanVien=null!==(r=null===(s=e.resource)||void 0===s?void 0:s.id)&&void 0!==r?r:p.ZP.guidEmpty);c.Z.isShowCreateOrEdit=!0},eventContent:se,eventClick:async e=>{if(c.Z.idBooking=e.event.id,null!=e.event.id||""!=e.event.id||void 0!==e.event.id){const n=document.getElementsByClassName("fc-popover")[0];n&&(n.style.display="none"),await c.Z.getBookingInfo(e.event.id),await c.Z.onShowBookingInfo()}},dayHeaderContent:re})]}),(0,P.jsx)(x.Z,{visible:c.Z.isShowCreateOrEdit,onCancel:()=>{m(!f),c.Z.isShowCreateOrEdit=!1},onOk:async()=>{await E(),m(!f),await K(),await O.Z.GetUserNotification()},idLichHen:k}),(0,P.jsx)(N,{}),(0,P.jsx)(M.Z,{isShow:c.Z.isShowConfirmDelete,onOk:async()=>{!0===await H.Z.DeleteBooking(c.Z.idBooking)?(0,V.yv)("X\xf3a b\u1ea3n ghi th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:3e3}):(0,V.yv)("C\xf3 l\u1ed7i s\u1ea3y ra vui l\xf2ng th\u1eed l\u1ea1i sau!",{variant:"error",autoHideDuration:3e3}),c.Z.isShowConfirmDelete=!1,await c.Z.onShowBookingInfo(),c.Z.idBooking=p.ZP.guidEmpty,E()},onCancel:()=>{c.Z.isShowConfirmDelete=!1}})]})}));function ae(e){const n=JSON.parse(e.resource.title);return(0,P.jsxs)(o.Z,{display:"flex",padding:"6px 4px",justifyContent:"center",alignItems:"center",sx:{minHeight:"65px"},children:[(0,P.jsx)(o.Z,{children:(0,P.jsx)(o.Z,{children:(0,P.jsx)(s.Z,{src:n.avatar,alt:n.tenNhanVien})})}),(0,P.jsxs)(o.Z,{marginLeft:"5px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"start",children:[(0,P.jsx)(a.Z,{fontSize:"12px",fontWeight:"700",sx:{overflow:"hidden"},children:n.tenNhanVien}),(0,P.jsx)(a.Z,{fontSize:"12px",children:n.chucVu})]})]})}function re(e){const n=e.view.type;return(0,P.jsxs)(o.Z,{display:"flex",padding:"6px 4px",justifyContent:"center",flexDirection:"timeGridWeek"===n?"column":"row",alignItems:"center",minHeight:"65px",children:[(0,P.jsx)(o.Z,{fontSize:"timeGridWeek"===n?"12px":"14px",children:(0,T.Z)(e.date,"EEEE",{locale:I.Z})}),"timeGridWeek"===n?(0,P.jsx)(o.Z,{fontSize:"18px",mt:1,children:(0,T.Z)(e.date,"d",{locale:I.Z})}):null]})}function se(e){var n,i;const t=(0,T.Z)(null!==(n=e.event.start)&&void 0!==n?n:new Date,"HH:mm"),r=(0,T.Z)(null!==(i=e.event.end)&&void 0!==i?i:new Date,"HH:mm");return(0,P.jsx)(o.Z,{sx:{bgcolor:e.event.backgroundColor,padding:"2px 8px",borderLeft:"4px solid ".concat(e.event.textColor),borderRadius:"4px",height:"100%",overflow:"hidden"},children:"dayGridMonth"===e.view.type?(0,P.jsxs)(a.Z,{variant:"body1",fontSize:"12px",whiteSpace:"nowrap",width:"100%",color:e.event.textColor,children:[t," ",e.event.title+":",e.event.display]}):(0,P.jsxs)(a.Z,{variant:"body1",fontSize:"12px",whiteSpace:"normal",color:e.event.textColor,children:[(0,P.jsxs)(o.Z,{display:"flex",alignItems:"center",sx:{overflow:"hidden"},children:[t," - ",r," ",(0,P.jsx)(te.Z,{style:{fontSize:"14px",marginLeft:"5px"}})]}),(0,P.jsx)(o.Z,{children:e.event.title}),(0,P.jsx)(o.Z,{children:e.event.display})]})})}}}]);