"use strict";(self.webpackChunklayout_jsx=self.webpackChunklayout_jsx||[]).push([[9041],{36073:(n,e,i)=>{i.d(e,{Z:()=>l,r:()=>r});var t,a,o=i(47313);function h(){return h=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},h.apply(this,arguments)}function s(n,e){let{title:i,titleId:s,...r}=n;return o.createElement("svg",h({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":s},r),i?o.createElement("title",{id:s},i):null,t||(t=o.createElement("path",{d:"M4 8H12",stroke:"#FFFAFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=o.createElement("path",{d:"M8 12V4",stroke:"#FFFAFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const r=o.forwardRef(s),l=i.p+"static/media/add.0b705e20dfa5086a83bee9c502946102.svg"},94650:(n,e,i)=>{i.d(e,{Z:()=>l,r:()=>r});var t,a,o=i(47313);function h(){return h=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},h.apply(this,arguments)}function s(n,e){let{title:i,titleId:s,...r}=n;return o.createElement("svg",h({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":s},r),i?o.createElement("title",{id:s},i):null,t||(t=o.createElement("path",{d:"M16.5 9C16.5 13.14 13.14 16.5 9 16.5C4.86 16.5 1.5 13.14 1.5 9C1.5 4.86 4.86 1.5 9 1.5C13.14 1.5 16.5 4.86 16.5 9Z",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=o.createElement("path",{d:"M11.7825 11.385L9.4575 9.9975C9.0525 9.7575 8.7225 9.18 8.7225 8.7075V5.6325",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const r=o.forwardRef(s),l=i.p+"static/media/clock.c9fa2507b4a9abb591d3f30377234fbb.svg"},61566:(n,e,i)=>{i.d(e,{Z:()=>l,r:()=>r});var t,a,o=i(47313);function h(){return h=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},h.apply(this,arguments)}function s(n,e){let{title:i,titleId:s,...r}=n;return o.createElement("svg",h({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":s},r),i?o.createElement("title",{id:s},i):null,t||(t=o.createElement("path",{d:"M9.58335 17.5003C13.9556 17.5003 17.5 13.9559 17.5 9.58366C17.5 5.2114 13.9556 1.66699 9.58335 1.66699C5.2111 1.66699 1.66669 5.2114 1.66669 9.58366C1.66669 13.9559 5.2111 17.5003 9.58335 17.5003Z",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=o.createElement("path",{d:"M18.3334 18.3337L16.6667 16.667",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const r=o.forwardRef(s),l=i.p+"static/media/search-normal.4032718719c7e2bac848ef728621bbbe.svg"},69682:(n,e,i)=>{i.d(e,{Z:()=>u});var t=i(47313),a=i(48623),o=i(24631),h=i(24193),s=i(9019),r=i(61113),l=i(9506),c=i(5211),d=i(46417);function u(n){let{handleChoseItem:e,idChosed:i,listOption:u,handleClickBtnAdd:g,roleAdd:p=!1}=n;const[x,m]=(0,t.useState)(null);t.useEffect((()=>{const n=u.filter((n=>n.id==i));n.length>0?m(n[0]):m(null)}),[i]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(a.Z,{size:"small",fullWidth:!0,disablePortal:!0,autoComplete:!0,multiple:!1,value:x,onChange:(n,i)=>{e(i)},filterOptions:n=>n,isOptionEqualToValue:(n,e)=>n.id===e.id,options:[{id:"",soTaiKhoan:""},...u],getOptionLabel:n=>n.tenChuThe?n.tenRutGon.concat(" - ",n.soTaiKhoan," - ",n.tenChuThe):"",renderInput:n=>(0,d.jsx)(o.Z,{...n,label:"T\xecm ki\u1ebfm"}),renderOption:(n,e)=>(0,d.jsx)("div",{children:(0,t.createElement)("li",{...n,key:""==e.id?0:e.id},""==e.id&&p&&(0,d.jsx)(h.Z,{sx:{color:"var(--color-main)"},variant:"outlined",startIcon:(0,d.jsx)(c.Z,{}),fullWidth:!0,onClick:g,children:"Th\xeam m\u1edbi"},0),""!=e.id&&(0,d.jsxs)(s.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[(0,d.jsx)(r.Z,{style:{fontSize:"14px",fontWeight:500},children:e.tenChuThe.toString().concat(" (","".concat(e.soTaiKhoan),")")}),(0,d.jsx)(l.Z,{component:"span",style:{fontWeight:500,color:"#acaca5",fontSize:"12px"},children:e.tenNganHang.toString().concat(" ".concat(e.maNganHang))})]},e.id))},""==e.id?0:e.id)})})}},48127:(n,e,i)=>{i.d(e,{Z:()=>o});var t=i(10298),a=i(46417);function o(n){let{onClose:e}=n;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(t.Z,{onClick:e,sx:{position:"absolute",right:"16px",top:"16px",minWidth:20,"&:hover":{filter:"brightness(0) saturate(100%) invert(34%) sepia(44%) saturate(2405%) hue-rotate(316deg) brightness(98%) contrast(92%)"}}})})}},36896:(n,e,i)=>{i.d(e,{Z:()=>Q});var t,a,o,h,s=i(94469),r=i(33604),l=i(61113),c=i(47131),d=i(96467),u=i(9019),g=i(9506),p=i(48623),x=i(24631),m=i(41727),v=i(24193),C=i(48119),T=i(16429),f=i(1550),H=i(23306),Z=i(40454),b=i(51405),j=i(4117),w=i(47313),y=i(36073),k=i(26417),K=i(7410),D=i(69551),S=i(68507),N=i(47655),I=i(61566);function P(){return P=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},P.apply(this,arguments)}function V(n,e){let{title:i,titleId:s,...r}=n;return w.createElement("svg",P({width:60,height:60,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":s},r),i?w.createElement("title",{id:s},i):null,t||(t=w.createElement("path",{d:"M22.5 5C15.95 5 10.625 10.325 10.625 16.875C10.625 23.3 15.65 28.5 22.2 28.725C22.4 28.7 22.6 28.7 22.75 28.725C22.8 28.725 22.825 28.725 22.875 28.725C22.9 28.725 22.9 28.725 22.925 28.725C29.325 28.5 34.35 23.3 34.375 16.875C34.375 10.325 29.05 5 22.5 5Z",fill:"#A3ADC2"})),a||(a=w.createElement("path",{d:"M35.2 35.375C28.225 30.725 16.85 30.725 9.82502 35.375C6.65002 37.5 4.90002 40.375 4.90002 43.45C4.90002 46.525 6.65002 49.375 9.80002 51.475C13.3 53.825 17.9 55 22.5 55C27.1 55 31.7 53.825 35.2 51.475C38.35 49.35 40.1 46.5 40.1 43.4C40.075 40.325 38.35 37.475 35.2 35.375Z",fill:"#A3ADC2"})),o||(o=w.createElement("path",{d:"M49.975 18.35C50.375 23.2 46.925 27.45 42.15 28.025C42.125 28.025 42.125 28.025 42.1 28.025H42.025C41.875 28.025 41.725 28.025 41.6 28.075C39.175 28.2 36.95 27.425 35.275 26C37.85 23.7 39.325 20.25 39.025 16.5C38.85 14.475 38.15 12.625 37.1 11.05C38.05 10.575 39.15 10.275 40.275 10.175C45.175 9.75001 49.55 13.4 49.975 18.35Z",fill:"#A3ADC2"})),h||(h=w.createElement("path",{d:"M54.975 41.475C54.775 43.9 53.225 46 50.625 47.425C48.125 48.8 44.975 49.45 41.85 49.375C43.65 47.75 44.7 45.725 44.9 43.575C45.15 40.475 43.675 37.5 40.725 35.125C39.05 33.8 37.1 32.75 34.975 31.975C40.5 30.375 47.45 31.45 51.725 34.9C54.025 36.75 55.2 39.075 54.975 41.475Z",fill:"#A3ADC2"})))}const E=w.forwardRef(V);i.p;var L=i(21933);const M=L.Ry().shape({idDonViQuiDoi:L.Z_().required("D\u1ecbch v\u1ee5 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),idKhachHang:L.Z_().required("Kh\xe1ch h\xe0ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),startTime:L.Z_().required("Vui l\xf2ng ch\u1ecdn ng\xe0y l\xe0m d\u1ecbch v\u1ee5"),startHours:L.Z_().required("Vui l\xf2ng ch\u1ecdn th\u1eddi gian l\xe0m d\u1ecbch v\u1ee5")});var W=i(95412),O=i(2878),z=i(60701),A=i(89469),F=i(7596),G=i(79015),B=i(46417);class R extends w.Component{constructor(){super(...arguments),this.state={isShowKhachHangModal:!1,thoiGianThucHien:"0"},this.onOpenKhachHangModal=()=>{this.setState({isShowKhachHangModal:!this.state.isShowKhachHangModal})},this.handleSubmit=async n=>{var e;const i=await F.Z.onCreateOrEditBooking({id:n.id,idChiNhanh:null!==(e=S.Z.get("IdChiNhanh"))&&void 0!==e?e:"",idDonViQuiDoi:n.idDonViQuiDoi,idKhachHang:n.idKhachHang,idNhanVien:n.idNhanVien,startHours:n.startHours,startTime:n.startTime,ghiChu:n.ghiChu,trangThai:n.trangThai});null!=i?(0,N.yv)(n.id===D.ZP.guidEmpty||""===n.id?"Th\xeam m\u1edbi th\xe0nh c\xf4ng":"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:3e3}):(0,N.yv)("C\xf3 l\u1ed7i s\u1ea3y ra vui l\xf2ng th\u1eed l\u1ea1i sau!",{variant:"error",autoHideDuration:3e3}),this.props.onOk(i.id)}}componentDidMount(){W.Z.createKhachHangDto(),A.default.getSuggestKhachHang()}render(){const{visible:n,onCancel:e}=this.props,i=F.Z.createOrEditBookingDto;return(0,B.jsxs)(s.Z,{open:n,onClose:e,fullWidth:!0,maxWidth:"md",children:[(0,B.jsxs)(r.Z,{sx:{borderBottom:"1px solid #E6E1E6"},children:[(0,B.jsx)(l.Z,{fontSize:"24px",fontWeight:"700",children:""===i.id||i.id===D.ZP.guidEmpty?"Th\xeam cu\u1ed9c h\u1eb9n":"C\u1eadp h\u1eadt l\u1ecbch h\u1eb9n"}),(0,B.jsx)(c.Z,{"aria-label":"close",onClick:e,sx:{position:"absolute",right:8,top:8,"&:hover svg":{filter:"brightness(0) saturate(100%) invert(34%) sepia(44%) saturate(2405%) hue-rotate(316deg) brightness(98%) contrast(92%)"}},children:(0,B.jsx)(k.r,{})})]}),(0,B.jsx)(d.Z,{sx:{pr:"0",pb:"0"},children:(0,B.jsx)(K.J9,{initialValues:i,onSubmit:this.handleSubmit,validationSchema:M,children:n=>{var i,t,a,o,h,s,r,c,d,w,k,S,N,P;let{errors:V,touched:L,values:M,handleChange:W,setFieldValue:O,isSubmitting:z}=n;return(0,B.jsxs)(K.l0,{onKeyPress:n=>{"Enter"===n.key&&n.preventDefault()},children:[(0,B.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,B.jsx)(u.ZP,{item:!0,xs:12,sm:5,children:(0,B.jsxs)(g.Z,{display:"flex",justifyContent:"space-between",width:"100%",height:"100%",flexDirection:"column",children:[(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(p.Z,{sx:{pt:"24px"},options:A.default.suggestKhachHang,getOptionLabel:n=>"".concat(n.tenKhachHang," ").concat(""!==n.soDienThoai?n.soDienThoai:""),value:null!==(i=null===(t=A.default.suggestKhachHang)||void 0===t||null===(a=t.filter((n=>n.id==M.idKhachHang)))||void 0===a?void 0:a[0])&&void 0!==i?i:{id:"",soDienThoai:"",tenKhachHang:""},size:"small",fullWidth:!0,disablePortal:!0,onChange:(n,e)=>{O("idKhachHang",e?e.id:"")},placeholder:"Ch\u1ecdn kh\xe1ch h\xe0ng",renderInput:n=>(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,B.jsx)(x.Z,{...n,placeholder:"Ch\u1ecdn kh\xe1ch h\xe0ng",InputProps:{...n.InputProps,startAdornment:(0,B.jsxs)(B.Fragment,{children:[n.InputProps.startAdornment,(0,B.jsx)(m.Z,{position:"start",children:(0,B.jsx)(I.r,{})})]})}}),(0,B.jsx)(v.Z,{size:"small",variant:"text",sx:{color:"var(--color-main)","& svg":{filter:"var(--color-hoverIcon)",width:"24px",height:"24px"},minWidth:"36px",width:"36px",height:"36px",borderRadius:"4px",border:"1px solid #319DFF"},onClick:this.onOpenKhachHangModal,children:(0,B.jsx)(y.r,{})})]})}),V.idKhachHang&&L.idKhachHang&&(0,B.jsx)("small",{className:"text-danger",children:V.idKhachHang})]}),(0,B.jsxs)(g.Z,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,B.jsx)(C.Z,{sx:{width:"140px",height:"140px",bgcolor:"#EEF0F4"},children:(0,B.jsx)(E,{width:"60px",height:"60px"})}),(0,B.jsx)(l.Z,{marginTop:"40px",marginBottom:"12px",color:"#3D475C",fontSize:"18px",fontWeight:"700",children:"Th\xeam kh\xe1ch h\xe0ng"}),(0,B.jsx)(l.Z,{color:"#8492AE",fontSize:"14px",fontWeight:400,children:"S\u1eed d\u1ee5ng t\xecm ki\u1ebfm \u0111\u1ec3 th\xeam kh\xe1ch h\xe0ng"})]})]})}),(0,B.jsxs)(u.ZP,{item:!0,xs:12,sm:7,sx:{bgcolor:"#F9FAFC",pr:"24px"},children:[(0,B.jsx)(T.Z,{className:"mt-4 mb-1",children:(0,B.jsx)(G.Z,{props:{width:"100%",size:"small",label:(0,B.jsxs)(l.Z,{variant:"subtitle2",children:["Ng\xe0y",(0,B.jsx)("span",{className:"text-danger",children:" *"})]}),error:Boolean(V.startTime),helperText:Boolean(V.startTime)&&(0,B.jsx)("span",{className:"text-danger",children:String(V.startTime)})},defaultVal:M.startTime,handleChangeDate:n=>{M.startTime=n}})}),(0,B.jsxs)(u.ZP,{container:!0,spacing:2,sx:{marginTop:"4px"},children:[(0,B.jsx)(u.ZP,{item:!0,md:8,sm:6,xs:12,children:(0,B.jsx)(T.Z,{children:(0,B.jsx)(p.Z,{options:null!==(o=null===A.default||void 0===A.default?void 0:A.default.suggestDichVu)&&void 0!==o?o:[],getOptionLabel:n=>"".concat(n.tenDichVu),value:null!==(h=null===(s=A.default.suggestDichVu)||void 0===s||null===(r=s.filter((n=>n.id==M.idDonViQuiDoi)))||void 0===r?void 0:r[0])&&void 0!==h?h:{id:"",donGia:0,tenDichVu:""},size:"small",fullWidth:!0,disablePortal:!0,onChange:async(n,e)=>{O("idDonViQuiDoi",e?e.id:""),await A.default.getSuggestKyThuatVienByIdDichVu(e?e.id:"")},renderInput:n=>(0,B.jsx)(x.Z,{...n,label:(0,B.jsxs)(l.Z,{variant:"subtitle2",fontSize:"14px",children:["D\u1ecbch v\u1ee5 ",(0,B.jsx)("span",{className:"text-danger",children:"*"})]}),error:!(!V.idDonViQuiDoi||!L.idDonViQuiDoi),helperText:V.idDonViQuiDoi&&L.idDonViQuiDoi&&(0,B.jsx)("small",{className:"text-danger",children:V.idDonViQuiDoi}),placeholder:"Nh\u1eadp t\xean d\u1ecbch v\u1ee5"})})})}),(0,B.jsx)(u.ZP,{item:!0,md:4,xs:12,sm:6,children:(0,B.jsx)(T.Z,{children:(0,B.jsx)(x.Z,{label:(0,B.jsxs)(l.Z,{variant:"subtitle2",fontSize:"14px",children:["Th\u1eddi gian b\u1eaft \u0111\u1ea7u ",(0,B.jsx)("span",{className:"text-danger",children:"*"})]}),error:!(!V.startHours||!L.startHours),helperText:V.startHours&&L.startHours&&(0,B.jsx)("span",{className:"text-danger",children:V.startHours}),InputLabelProps:{shrink:!0},type:"time",size:"small",name:"startHours",value:M.startHours,onChange:W})})}),(0,B.jsxs)(u.ZP,{container:!0,item:!0,spacing:[4,2],children:[(0,B.jsx)(u.ZP,{item:!0,md:8,sm:6,xs:12,children:(0,B.jsx)(T.Z,{children:(0,B.jsx)(p.Z,{options:null!==(c=null===A.default||void 0===A.default?void 0:A.default.suggestKyThuatVien)&&void 0!==c?c:[],getOptionLabel:n=>"".concat(n.tenNhanVien),value:null!==(d=null===(w=A.default.suggestKyThuatVien)||void 0===w||null===(k=w.filter((n=>n.id==M.idNhanVien)))||void 0===k?void 0:k[0])&&void 0!==d?d:{id:"",avatar:"",chucVu:"",soDienThoai:"",tenNhanVien:""},size:"small",fullWidth:!0,disablePortal:!0,onChange:(n,e)=>{O("idNhanVien",e?e.id:"")},renderInput:n=>(0,B.jsx)(x.Z,{...n,label:(0,B.jsx)(l.Z,{variant:"body1",fontSize:"14px",children:"Nh\xe2n vi\xean"}),placeholder:"Nh\u1eadp t\xean nh\xe2n vi\xean"})})})}),(0,B.jsx)(u.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,B.jsx)(T.Z,{children:(0,B.jsx)(x.Z,{label:(0,B.jsx)(l.Z,{variant:"subtitle2",fontSize:"14px",children:"Th\u1eddi gian l\xe0m"}),value:null!==(S=null===(N=A.default.suggestDichVu)||void 0===N||null===(P=N.find((n=>n.id==M.idDonViQuiDoi)))||void 0===P?void 0:P.thoiGianThucHien)&&void 0!==S?S:"0",type:"text",size:"small"})})})]})]}),(0,B.jsx)(u.ZP,{item:!0,sx:{marginTop:"16px"},children:(0,B.jsxs)(f.Z,{fullWidth:!0,children:[(0,B.jsx)(H.Z,{children:(0,B.jsx)(l.Z,{fontSize:"14px",children:"Tr\u1ea1ng th\xe1i"})}),(0,B.jsx)(Z.Z,{label:(0,B.jsx)(l.Z,{fontSize:"14px",children:"Tr\u1ea1ng th\xe1i"}),fullWidth:!0,size:"small",name:"trangThai",value:M.trangThai,onChange:W,children:D.ZP.trangThaiCheckIn.map((n=>(0,B.jsx)(b.Z,{value:n.value,children:n.name},n.value)))})]})}),(0,B.jsx)(u.ZP,{item:!0,sx:{marginTop:"16px"},children:(0,B.jsx)(T.Z,{className:"mt-2 mb-4",children:(0,B.jsx)(x.Z,{label:(0,B.jsx)(l.Z,{variant:"subtitle2",fontSize:"14px",children:"Ghi ch\xfa"}),type:"text",multiline:!0,rows:4,size:"small",name:"ghiChu",value:M.ghiChu,onChange:W})})})]})]}),(0,B.jsx)(j.Z,{sx:{pr:"0",pb:"24px",position:"sticky",bgcolor:"#fff",bottom:"0",left:"0"},children:(0,B.jsx)(u.ZP,{container:!0,children:(0,B.jsx)(u.ZP,{item:!0,xs:12,sx:{bgcolor:"#F9FAFC"},children:(0,B.jsxs)(g.Z,{display:"flex",justifyContent:"end",gap:"8px",sx:{"& button":{textTransform:"unset!important"}},children:[(0,B.jsx)(v.Z,{className:"btn-outline-hover",variant:"outlined",size:"small",sx:{borderColor:"#E6E1E6",color:"var(--color-main)"},onClick:e,children:"H\u1ee7y"}),z?(0,B.jsx)(v.Z,{className:"btn-container-hover",variant:"contained",type:"submit",sx:{backgroundColor:"var(--color-main)!important"},children:"\u0110ang l\u01b0u"}):(0,B.jsx)(v.Z,{className:"btn-container-hover",variant:"contained",type:"submit",sx:{backgroundColor:"var(--color-main)!important"},children:"L\u01b0u"})]})})})})]})}})}),(0,B.jsx)(O.Z,{visible:this.state.isShowKhachHangModal,formRef:W.Z.createEditKhachHangDto,onCancel:this.onOpenKhachHangModal,onOk:async n=>{await A.default.getSuggestKhachHang(),this.onOpenKhachHangModal()},title:"Th\xeam m\u1edbi kh\xe1ch h\xe0ng"})]})}}const Q=(0,z.Pi)(R)},54417:(n,e,i)=>{i.r(e),i.d(e,{default:()=>Ze});var t,a,o,h=i(47313),s=i(9019),r=i(9506),l=i(6820),c=i(24193),d=i(85905);function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},u.apply(this,arguments)}function g(n,e){let{title:i,titleId:s,...r}=n;return h.createElement("svg",u({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":s},r),i?h.createElement("title",{id:s},i):null,t||(t=h.createElement("path",{d:"M15.75 2V22H16.19C19.83 22 22 19.83 22 16.19V7.81C22 4.17 19.83 2 16.19 2H15.75Z",fill:"#525F7A"})),a||(a=h.createElement("path",{d:"M2 7.81V11.25H14.25V2H7.81C4.17 2 2 4.17 2 7.81Z",fill:"#525F7A"})),o||(o=h.createElement("path",{d:"M2 12.75V16.19C2 19.83 4.17 22 7.81 22H14.25V12.75H2Z",fill:"#525F7A"})))}const p=h.forwardRef(g);i.p;var x,m,v,C,T;function f(){return f=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},f.apply(this,arguments)}function H(n,e){let{title:i,titleId:t,...a}=n;return h.createElement("svg",f({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":t},a),i?h.createElement("title",{id:t},i):null,x||(x=h.createElement("path",{d:"M16.2508 22L16.2508 9.75L22.0508 9.75L22.0508 16.19C22.0508 19.83 19.8808 22 16.2508 22Z",fill:"#A3ADC2"})),m||(m=h.createElement("path",{d:"M7.75005 2L7.75005 14.25L2.05005 14.25L2.05005 7.81C2.05005 4.17 4.18264 2 7.75005 2Z",fill:"#A3ADC2"})),v||(v=h.createElement("path",{d:"M7.75 22C4.18 21.95 2.05 19.79 2.05 16.19L2.05 9.75L7.75 9.75L7.75 22Z",fill:"#A3ADC2"})),C||(C=h.createElement("path",{d:"M16.25 2C19.8826 2.05 22.05 4.21 22.05 7.81L22.05 14.25L16.25 14.25L16.25 2Z",fill:"#A3ADC2"})),T||(T=h.createElement("path",{d:"M14.75 22L14.75 2L9.25 2L9.25 22L14.75 22Z",fill:"#A3ADC2"})))}const Z=h.forwardRef(H);i.p;var b=i(35898),j=i(24631),w=i(41727),y=i(61113),k=i(80280),K=i(2040),D=i(55459),S=i(94469),N=i(33604),I=i(47131),P=i(96467),V=i(4117),E=i(96219);const L=new class{constructor(){this.CheckExistCusCheckin=async(n,e)=>{k.Z.checkNull(e)&&(e=d.i.EMPTY);return await E.Z.post("api/services/app/CheckIn/CheckExistCusCheckin?idCus=".concat(n,"&idCheckIn=").concat(e)).then((n=>n.data.result))},this.InsertCustomerCheckIn=async n=>await E.Z.post("api/services/app/CheckIn/InsertCustomerCheckIn",n).then((n=>n.data.result)),this.UpdateCustomerCheckIn=async n=>await E.Z.post("api/services/app/CheckIn/UpdateCustomerCheckIn",n).then((n=>n.data.result)),this.GetListCustomerChecking=async n=>await E.Z.post("api/services/app/CheckIn/GetListCustomerChecking",n).then((n=>n.data.result)),this.UpdateTrangThaiCheckin=async function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(k.Z.checkNull(n)||n===d.i.EMPTY)return;return await E.Z.post("api/services/app/CheckIn/UpdateTrangThaiCheckin?idCheckIn=".concat(n,"&trangThai=").concat(e)).then((n=>n.data.result))},this.InsertCheckInHoaDon=async n=>{if(k.Z.checkNull(null===n||void 0===n?void 0:n.idCheckIn)||(null===n||void 0===n?void 0:n.idCheckIn)===d.i.EMPTY)return;(k.Z.checkNull(null===n||void 0===n?void 0:n.idBooking)||(null===n||void 0===n?void 0:n.idBooking)===d.i.EMPTY)&&(n.idBooking=null);return await E.Z.post("api/services/app/CheckIn/InsertCheckInHoaDon",n).then((n=>n.data.result))},this.Update_IdHoaDon_toCheckInHoaDon=async(n,e)=>{if(k.Z.checkNull(n)||n===d.i.EMPTY)return!1;try{return(await E.Z.get("api/services/app/CheckIn/Update_IdHoaDon_toCheckInHoaDon?idCheckIn=".concat(n,"&idHoaDon=").concat(e))).data.result}catch(i){return!1}}}};var M=i(89600);class W{constructor(n){let{idKhachHang:e="",idChiNhanh:i="",dateTimeCheckIn:t=(0,M.Z)(new Date,"yyyy-MM-dd HH:mm:ss.SSS")}=n;this.idKhachHang="",this.idChiNhanh="",this.dateTimeCheckIn=(0,M.Z)(new Date,"yyyy-MM-dd HH:mm:ss.SSS"),this.ghiChu="",this.idKhachHang=e,this.idChiNhanh=i,this.dateTimeCheckIn=t}}class O{constructor(n){let{idKhachHang:e=d.i.EMPTY,idChiNhanh:i=null,idCheckIn:t=d.i.EMPTY,dateTimeCheckIn:a=new Date,maKhachHang:o="",tenKhachHang:h="",soDienThoai:s="",tongTichDiem:r=0,ghiChu:l="",txtTrangThaiCheckIn:c="\u0110ang ch\u1edd"}=n;this.idKhachHang=null,this.idChiNhanh=null,this.idCheckIn=d.i.EMPTY,this.maKhachHang="",this.tenKhachHang="",this.soDienThoai="",this.tongTichDiem=0,this.dateTimeCheckIn=(new Date).toLocaleString(),this.ghiChu="",this.txtTrangThaiCheckIn="",this.idKhachHang=e,this.idChiNhanh=i,this.idCheckIn=t,this.maKhachHang=o,this.tenKhachHang=h,this.soDienThoai=s,this.tongTichDiem=r,this.dateTimeCheckIn=a.toLocaleString(),this.ghiChu=l,this.txtTrangThaiCheckIn=c}get dateCheckIn(){return(0,M.Z)(new Date(this.dateTimeCheckIn),"dd/MM/yyyy")}get timeCheckIn(){return(0,M.Z)(new Date(this.dateTimeCheckIn),"hh:mm a")}get tenKhach_KiTuDau(){return k.Z.getFirstLetter(this.tenKhachHang)}}var z=i(2447),A=i(26417),F=i(88706),G=i(48119),B=i(61566),R=i(36073),Q=(i(1578),i(67361)),_=i(2878),Y=i(48041),q=i(46417);function U(n){let{firstChar:e}=n;return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(r.Z,{style:{minWidth:"40px",height:"40px",display:"flex",position:"relative",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:"var(--color-bg)",color:"var(--color-main)"},children:(null===e||void 0===e?void 0:e.length)>2?e.substring(0,2):e})})}const X=n=>{let{handleChoseCus:e}=n;const i=(0,h.useRef)(!0),t=(0,Q.Z)(),[a,o]=(0,h.useState)(!1),[l,u]=(0,h.useState)({}),[g,p]=(0,h.useState)([]),[x,m]=(0,h.useState)({keyword:"",maxResultCount:10,skipCount:0}),v=async n=>{const e=await Y.Z.GetKhachHang_noBooking(n);p(e)},C=(0,h.useRef)((0,F.Z)((async n=>{await v(n)}),500)).current;(0,h.useEffect)((()=>{i.current?i.current=!1:C(x)}),[x.keyword]),(0,h.useEffect)((()=>{i.current?i.current=!1:v(x)}),[x.skipCount]);const T=n=>{o(!1),e(n,0)};return(0,q.jsxs)(r.Z,{children:[(0,q.jsx)(_.Z,{visible:a,onCancel:()=>o(!1),onOk:T,title:"Th\xeam m\u1edbi kh\xe1ch h\xe0ng",formRef:l}),(0,q.jsxs)(s.ZP,{container:!0,rowGap:2,children:[(0,q.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,q.jsx)(j.Z,{size:"small",fullWidth:!0,sx:{maxWidth:"375px"},placeholder:"T\xecm ki\u1ebfm",value:x.keyword,onChange:n=>m({...x,keyword:n.target.value}),InputProps:{startAdornment:(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(w.Z,{position:"start",children:(0,q.jsx)(B.r,{})})})}})}),(0,q.jsx)(s.ZP,{item:!0,xs:12,sm:6,sx:{display:"flex",alignItems:"center"},children:(0,q.jsx)(c.Z,{variant:"contained",sx:{bgcolor:"var(--color-main)",marginLeft:t>600?"auto":"0",height:"fit-content"},startIcon:(0,q.jsx)(R.r,{}),className:"btn-container-hover",onClick:()=>{o(!0),u({id:d.i.EMPTY,maKhachHang:"",tenKhachHang:"",soDienThoai:"",diaChi:"",idNhomKhach:"",idNguonKhach:"",gioiTinh:!1,moTa:""})},children:"Th\xeam kh\xe1ch h\xe0ng m\u1edbi"})})]}),(0,q.jsx)(s.ZP,{container:!0,spacing:2,mt:"0",children:null===g||void 0===g?void 0:g.map(((n,e)=>{var i;return(0,q.jsx)(s.ZP,{item:!0,sm:6,md:4,xs:12,children:(0,q.jsxs)(b.Z,{onClick:()=>T(n),justifyContent:"space-between",height:"100%",spacing:1,sx:{padding:"18px",border:"1px solid #E6E1E6",borderRadius:"8px",boxShadow:"0px 7px 20px 0px #28293D14",transition:".4s",cursor:"pointer","&:hover":{borderColor:"var(--color-main)"}},children:[(0,q.jsxs)(b.Z,{spacing:2,direction:"row",children:[k.Z.checkNull(n.avatar)?(0,q.jsx)(U,{firstChar:k.Z.getFirstLetter(null!==(i=null===n||void 0===n?void 0:n.tenKhachHang)&&void 0!==i?i:"")}):(0,q.jsx)(G.Z,{src:n.avatar,sx:{width:40,height:40}}),(0,q.jsxs)(b.Z,{justifyContent:"space-evenly",maxWidth:"calc(100% - 44px)",children:[(0,q.jsx)(y.Z,{variant:"subtitle2",className:"lableOverflow",title:n.tenKhachHang,children:n.tenKhachHang}),(0,q.jsx)(y.Z,{variant:"caption",color:"#999699",children:n.soDienThoai})]})]}),(0,q.jsxs)(b.Z,{direction:"row",spacing:2,children:[(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(y.Z,{variant:"body2",children:"Checkin"}),(0,q.jsx)(y.Z,{variant:"body2",mt:"2px",children:"G\u1ea7n nh\u1ea5t"})]}),(0,q.jsxs)(b.Z,{children:[(0,q.jsxs)(y.Z,{variant:"body2",fontWeight:700,children:[n.soLanCheckIn," l\u1ea7n"]}),(0,q.jsx)(y.Z,{variant:"body2",mt:"2px",children:(0,M.Z)(new Date(n.cuocHenGanNhat),"dd/MM/yyyy HH:mm")})]})]})]})},e)}))})]})};var J=i(94650),$=i(36896),nn=i(5006),en=i(96933);class tn extends en.OT{constructor(n){let{currentPage:e=0,pageSize:i=10,textSearch:t="",trangThaiBook:a=3}=n;super({currentPage:e,pageSize:i,textSearch:t}),this.trangThaiBook=3,this.trangThaiBook=a}}var an=i(59837),on=i(89469),hn=i(68507);const sn=(0,h.createContext)([]),rn=n=>{var e;let{handleChoseCusBooking:i}=n;const t=(0,h.useContext)(z.Il).chinhanhCurrent,[a,o]=(null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e||hn.Z.get("IdChiNhanh"),(0,h.useContext)(sn),(0,h.useState)(!1)),[l,d]=(0,h.useState)([]),[u,g]=(0,h.useState)([]),[p,x]=(0,h.useState)(new tn({currentPage:0,trangThaiBook:3})),[m,v]=(0,h.useState)([]),C=async n=>{const e=await nn.Z.GetKhachHang_Booking(n);v(e)};(0,h.useEffect)((()=>{C(p),(async()=>{const n=await an.Z.SuggestKhachHang();await on.default.getSuggestKhachHang(),d(n)})(),(async()=>{const n=await an.Z.SuggestDichVu();await on.default.getSuggestDichVu(),g(n)})(),(async()=>{await on.default.getSuggestKyThuatVien()})()}),[]);const T=(0,h.useRef)((0,F.Z)((async n=>{await C(n)}),500)).current;(0,h.useEffect)((()=>{T(p)}),[p.textSearch]),(0,h.useEffect)((()=>{C(p)}),[p.trangThaiBook]);const f=(0,Q.Z)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)($.Z,{visible:a,onCancel:()=>{o(!1)},onOk:async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o(!1);const e=await nn.Z.GetInforBooking_byID(n);null!=e&&e.length>0&&v([e[0],...m])},idLichHen:""}),(0,q.jsxs)(s.ZP,{container:!0,rowSpacing:2,children:[(0,q.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,q.jsx)(j.Z,{size:"small",fullWidth:!0,sx:{maxWidth:"375px"},placeholder:"T\xecm ki\u1ebfm",value:p.textSearch,onChange:n=>x({...p,textSearch:n.target.value}),InputProps:{startAdornment:(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(w.Z,{position:"start",children:(0,q.jsx)(B.r,{})})})}})}),(0,q.jsx)(s.ZP,{item:!0,xs:12,sm:6,sx:{display:"flex",alignItems:"center"},children:(0,q.jsx)(c.Z,{variant:"contained",sx:{bgcolor:"var(--color-main)",marginLeft:f>600?"auto":"0",height:"fit-content"},startIcon:(0,q.jsx)(R.r,{}),className:"btn-container-hover",onClick:()=>{o(!0)},children:"Th\xeam cu\u1ed9c h\u1eb9n m\u1edbi"})})]}),(0,q.jsx)(r.Z,{sx:{display:"flex",gap:"24px",marginY:"16px"},children:[{id:3,text:"T\u1ea5t c\u1ea3"},{id:1,text:"Ch\u01b0a x\xe1c nh\u1eadn"},{id:2,text:"\u0110\xe3 x\xe1c nh\u1eadn"}].map(((n,e)=>(0,q.jsx)(c.Z,{onClick:()=>x({...p,trangThaiBook:n.id}),variant:"outlined",sx:{padding:"4px 8px",borderRadius:"100px",transition:".4s",minWidth:"unset",color:"var(--font-color-main)",fontSize:"12px",border:"1px solid ".concat(p.trangThaiBook===n.id?"transparent":"#E6E1E6","!important"),bgcolor:p.trangThaiBook===n.id?"var(--color-bg)!important":"#fff!important"},children:n.text},e)))}),(0,q.jsx)(s.ZP,{container:!0,spacing:2,children:m.map(((n,e)=>{var t;return(0,q.jsx)(s.ZP,{item:!0,sm:6,md:4,xs:12,children:(0,q.jsxs)(b.Z,{spacing:1,sx:{padding:"16px",border:"1px solid #E6E1E6",borderRadius:"8px",boxShadow:"0px 7px 20px 0px #28293D14",transition:".4s",cursor:"pointer","&:hover":{borderColor:"var(--color-main)"},"& p":{mb:"0"},height:"100%",justifyContent:"space-between"},onClick:()=>(async n=>{const e={...n};i(e,1)})(n),children:[(0,q.jsx)(r.Z,{sx:{display:"flex"},children:(0,q.jsxs)(b.Z,{spacing:2,direction:"row",sx:{width:"100%"},title:n.tenKhachHang,children:[k.Z.checkNull(n.avatar)?(0,q.jsx)(U,{firstChar:k.Z.getFirstLetter(null!==(t=null===n||void 0===n?void 0:n.tenKhachHang)&&void 0!==t?t:"")}):(0,q.jsx)("img",{src:n.avatar,style:{width:40,height:40,borderRadius:"100%"}}),(0,q.jsxs)(b.Z,{sx:{width:"calc(100% - 40px)"},justifyContent:"space-evenly",children:[(0,q.jsx)(y.Z,{variant:"subtitle2",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:n.tenKhachHang}),(0,q.jsx)(y.Z,{fontSize:"12px",color:"#999699",children:n.soDienThoai})]})]})}),(0,q.jsx)(b.Z,{paddingTop:"4px",children:n.details.map(((n,e)=>(0,q.jsxs)(b.Z,{direction:"row",mt:"2px",sx:{justifyContent:"space-between"},children:[(0,q.jsx)(y.Z,{maxWidth:"70%",title:n.tenHangHoa,variant:"body2",className:"lableOverflow",children:n.tenHangHoa}),(0,q.jsx)(y.Z,{variant:"body2",fontWeight:600,children:new Intl.NumberFormat("vi-VN").format(n.giaBan)})]},e)))}),(0,q.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,q.jsxs)(b.Z,{direction:"row",sx:{display:"flex",alignItems:"center",fontSize:"14px",color:"#666466"},children:[(0,q.jsx)(r.Z,{marginRight:"4px",children:(0,q.jsx)(J.r,{})}),(0,q.jsx)(y.Z,{variant:"caption",children:(0,M.Z)(new Date(n.startTime),"HH:mm")})," ","-"," ",(0,q.jsx)(y.Z,{variant:"caption",children:(0,M.Z)(new Date(n.endTime),"HH:mm")})]}),(0,q.jsx)(r.Z,{sx:{fontSize:"12px",padding:"4px 12px",borderRadius:"8px",color:2==n.trangThai?"var(--color-main)":"#75753a",bgcolor:2==n.trangThai?"var(--color-bg)":"#ededc8"},children:n.txtTrangThaiBook})]})]})},e)}))})]})};var ln=i(93857),cn=i(68186),dn=i(52609);class un extends dn.ZP{constructor(){super("DBTest"),this.hoaDon=void 0,this.khachCheckIn=void 0,this.version(1).stores({hoaDon:"&id, idKhachHang",khachCheckIn:"&idCheckIn, idKhachHang"}),this.version(2).stores({hoaDon:"&id, idKhachHang, idChiNhanh"}).upgrade((n=>{var e;const i=null!==(e=(0,h.useContext)(z.Il).chinhanhCurrent.id)&&void 0!==e?e:hn.Z.get("IdChiNhanh");return console.log("dexie ",i),n.table("hoaDon").filter((n=>k.Z.checkNull(n.idChiNhanh))).modify((n=>n.idChiNhanh=i))})),this.version(3).stores({hoaDon:"&id, idKhachHang, idChiNhanh, idCheckIn"}).upgrade((n=>n.table("hoaDon").filter((n=>k.Z.checkNull(n.idCheckIn))).modify((async e=>{const i=await n.table("khachCheckIn").where("idKhachHang").equals(e.idKhachHang).toArray();i.length>0?e.idCheckIn=i[0].idCheckIn:n.table("hoaDon").delete(e.id)})))),this.version(4).stores({khachCheckIn:null})}}const gn=new un;var pn=i(9820),xn=i(44008);function mn(n){var e;let{trigger:i,handleSave:t}=n;const a=(0,h.useContext)(z.Il).chinhanhCurrent,o=null!==(e=null===a||void 0===a?void 0:a.id)&&void 0!==e?e:hn.Z.get("IdChiNhanh"),[s,l]=(0,h.useState)(!1),[u,g]=(0,h.useState)(!1),[p,x]=(0,h.useState)(!1),[m,v]=(0,h.useState)(!1),[C,T]=(0,h.useState)(new ln.tf({show:!1})),[f,H]=(0,h.useState)({id:d.i.EMPTY,maKhachHang:"",tenKhachHang:"",idLoaiKhach:1,soDienThoai:"",diaChi:"",gioiTinh:!1,idNguonKhach:"",idNhomKhach:""});(0,h.useEffect)((()=>{i.isShow&&(l(!0),H({id:d.i.EMPTY,maKhachHang:"",tenKhachHang:"",idLoaiKhach:1,soDienThoai:"",diaChi:"",gioiTinh:!1,idNguonKhach:"",idNhomKhach:""})),g(!1)}),[i]);const Z=async function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(1===e)n.id=n.idKhachHang;else{if(!await(async n=>!await L.CheckExistCusCheckin(n)||(v(!0),T({...C,show:!0,mes:"Kh\xe1ch h\xe0ng \u0111\xe3 check in"}),!1))(n.id))return}l(!1),H((e=>({...e,id:n.id,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,soDienThoai:n.soDienThoai})));const i=new W({idKhachHang:n.id,idChiNhanh:o}),a=await L.InsertCustomerCheckIn(i),h=new O({idCheckIn:a.id,idKhachHang:i.idKhachHang,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,soDienThoai:n.soDienThoai,tongTichDiem:n.tongTichDiem,dateTimeCheckIn:a.dateTimeCheckIn,txtTrangThaiCheckIn:a.txtTrangThaiCheckIn});await L.InsertCheckInHoaDon({idCheckIn:a.id,idBooking:null===n||void 0===n?void 0:n.idBooking}),1===e&&await j(n,a.id),t(h,e)},j=async(n,e)=>{const i=[];let t=0;for(let o=0;o<n.details.length;o++){const e=n.details[o],a=new pn.Z({idDonViQuyDoi:e.idDonViQuyDoi,maHangHoa:e.maHangHoa,tenHangHoa:e.tenHangHoa,giaBan:e.giaBan,idNhomHangHoa:e.idNhomHangHoa,idHangHoa:e.idHangHoa,soLuong:1});i.push(a),t+=e.giaBan}const a=new xn.Z({idChiNhanh:o,idKhachHang:n.idKhachHang,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,soDienThoai:n.soDienThoai,tongTienHang:t});a.idCheckIn=e,a.tongTienHangChuaChietKhau=t,a.tongTienHDSauVAT=t,a.tongThanhToan=t,a.hoaDonChiTiet=i,await gn.hoaDon.add(a)},[w,y]=(0,h.useState)(1),k=n=>{y(n)};return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(S.Z,{open:s,onClose:()=>l(!1),fullWidth:!0,maxWidth:"md",sx:{"& .MuiDialog-paperScrollPaper":{overflowX:"hidden"}},children:[(0,q.jsx)(cn.Z,{showAlert:C.show,type:C.type,title:C.mes,handleClose:()=>T({show:!1,mes:"",type:1})}),(0,q.jsxs)(N.Z,{sx:{display:"flex",position:"sticky",top:"0",left:"0",bgcolor:"#fff",zIndex:"5",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,q.jsx)(r.Z,{fontWeight:"700!important",fontSize:"24px",children:"Th\xeam checkin"}),(0,q.jsx)(I.Z,{onClick:()=>l(!1),sx:{"&:hover svg":{filter:"brightness(0) saturate(100%) invert(34%) sepia(44%) saturate(2405%) hue-rotate(316deg) brightness(98%) contrast(92%)"}},children:(0,q.jsx)(A.r,{})})]}),(0,q.jsxs)(P.Z,{sx:{overflow:"visible"},children:[(0,q.jsxs)(b.Z,{direction:"row",gap:"32px",sx:{"& button":{minWidth:"unset",padding:"0",transition:".4s"}},children:[(0,q.jsx)(c.Z,{sx:{color:1===w?"var(--color-main)":"#999699","&::after":{content:'""',position:"absolute",bottom:"-5px",transition:".4s",left:1===w?"0":"calc(100% + 32px)",width:1===w?"100%":"77.2px",borderTop:"2px solid var(--color-main)"}},variant:"text",onClick:()=>k(1),children:"Cu\u1ed9c h\u1eb9n"}),(0,q.jsx)(c.Z,{sx:{color:2===w?"var(--color-main)":"#999699"},variant:"text",onClick:()=>k(2),children:"Kh\xe1ch h\xe0ng"})]}),(0,q.jsx)(r.Z,{sx:{marginTop:"20px"},children:1===w?(0,q.jsx)(rn,{handleChoseCusBooking:Z}):(0,q.jsx)(X,{handleChoseCus:Z})})]}),(0,q.jsx)(V.Z,{sx:{display:"none",position:"sticky",left:"0",bottom:"0",zIndex:"5",bgcolor:"#fff"},children:(0,q.jsxs)(b.Z,{direction:"row",spacing:1,paddingTop:2,justifyContent:"flex-end",children:[(0,q.jsx)(c.Z,{variant:"contained",className:" btn-container-hover",sx:{width:"70px"},onClick:Z,children:"L\u01b0u"}),(0,q.jsx)(c.Z,{variant:"outlined",className:" btn-outline-hover",sx:{width:"70px",bgcolor:"#fff",borderColor:"#E6E1E6",color:"#666466"},onClick:()=>l(!1),children:"H\u1ee7y"})]})})]})})}var vn=i(11198),Cn=i(88670),Tn=i(87068),fn=i(45682);function Hn(n){let{hanleChoseCustomer:e}=n;const[i,t]=(0,h.useState)(""),[a,o]=(0,h.useState)([]),[l,d]=(0,h.useState)(""),[u,g]=(0,h.useState)({show:!1,title:"",type:1,mes:""}),[p,x]=(0,h.useState)(new ln.FM({isShow:!1})),[m,v]=(0,h.useState)([]),C=()=>{(async()=>{const n={keyword:"",SkipCount:0,MaxResultCount:50,idChiNhanh:hn.Z.get("IdChiNhanh")},e=await L.GetListCustomerChecking(n);o([...e])})(),(async()=>{const n=await fn.Z.getAll({skipCount:0,maxResultCount:100});v([...n.items])})()};(0,h.useEffect)((()=>{C()}),[]);const T=(()=>{if(k.Z.checkNull(i))return a;{const n=i.trim().toLowerCase(),e=k.Z.strToEnglish(n);return a.filter((i=>null!==i.maKhachHang&&i.maKhachHang.trim().toLowerCase().indexOf(n)>-1||null!==i.tenKhachHang&&i.tenKhachHang.trim().toLowerCase().indexOf(n)>-1||null!==i.soDienThoai&&i.soDienThoai.trim().toLowerCase().indexOf(n)>-1||null!==i.maKhachHang&&k.Z.strToEnglish(i.maKhachHang).indexOf(e)>-1||null!==i.tenKhachHang&&k.Z.strToEnglish(i.tenKhachHang).indexOf(e)>-1||null!==i.soDienThoai&&k.Z.strToEnglish(i.soDienThoai).indexOf(e)>-1))}})();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(sn.Provider,{value:m,children:(0,q.jsx)(mn,{trigger:p,handleSave:async n=>{const e=new O({idKhachHang:n.idKhachHang,idCheckIn:n.idCheckIn,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,soDienThoai:n.soDienThoai,tongTichDiem:n.tongTichDiem,dateTimeCheckIn:n.dateTimeCheckIn});o([...a,e])}})}),(0,q.jsx)(Tn.Z,{isShow:u.show,title:u.title,mes:u.mes,onOk:async()=>{o(a.filter((n=>n.idCheckIn!==l))),await L.UpdateTrangThaiCheckin(l,0),g(new ln.tf({show:!1,title:"",mes:""}));const n=await gn.hoaDon.where("idCheckIn").equals(l).toArray();n.length>0&&await gn.hoaDon.delete(n[0].id)},onCancel:()=>g({...u,show:!1})}),(0,q.jsxs)(s.ZP,{item:!0,xs:12,sm:6,md:8,lg:8,xl:8,children:[(0,q.jsx)(r.Z,{sx:{position:"absolute",height:"100vh",width:"100vw",left:"0",top:"0",pointerEvents:"none",bgcolor:"#f8f8f8",zIndex:"-5"}}),(0,q.jsx)(s.ZP,{container:!0,children:(0,q.jsx)(s.ZP,{item:!0,xs:12,children:(0,q.jsxs)(b.Z,{flexWrap:"wrap",useFlexGap:!0,justifyContent:{md:"flex-end",lg:"flex-end",sm:"flex-start",xs:"flex-start"},spacing:{xs:2,sm:2,md:1,lg:1},direction:"row",display:"flex",alignItems:"center",children:[(0,q.jsx)(j.Z,{sx:{backgroundColor:"#fff",borderColor:"#CDC9CD!important",borderWidth:"1px!important",maxWidth:"300px"},size:"small",variant:"outlined",type:"search",placeholder:"T\xecm ki\u1ebfm",fullWidth:!0,InputProps:{startAdornment:(0,q.jsx)(w.Z,{position:"start",children:(0,q.jsx)(B.r,{})})},onChange:n=>{t(n.target.value)}}),(0,q.jsx)(Cn.Z,{sx:{width:38,height:36.5,borderRadius:"4px",border:"1px solid #cccc",padding:"6px",display:"none"}}),(0,q.jsx)(c.Z,{className:" btn-container-hover",variant:"contained",sx:{backgroundColor:"var(--color-main)!important"},startIcon:(0,q.jsx)(K.Z,{}),onClick:()=>x({...p,isShow:!0}),children:"Th\xeam kh\xe1ch"})]})})})]}),(0,q.jsx)(s.ZP,{container:!0,paddingLeft:2,paddingTop:2,columnSpacing:2,rowSpacing:2,children:T.map(((n,i)=>{var t;return(0,q.jsxs)(s.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,sx:{position:"relative"},children:[(0,q.jsx)(c.Z,{sx:{position:"absolute",top:"16px",right:0,minWidth:"unset",borderRadius:"50%!important"},children:(0,q.jsx)(vn.Z,{sx:{color:"#333233"},onClick:()=>{d(n.idCheckIn),g(new ln.tf({show:!0,title:"X\xe1c nh\u1eadn x\xf3a",mes:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y b\u1ecf kh\xe1ch  ".concat(null===n||void 0===n?void 0:n.tenKhachHang,"  \u0111ang check in kh\xf4ng?")}))}})}),(0,q.jsxs)(b.Z,{padding:3,direction:"column",justifyContent:"space-between",sx:{boxShadow:"0px 7px 20px 0px #28293D14",backgroundColor:"#fff",borderRadius:"8px",height:"100%",border:"1px solid transparent",transition:".4s",cursor:"pointer","&:hover":{borderColor:"var(--color-main)"}},onClick:()=>{(async n=>{e(n)})(n)},children:[(0,q.jsxs)(b.Z,{direction:"row",spacing:2,children:[k.Z.checkNull(null===n||void 0===n?void 0:n.avatar)?(0,q.jsx)(U,{firstChar:k.Z.getFirstLetter(null!==(t=null===n||void 0===n?void 0:n.tenKhachHang)&&void 0!==t?t:"")}):(0,q.jsx)("img",{src:n.avatar,style:{width:40,height:40,borderRadius:"100%"}}),(0,q.jsxs)("div",{children:[(0,q.jsx)(y.Z,{variant:"subtitle2",title:n.tenKhachHang,children:n.tenKhachHang}),(0,q.jsx)(y.Z,{color:"#999699",variant:"caption",children:n.soDienThoai})]})]}),(0,q.jsxs)(b.Z,{spacing:1,children:[(0,q.jsxs)(r.Z,{display:"flex",gap:"8px",marginTop:"8px",children:[(0,q.jsx)(y.Z,{variant:"body2",color:"#3D475C",children:"\u0110i\u1ec3m t\xedch l\u0169y:"}),(0,q.jsx)(y.Z,{variant:"body2",fontWeight:"700",children:n.tongTichDiem})]}),(0,q.jsxs)(s.ZP,{container:!0,children:[(0,q.jsx)(s.ZP,{item:!0,xs:7,sm:7,md:7,children:(0,q.jsxs)(b.Z,{spacing:1,direction:"row",color:"#3D475C",children:[(0,q.jsx)(y.Z,{variant:"body2",children:n.dateCheckIn}),(0,q.jsxs)(y.Z,{display:"flex",alignItems:"center",variant:"body2",children:[(0,q.jsx)(D.Z,{style:{fontSize:"12px",marginRight:"5px"}}),n.timeCheckIn]})]})}),(0,q.jsx)(s.ZP,{item:!0,xs:5,sm:5,md:5,children:(0,q.jsx)(r.Z,{component:"span",sx:{padding:"4px 12px ",borderRadius:"20px",backgroundColor:"#FFF8DD",color:"#FFC700",fontSize:"12px",float:"right"},children:n.txtTrangThaiCheckIn})})]})]})]})]},i)}))})]})}var Zn=i(48310),bn=i(67216),jn=i(83213),wn=i(74748),yn=i(54299),kn=i(83929),Kn=i(74268);const Dn=i.p+"static/media/closeSmall.bb613a7bd2f9bae13160fe3efbbada1f.svg";var Sn=i(8586),Nn=i(86618),In=i(32210),Pn=i(25742),Vn=i(27075),En=i(71294),Ln=i(82739),Mn=i(12731),Wn=i(95104),On=i(16450),zn=i(35045);class An{constructor(){this.id=void 0,this.maNhanVien=void 0,this.ho=void 0,this.tenLot=void 0,this.tenNhanVien=void 0,this.diaChi=void 0,this.soDienThoai=void 0,this.cccd=void 0,this.ngaySinh=void 0,this.kieuNgaySinh=void 0,this.gioiTinh=void 0,this.ngayCap=void 0,this.noiCap=void 0,this.avatar=void 0,this.idChucVu=void 0,this.ghiChu=void 0}}class Fn extends An{constructor(n){let{idHoaDon:e=null,idHoaDonChiTiet:i=null,idNhanVien:t="",ptChietKhau:a=0,tienChietKhau:o=0,heSo:h=1,chiaDeuChietKhau:s=!1,tinhHoaHongTruocCK:r=!1,loaiChietKhau:l=1,chietKhauMacDinh:c=0,maNhanVien:d="",tenNhanVien:u="",soDienThoai:g="",gioiTinh:p=1,avatar:x=""}=n;super(),this.idHoaDon=null,this.idHoaDonChiTiet=null,this.idNhanVien="",this.ptChietKhau=0,this.tienChietKhau=0,this.heSo=1,this.chiaDeuChietKhau=!1,this.tinhHoaHongTruocCK=!1,this.loaiChietKhau=1,this.chietKhauMacDinh=0,this.idHoaDon=e,this.idHoaDonChiTiet=i,this.idNhanVien=t,this.ptChietKhau=a,this.tienChietKhau=o,this.heSo=h,this.chiaDeuChietKhau=s,this.tinhHoaHongTruocCK=r,this.loaiChietKhau=l,this.chietKhauMacDinh=c,this.maNhanVien=d,this.tenNhanVien=u,this.soDienThoai=g,this.gioiTinh=p,this.avatar=x}}const Gn=new class{constructor(){this.GetHoaHongNV_theoDichVu=async(n,e)=>(await E.Z.get("api/services/app/ChietKhauDichVu/GetHoaHongNV_theoDichVu?idNhanVien=".concat(n,"&idDonViQuyDoi=").concat(e))).data.result,this.GetAllHoaHong_theoNhanVien=async n=>(await E.Z.get("api/services/app/ChietKhauDichVu/GetAllHoaHong_theoNhanVien?idNhanVien=".concat(n))).data.result,this.GetAllHoaHong_theoDichVu=async n=>(await E.Z.get("api/services/app/ChietKhauDichVu/GetAllHoaHong_theoDichVu?idNhanVien=".concat(n))).data.result}};var Bn=i(48127);const Rn=n=>{let{triggerModal:e,handleSave:i}=n;const[t,a]=(0,h.useState)(!1),[o,l]=(0,h.useState)(""),[d,u]=(0,h.useState)([]),[g,p]=(0,h.useState)([]),[x,m]=(0,h.useState)([]);(0,h.useEffect)((()=>{e.isShow&&(a(!0),e.isNew?m([...e.item.nhanVienThucHien]):v())}),[e]);const v=()=>null;h.useEffect((()=>{(async()=>{const n=[...(await fn.Z.getAll({filter:o,skipCount:0,maxResultCount:100})).items];n.map((n=>{n.isChosed=!1})),p([...n]),u([...n])})()}),[]);h.useEffect((()=>{(()=>{if(k.Z.checkNull(o))u([...g]);else{const n=o.trim().toLowerCase(),e=k.Z.strToEnglish(n),i=g.filter((i=>null!==i.maNhanVien&&i.maNhanVien.trim().toLowerCase().indexOf(n)>-1||null!==i.tenNhanVien&&i.tenNhanVien.trim().toLowerCase().indexOf(n)>-1||null!==i.soDienThoai&&i.soDienThoai.trim().toLowerCase().indexOf(n)>-1||null!==i.maNhanVien&&k.Z.strToEnglish(i.maNhanVien).indexOf(e)>-1||null!==i.tenNhanVien&&k.Z.strToEnglish(i.tenNhanVien).indexOf(e)>-1||null!==i.soDienThoai&&k.Z.strToEnglish(i.soDienThoai).indexOf(e)>-1));u(i)}})()}),[o]);(0,h.useEffect)((()=>{(()=>{const n=x.map((n=>n.idNhanVien));u(d.map((e=>n.includes(e.id)?{...e,isChosed:!0}:{...e,isChosed:!1})))})()}),[x]);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(S.Z,{open:t,onClose:()=>{a(!1)},fullWidth:!0,maxWidth:"md",children:[(0,q.jsxs)(N.Z,{children:[(0,q.jsx)(y.Z,{className:"modal-title",children:"Ch\u1ecdn k\u1ef9 thu\u1eadt vi\xean"}),(0,q.jsx)(Bn.Z,{onClose:()=>a(!1)})]}),(0,q.jsxs)(P.Z,{children:[(0,q.jsx)(j.Z,{size:"small",sx:{width:"375px"},type:"search",placeholder:"T\xecm ki\u1ebfm",value:o,onChange:n=>{l(n.target.value)},InputProps:{startAdornment:(0,q.jsx)(zn.Z,{})}}),(0,q.jsx)(y.Z,{variant:"subtitle1",fontWeight:"700",color:"#999699",marginTop:"20px",marginBottom:"8px",children:"Danh s\xe1ch k\u1ef9 thu\u1eadt vi\xean"}),(0,q.jsx)(s.ZP,{container:!0,className:"list-persons",spacing:2,children:null===d||void 0===d?void 0:d.map(((n,i)=>{var t;return(0,q.jsx)(s.ZP,{className:"person-item",item:!0,xs:12,md:4,lg:4,onClick:()=>(async n=>{const i=await Gn.GetHoaHongNV_theoDichVu(n.id,e.item.idDonViQuyDoi),t=new Fn({idNhanVien:n.id,maNhanVien:n.maNhanVien,tenNhanVien:n.tenNhanVien,soDienThoai:n.soDienThoai,gioiTinh:n.gioiTinh,avatar:n.avatar});i.length>0&&(t.ptChietKhau=i[0].laPhanTram?i[0].giaTri:0,t.chietKhauMacDinh=i[0].giaTri,t.ptChietKhau>0?t.tienChietKhau=t.ptChietKhau*e.item.thanhTienSauCK/100:t.tienChietKhau=i[0].giaTri*e.item.soLuong),x.filter((n=>n.idNhanVien===t.idNhanVien)).length>0?m(x.filter((n=>n.idNhanVien!==t.idNhanVien))):m([t,...x])})(n),children:(0,q.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",gap:"8px",position:"relative",padding:"20px 12px",borderRadius:"8px",transition:".4s",cursor:"pointer",border:"1px solid #CDC9CD",borderColor:n.isChosed?"var(--color-main)":"","&:hover":{borderColor:"var(--color-main)"},"& .Check-icon":{position:"absolute",right:"-10px",height:"20px",borderRadius:"50%",top:"-5px",zIndex:"2",transition:".4s",opacity:n.isChosed?"1":"0"}},children:[(0,q.jsx)(r.Z,{bgcolor:"#fff",className:"Check-icon",sx:{"& svg":{verticalAlign:"unset"}},children:(0,q.jsx)(On.Z,{sx:{color:"var(--color-main)"}})}),(0,q.jsx)("div",{className:"person-avatar",children:k.Z.checkNull(null===n||void 0===n?void 0:n.avatar)?(0,q.jsx)(U,{firstChar:k.Z.getFirstLetter(null!==(t=null===n||void 0===n?void 0:n.tenNhanVien)&&void 0!==t?t:"")}):(0,q.jsx)(G.Z,{sx:{width:40,height:40},src:null===n||void 0===n?void 0:n.avatar})}),(0,q.jsxs)(b.Z,{maxWidth:"calc(100% - 50px)",children:[(0,q.jsx)(y.Z,{title:n.tenNhanVien,variant:"subtitle2",className:"lableOverflow",children:n.tenNhanVien}),(0,q.jsx)(y.Z,{variant:"caption",className:"person-position",color:"#333233",children:n.tenChucVu})]})]})},i)}))}),(0,q.jsxs)(b.Z,{direction:"row",spacing:1,sx:{background:"#fff",justifyContent:"center",position:"sticky",bottom:"0",left:"0",paddingTop:"30px"},children:[(0,q.jsx)(c.Z,{variant:"outlined",sx:{borderColor:"#e6e1e6",textTransform:"capitalize"},className:" btn-outline-hover",onClick:()=>a(!1),children:"H\u1ee7y"}),(0,q.jsx)(c.Z,{variant:"contained",className:"btn-container-hover",sx:{background:"#7c3367",textTransform:"capitalize",color:"#fff"},onClick:()=>{a(!1),i(x)},children:"L\u01b0u"})]})]})]})})};var Qn,_n,Yn=i(21132);function qn(){return qn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},qn.apply(this,arguments)}function Un(n,e){let{title:i,titleId:t,...a}=n;return h.createElement("svg",qn({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":t},a),i?h.createElement("title",{id:t},i):null,Qn||(Qn=h.createElement("g",{clipPath:"url(#clip0_3623_5497)"},h.createElement("rect",{width:24,height:24,fill:"white",fillOpacity:.01}),h.createElement("path",{d:"M19.83 8.70005L15.3 4.17005C14.35 3.22005 13.04 2.71005 11.7 2.78005L6.69998 3.02005C4.69998 3.11005 3.10998 4.70005 3.00998 6.69005L2.76998 11.69C2.70998 13.03 3.20998 14.34 4.15998 15.29L8.68997 19.82C10.55 21.68 13.57 21.68 15.44 19.82L19.83 15.43C21.7 13.58 21.7 10.56 19.83 8.70005ZM9.49998 12.38C7.90998 12.38 6.61998 11.09 6.61998 9.50005C6.61998 7.91005 7.90998 6.62005 9.49998 6.62005C11.09 6.62005 12.38 7.91005 12.38 9.50005C12.38 11.09 11.09 12.38 9.49998 12.38Z",fill:"#F1FAFF"}))),_n||(_n=h.createElement("defs",null,h.createElement("clipPath",{id:"clip0_3623_5497"},h.createElement("rect",{width:24,height:24,fill:"white"})))))}const Xn=h.forwardRef(Un);i.p;var Jn,$n,ne,ee,ie;function te(){return te=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},te.apply(this,arguments)}function ae(n,e){let{title:i,titleId:t,...a}=n;return h.createElement("svg",te({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":t},a),i?h.createElement("title",{id:t},i):null,Jn||(Jn=h.createElement("path",{d:"M17.5 4.98356C14.725 4.70856 11.9333 4.56689 9.15 4.56689C7.5 4.56689 5.85 4.65023 4.2 4.81689L2.5 4.98356",stroke:"#999699",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),$n||($n=h.createElement("path",{d:"M7.08301 4.1415L7.26634 3.04984C7.39967 2.25817 7.49967 1.6665 8.90801 1.6665H11.0913C12.4997 1.6665 12.608 2.2915 12.733 3.05817L12.9163 4.1415",stroke:"#999699",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),ne||(ne=h.createElement("path",{d:"M15.7087 7.6167L15.167 16.0084C15.0753 17.3167 15.0003 18.3334 12.6753 18.3334H7.32533C5.00033 18.3334 4.92533 17.3167 4.83366 16.0084L4.29199 7.6167",stroke:"#999699",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),ee||(ee=h.createElement("path",{d:"M8.6084 13.75H11.3834",stroke:"#999699",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),ie||(ie=h.createElement("path",{d:"M7.91699 10.4165H12.0837",stroke:"#999699",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const oe=h.forwardRef(ae);i.p;var he;function se(){return se=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},se.apply(this,arguments)}function re(n,e){let{title:i,titleId:t,...a}=n;return h.createElement("svg",se({width:18,height:14,viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":t},a),i?h.createElement("title",{id:t},i):null,he||(he=h.createElement("path",{d:"M16.7503 6.03346C17.0753 6.03346 17.3337 5.77513 17.3337 5.45013V4.67513C17.3337 1.25846 16.292 0.216797 12.8753 0.216797H5.12533C1.70866 0.216797 0.666992 1.25846 0.666992 4.67513V5.0668C0.666992 5.3918 0.925326 5.65013 1.25033 5.65013C2.00033 5.65013 2.60866 6.25846 2.60866 7.00846C2.60866 7.75846 2.00033 8.35846 1.25033 8.35846C0.925326 8.35846 0.666992 8.6168 0.666992 8.9418V9.33346C0.666992 12.7501 1.70866 13.7918 5.12533 13.7918H12.8753C16.292 13.7918 17.3337 12.7501 17.3337 9.33346C17.3337 9.00846 17.0753 8.75013 16.7503 8.75013C16.0003 8.75013 15.392 8.1418 15.392 7.3918C15.392 6.6418 16.0003 6.03346 16.7503 6.03346ZM6.50033 4.40013C6.95866 4.40013 7.33366 4.77513 7.33366 5.23346C7.33366 5.6918 6.96699 6.0668 6.50033 6.0668C6.04199 6.0668 5.66699 5.6918 5.66699 5.23346C5.66699 4.77513 6.03366 4.40013 6.50033 4.40013ZM11.5003 10.2335C11.0337 10.2335 10.6587 9.85846 10.6587 9.40013C10.6587 8.9418 11.0337 8.5668 11.492 8.5668C11.9503 8.5668 12.3253 8.9418 12.3253 9.40013C12.3253 9.85846 11.967 10.2335 11.5003 10.2335ZM12.2503 4.90013L6.64199 10.5085C6.51699 10.6335 6.35866 10.6918 6.20033 10.6918C6.04199 10.6918 5.88366 10.6335 5.75866 10.5085C5.51699 10.2668 5.51699 9.8668 5.75866 9.62513L11.367 4.0168C11.6087 3.77513 12.0087 3.77513 12.2503 4.0168C12.492 4.25846 12.492 4.65846 12.2503 4.90013Z",fill:"#B2AFB2"})))}const le=h.forwardRef(re);i.p;var ce=i(10237),de=i(22639),ue=i(69551),ge=i(62870),pe=i(12757),xe=i(70894),me=i(1102),ve=i(60701),Ce=i(13882),Te=i(69682);const fe=(0,ve.Pi)((n=>{var e;let{customerChosed:i,CoditionLayout:t,onPaymentChild:a,sendDataToParent:o}=n;const l=(0,h.useContext)(z.Il).chinhanhCurrent,[u,g]=(0,h.useState)(""),p=(0,h.useRef)(!0),x=(0,h.useRef)(!1),[m,v]=(0,h.useState)(!1),[C,T]=(0,h.useState)(!1),[f,H]=(0,h.useState)(""),[Z,D]=(0,h.useState)(0),[S,N]=(0,h.useState)([]),[I,P]=(0,h.useState)([]),[V,E]=(0,h.useState)(0),[M,A]=(0,h.useState)(0),[R,Q]=(0,h.useState)([]),[X,J]=(0,h.useState)(),$=k.Z.checkNull(null===l||void 0===l?void 0:l.id)?hn.Z.get("IdChiNhanh"):null===l||void 0===l?void 0:l.id,[nn,en]=(0,h.useState)(new xn.Z({idKhachHang:null,tenKhachHang:"Kh\xe1ch l\u1ebb",idChiNhanh:$})),[tn,an]=(0,h.useState)([]),[on,rn]=(0,h.useState)([new Wn.Z({hinhThucThanhToan:1})]),[dn,un]=(0,h.useState)(new pn.Z({id:"",expanded:!1})),[vn,Cn]=(0,h.useState)([]),[Tn,Hn]=(0,h.useState)(new ln.FM({isShow:!1})),[On,zn]=(0,h.useState)({show:!1,type:1,mes:""}),[An,Fn]=(0,h.useState)(new ln.FM({isShow:!1})),[Gn,Bn]=(0,h.useState)(!1),[Qn,_n]=(0,h.useState)(""),qn=S.filter((n=>!n.laNhomHangHoa)),Un=S.filter((n=>n.laNhomHangHoa)),Jn=async()=>{await(async()=>{const n=await Vn.Z.GetTreeNhomHangHoa();N(n.items)})(),await(async()=>{const n=await fn.Z.getAll({skipCount:0,maxResultCount:100});Cn([...n.items])})(),await(async()=>{const n=await pe.Z.GetAllMauIn_byChiNhanh();Q(n)})(),x.current=!0};(0,h.useEffect)((()=>{p.current&&(p.current=!1),Jn(),console.log("pagebanHang ")}),[]),(0,h.useEffect)((()=>{ie()}),[i.idCheckIn]);h.useEffect((()=>{p.current||(async()=>{const n={IdNhomHangHoas:f,TextSearch:"",IdLoaiHangHoa:Z,CurrentPage:0,PageSize:50},e=await Pn.Z.GetDMHangHoa_groupByNhom(n);P(e)})()}),[f,Z]);const $n=(0,h.useRef)((0,F.Z)((async n=>{const e=await Pn.Z.GetDMHangHoa_groupByNhom(n);P(e)}),500)).current;h.useEffect((()=>{if(!x.current)return;$n({IdNhomHangHoas:"",TextSearch:u,IdLoaiHangHoa:0,CurrentPage:0,PageSize:50})}),[u]);const ne=async n=>{H(n.id),D(0)},ee=n=>{g(""),H(""),D(n)},ie=async()=>{if(k.Z.checkNull(i.idKhachHang))en((n=>{var e;return{...n,idCheckIn:i.idCheckIn,idKhachHang:i.idKhachHang,maKhachHang:i.maKhachHang,tenKhachHang:null!==(e=i.tenKhachHang)&&void 0!==e?e:"Kh\xe1ch l\u1ebb",soDienThoai:i.soDienThoai,tongTichDiem:i.tongTichDiem}}));else{const t=await gn.hoaDon.where("idCheckIn").equals(null===i||void 0===i?void 0:i.idCheckIn).and((n=>n.idChiNhanh==$)).toArray();if(0===t.length){var n;const e={...nn,id:d.i.create().toString(),idChiNhanh:$,idCheckIn:i.idCheckIn,idKhachHang:i.idKhachHang,maKhachHang:i.maKhachHang,tenKhachHang:null!==(n=i.tenKhachHang)&&void 0!==n?n:"Kh\xe1ch l\u1ebb",soDienThoai:i.soDienThoai,tongTichDiem:i.tongTichDiem};await gn.hoaDon.add(e),en(e)}else{var e;const n=null!==(e=t[0].hoaDonChiTiet)&&void 0!==e?e:[];en(t[0]),an(n)}}Fn({...An,id:null===i||void 0===i?void 0:i.idCheckIn}),await te(i.idKhachHang)},te=async n=>{const e=await Y.Z.getKhachHang(n);J(e)},ae=async n=>{var e;const i=null!==(e=n.id)&&void 0!==e?e:d.i.create().toString();if((await gn.hoaDon.where("id").equals(i).toArray()).length>0){await gn.hoaDon.where("id").equals(i).delete()>0&&await gn.hoaDon.add(n)}};(0,h.useEffect)((()=>{x.current&&(async()=>{let n=0,e=0,i=0,t=0,a=0;for(let c=0;c<tn.length;c++){var o,h,s,r;const l=tn[c];n+=l.soLuong*l.donGiaTruocCK,t+=null!==(o=l.thanhTienSauCK)&&void 0!==o?o:0,e+=(null!==(h=l.tienChietKhau)&&void 0!==h?h:0)*l.soLuong,i+=(null!==(s=l.tienThue)&&void 0!==s?s:0)*l.soLuong,a+=null!==(r=l.thanhTienSauVAT)&&void 0!==r?r:0}const l={...nn,tongTienHangChuaChietKhau:n,tongChietKhauHangHoa:e,tongTienHang:t,tongTienThue:i,tongTienHDSauVAT:a,tongThanhToan:a,hoaDonChiTiet:tn};en((i=>({...i,tongTienHangChuaChietKhau:n,tongTienHang:t,tongChietKhauHangHoa:e,tongTienHDSauVAT:a,tongThanhToan:a,hoaDonChiTiet:tn}))),ae(l)})()}),[tn]);(0,h.useEffect)((()=>{x.current&&(se(),he())}),[dn]);const he=()=>{an(tn.map((n=>{var e;return n.id===dn.id?{...n,nhanVienThucHien:null===(e=n.nhanVienThucHien)||void 0===e?void 0:e.map((e=>{var i,t;return e.ptChietKhau>0?{...e,tienChietKhau:e.ptChietKhau*(null!==(i=n.thanhTienSauCK)&&void 0!==i?i:0)/100}:{...e,tienChietKhau:(null!==(t=e.chietKhauMacDinh)&&void 0!==t?t:0)*n.soLuong}}))}:n})))},se=()=>{an(tn.map((n=>{var e,i,t,a,o;return n.id===dn.id?{...n,tienChietKhau:(null!==(e=n.ptChietKhau)&&void 0!==e?e:0)>0?n.donGiaTruocCK*(null!==(i=n.ptChietKhau)&&void 0!==i?i:0)/100:n.tienChietKhau,tienThue:(null!==(t=n.ptThue)&&void 0!==t?t:0)>0?(null!==(a=n.donGiaSauCK)&&void 0!==a?a:0)*(null!==(o=n.ptThue)&&void 0!==o?o:0)/100:n.tienThue}:n})))},[re,ve]=(0,h.useState)(!1),[fe,He]=(0,h.useState)({}),Ze=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=new O({idKhachHang:d.i.EMPTY,maKhachHang:"",tenKhachHang:"Kh\xe1ch l\u1ebb",soDienThoai:"",tongTichDiem:0});if(null!==n){var i;ve(!1),e.idKhachHang=null===n||void 0===n?void 0:n.id,e.tenKhachHang=null===n||void 0===n?void 0:n.tenKhachHang,e.maKhachHang=null===n||void 0===n?void 0:n.maKhachHang,e.soDienThoai=null===n||void 0===n?void 0:n.soDienThoai;const t=new W({idKhachHang:e.idKhachHang,idChiNhanh:$}),a=await L.InsertCustomerCheckIn(t);e.idCheckIn=a.id,e.dateTimeCheckIn=a.dateTimeCheckIn,Fn({...An,id:a.id}),J({...X,id:null===n||void 0===n?void 0:n.id,maKhachHang:null===n||void 0===n?void 0:n.maKhachHang,tenKhachHang:null===n||void 0===n?void 0:n.tenKhachHang,tongTichDiem:null===n||void 0===n?void 0:n.tongTichDiem,avatar:null!==(i=null===n||void 0===n?void 0:n.avatar)&&void 0!==i?i:""})}else J({...X,id:"",maKhachHang:"KL",tenKhachHang:"Kh\xe1ch l\u1ebb",tongTichDiem:0,avatar:""});en({...nn,idCheckIn:null===e||void 0===e?void 0:e.idCheckIn,idKhachHang:null===e||void 0===e?void 0:e.idKhachHang,maKhachHang:null===e||void 0===e?void 0:e.maKhachHang,tenKhachHang:null===e||void 0===e?void 0:e.tenKhachHang,soDienThoai:null===e||void 0===e?void 0:e.soDienThoai}),await be(e,0),He(n)},be=async function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=An.id;await L.UpdateTrangThaiCheckin(i,0);const t=await gn.hoaDon.where("id").equals(null===nn||void 0===nn?void 0:nn.id).toArray();console.log("hoadon?.id ",null===nn||void 0===nn?void 0:nn.id,t),0===e?t.length>0&&await gn.hoaDon.update(null===nn||void 0===nn?void 0:nn.id,{idCheckIn:null===n||void 0===n?void 0:n.idCheckIn,idKhachHang:null===n||void 0===n?void 0:n.idKhachHang,tenKhachHang:null===n||void 0===n?void 0:n.tenKhachHang,maKhachHang:null===n||void 0===n?void 0:n.maKhachHang,soDienThoai:null===n||void 0===n?void 0:n.soDienThoai}):await gn.hoaDon.where("idCheckIn").equals(i).delete().then((n=>console.log("idCheckInOld ",i,"deletecount",n)))},[je,we]=(0,h.useState)(!1),[ye,ke]=(0,h.useState)(0),[Ke,De]=(0,h.useState)(!1),Se=n=>{rn([...n]);const e=k.Z.RoundDecimal(n.reduce(((n,e)=>e.tienThu+k.Z.formatNumberToFloat(n)),0));E(e),A(e-(null===nn||void 0===nn?void 0:nn.tongThanhToan))},Ne=async()=>{var n,e;Oe(!1);if(!await(async()=>0===tn.length?(zn({show:!0,type:2,mes:"Vui l\xf2ng nh\u1eadp chi ti\u1ebft h\xf3a \u0111\u01a1n "}),!1):!k.Z.checkNull(null===nn||void 0===nn?void 0:nn.idKhachHang)&&(null===nn||void 0===nn?void 0:nn.idKhachHang)!==d.i.EMPTY||!(V<(null===nn||void 0===nn?void 0:nn.tongThanhToan))||(zn({show:!0,type:2,mes:"L\xe0 kh\xe1ch l\u1ebb. Kh\xf4ng cho ph\xe9p n\u1ee3"}),!1))())return;const i={...nn};null===i||void 0===i||null===(n=i.hoaDonChiTiet)||void 0===n||n.map(((n,e)=>{n.stt=e+1}));const t=await En.Z.CreateHoaDon(i);await L.UpdateTrangThaiCheckin(An.id,2),await L.Update_IdHoaDon_toCheckInHoaDon(An.id,t.id);let a=Ln.Z.AssignAgainQuyChiTiet(on,V,null!==(e=null===nn||void 0===nn?void 0:nn.tongThanhToan)&&void 0!==e?e:0);const o=a.reduce(((n,e)=>n+e.tienThu),0);let h=new Mn.Z({});o>0&&(h=new Mn.Z({idChiNhanh:k.Z.checkNull(null===l||void 0===l?void 0:l.id)?$:null===l||void 0===l?void 0:l.id,idLoaiChungTu:11,ngayLapHoaDon:t.ngayLapHoaDon,tongTienThu:o}),a=a.filter((n=>n.tienThu>0)),a.map((n=>{n.idHoaDonLienQuan=t.id,n.idKhachHang=nn.idKhachHang==d.i.EMPTY?null:nn.idKhachHang,n.maHoaDonLienQuan=t.maHoaDon})),h.quyHoaDon_ChiTiet=a,await Ln.Z.CreateQuyHoaDon(h),h.tenNguoiNop=nn.tenKhachHang),zn({show:!0,type:1,mes:"Thanh to\xe1n h\xf3a \u0111\u01a1n th\xe0nh c\xf4ng"}),await Pe(t.maHoaDon,h),Ie(),await(async()=>{await gn.hoaDon.where("id").equals(nn.id).delete()})()},Ie=()=>{v(!1),ke(0),De(!1),o(!1),an([]),rn([new Wn.Z({hinhThucThanhToan:1})]),en(new xn.Z({id:d.i.create().toString(),idKhachHang:null,idChiNhanh:$,tenKhachHang:"Kh\xe1ch l\u1ebb"})),Fn({...An,id:""}),J({...X,id:"",maKhachHang:"KL",tenKhachHang:"Kh\xe1ch l\u1ebb",tongTichDiem:0,avatar:""})},Pe=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;const i=await(async()=>await de.Z.GetDetail(null!==$&&void 0!==$?$:""))(),t=await pe.Z.GetContentMauInMacDinh(1,1),a=await me.Z.GetAllCongTy({});let o={};a.length>0&&(o=a[0]),xe.Z.chinhanh=i,xe.Z.congty=o,xe.Z.hoadon=nn,xe.Z.hoadon.maHoaDon=n,xe.Z.hoadon.daThanhToan=null===e||void 0===e?void 0:e.tongTienThu,xe.Z.hoadon.conNo=nn.tongThanhToan-(null===e||void 0===e?void 0:e.tongTienThu),xe.Z.hoadonChiTiet=tn,xe.Z.khachhang={maKhachHang:null===nn||void 0===nn?void 0:nn.maKhachHang,tenKhachHang:null===nn||void 0===nn?void 0:nn.tenKhachHang,soDienThoai:null===nn||void 0===nn?void 0:nn.soDienThoai},xe.Z.phieuthu=e;let h=xe.Z.replaceChiTietHoaDon(t);h=xe.Z.replaceChiNhanh(h),h=xe.Z.replaceHoaDon(h),h=await xe.Z.replacePhieuThuChi(h),xe.Z.Print(h)},Ve=(0,h.useRef)(null),[Ee,Le]=(0,h.useState)(!1),Me=()=>{Ve.current&&Le(Ve.current.scrollWidth>Ve.current.clientWidth)};(0,h.useEffect)((()=>{const n=Ve.current;if(n){Me();const e=new ResizeObserver(Me);return e.observe(n),()=>{e.disconnect()}}}),[t]);const[We,Oe]=(0,h.useState)(!1),ze=()=>{Oe(!We),o(!We)};(0,h.useEffect)((()=>{var n;const e=1===on.length?on[0].hinhThucThanhToan:0;rn(on.map((n=>n.hinhThucThanhToan===e?{...n,tienThu:nn.tongThanhToan}:{...n}))),E(null!==(n=null===nn||void 0===nn?void 0:nn.tongThanhToan)&&void 0!==n?n:0),A(0),console.log("changeTongTT ")}),[nn.tongThanhToan]);const[Ae,Fe]=(0,h.useState)(""),[Ge,Be]=(0,h.useState)([]),[Re,Qe]=(0,h.useState)([]),[_e,Ye]=(0,h.useState)({id:null,bin:"",soTaiKhoan:"",tenRutGon:"",tenTaiKhoan:""});(0,h.useEffect)((()=>{(async()=>{const n=await Ce.Z.GetAllBankAccount($);Qe(n)})()}),[null===l||void 0===l?void 0:l.id]),(0,h.useEffect)((()=>{qe()}),[nn.tongThanhToan,_e]);const qe=async()=>{if(k.Z.checkNull(_e.id))Fe("");else{const n={id:null===_e||void 0===_e?void 0:_e.id,soTaiKhoan:null===_e||void 0===_e?void 0:_e.soTaiKhoan,tenChuThe:null===_e||void 0===_e?void 0:_e.tenTaiKhoan,maPinNganHang:null===_e||void 0===_e?void 0:_e.bin},e=await Ce.Z.GetQRCode(n,nn.tongThanhToan);Fe(e)}};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(sn.Provider,{value:vn,children:(0,q.jsx)(mn,{trigger:An,handleSave:async function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=new O({idKhachHang:n.idKhachHang,idCheckIn:n.idCheckIn,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,soDienThoai:n.soDienThoai,tongTichDiem:n.tongTichDiem,dateTimeCheckIn:n.dateTimeCheckIn});Fn({...An,id:n.idCheckIn,isShow:!1});const t=await gn.hoaDon.where("idCheckIn").equals(n.idCheckIn).toArray();if(null!=t&&t.length>0){var a;const e=null!==(a=t[0].hoaDonChiTiet)&&void 0!==a?a:[];en({...nn,id:t[0].id,idKhachHang:n.idKhachHang,idCheckIn:n.idCheckIn,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,tongTienHang:t[0].tongTienHang,tongTienHDSauVAT:t[0].tongTienHDSauVAT,tongThanhToan:t[0].tongThanhToan,tongTienHangChuaChietKhau:t[0].tongTienHangChuaChietKhau}),an(e)}else en({...nn,idChiNhanh:$,idKhachHang:n.idKhachHang,idCheckIn:n.idCheckIn,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang});await be(i,e),await te(n.idKhachHang)}})}),(0,q.jsx)(_.Z,{visible:re,onCancel:()=>ve(!1),onOk:Ze,title:"Th\xeam m\u1edbi kh\xe1ch h\xe0ng",formRef:fe}),(0,q.jsx)(Rn,{triggerModal:Tn,handleSave:n=>{an(tn.map((e=>Tn.item.id===e.id?{...e,nhanVienThucHien:n}:e)))}}),(0,q.jsx)(Yn.Z,{formType:1,isShow:Gn,hoadonChiTiet:tn.filter((n=>n.id===Qn)),handleSave:n=>{Bn(!1),un({...dn,soLuong:n.soLuong,donGiaTruocCK:n.donGiaTruocCK,laPTChietKhau:n.laPTChietKhau,ptChietKhau:n.ptChietKhau,tienChietKhau:n.tienChietKhau,donGiaSauCK:n.donGiaSauCK,donGiaSauVAT:n.donGiaSauVAT,thanhTienTruocCK:n.thanhTienTruocCK,thanhTienSauCK:n.thanhTienSauCK,thanhTienSauVAT:n.thanhTienSauVAT}),an(tn.map((e=>e.id===n.id?{...e,soLuong:n.soLuong,donGiaTruocCK:n.donGiaTruocCK,laPTChietKhau:n.laPTChietKhau,ptChietKhau:n.ptChietKhau,tienChietKhau:n.tienChietKhau,donGiaSauCK:n.donGiaSauCK,donGiaSauVAT:n.donGiaSauVAT,thanhTienTruocCK:n.thanhTienTruocCK,thanhTienSauCK:n.thanhTienSauCK,thanhTienSauVAT:n.thanhTienSauVAT}:e)))},handleClose:()=>Bn(!1)}),(0,q.jsx)(cn.Z,{showAlert:On.show,type:On.type,title:On.mes,handleClose:()=>zn({show:!1,mes:"",type:1})}),(0,q.jsxs)(s.ZP,{container:!0,spacing:2,width:"100%",marginTop:3,ml:"0",sx:{height:"100%","& > div:not(.normal)":{paddingTop:"0!important"}},children:[We?(0,q.jsx)(s.ZP,{item:!0,md:7,className:"normal",sx:{},children:(0,q.jsx)(In.Z,{toggleDetail:ze,hinhThucTT:1===on.length?on[0].hinhThucThanhToan:0,tongTienHang:null===nn||void 0===nn?void 0:nn.tongTienHang,onChangeQuyChiTiet:Se,onChangeHoaDon:(n,e,i,t)=>{en({...nn,pTGiamGiaHD:n,tongGiamGiaHD:e,tongThanhToan:i,ghiChuHD:t})},onClickThanhToan:Ne})}):(0,q.jsxs)(s.ZP,{item:!0,container:!0,md:7,spacing:2,height:"fit-content",marginTop:t?"-83px":"-24px",paddingBottom:"0",bgcolor:"#F8F8F8",children:[(0,q.jsxs)(s.ZP,{item:!0,md:t?12:4,sx:{display:"flex",flexDirection:"column"},children:[t&&(0,q.jsx)(j.Z,{fullWidth:!0,sx:{borderColor:"#CFD3D4!important",borderWidth:"1px!important",maxWidth:{lg:"55%",md:"45%"},mr:"24px",boxShadow:" 0px 20px 100px 0px #0000000D",maxHeight:"37px",marginLeft:"auto","& .MuiInputBase-root":{bgcolor:"#fff"},"& input":{color:"#3D475C!important"}},size:"small",className:"search-field no-minWidth",variant:"outlined",type:"search",placeholder:"T\xecm ki\u1ebfm",value:u,onChange:n=>{g(n.target.value)},InputProps:{startAdornment:(0,q.jsx)(w.Z,{position:"start",children:(0,q.jsx)(B.r,{})})}}),(0,q.jsx)(r.Z,{mt:t?"8px":"0px",sx:{scrollBehavior:"smooth",backgroundColor:t?"transparent":"#fff",borderRadius:"8px",boxShadow:t?"unset":" 0px 20px 100px 0px #0000000D",padding:"16px",height:t?"unset":"100vh",overflowX:"hidden",maxHeight:t?"unset":"88.5vh",overflowY:"auto","&::-webkit-scrollbar":{width:"7px"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(0,0,0,0.1)",borderRadius:"8px"},"&::-webkit-scrollbar-track":{bgcolor:"var(--color-bg)"}},children:(0,q.jsxs)(r.Z,{children:[(0,q.jsx)(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,q.jsx)(y.Z,{variant:"h3",fontSize:"16px",color:"#4C4B4C",fontWeight:"700",onClick:()=>ee(2),children:"Nh\xf3m d\u1ecbch v\u1ee5"})}),(0,q.jsxs)(Zn.Z,{onScroll:Me,ref:Ve,onWheel:n=>{Ve.current&&(Ve.current.scrollLeft+=n.deltaY)},sx:{height:66,display:t?"flex":"block",columnGap:"12px",flexWrap:t?"nowrap":"wrap",overflowX:t?"auto":"none",scrollBehavior:"smooth","&::-webkit-scrollbar":{width:"7px",height:"7px"},"&::-webkit-scrollbar-thumb:horizontal":{bgcolor:"rgba(0,0,0,0.1)",borderRadius:"8px"}},children:[(0,q.jsx)(bn.ZP,{component:"a",onClick:()=>ee(2),sx:{gap:"6px",padding:"4px 8px ",overflow:"hidden",bgcolor:"var( --color-main)",borderRadius:"8px",marginTop:"8px",cursor:"pointer",transition:".4s",minWidth:t?"100px":"unset",maxWidth:t?"100px":"unset",position:"relative","&::after":{content:'""',position:"absolute",height:"100%",width:"100%",left:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.3)",zIndex:"0",opacity:"0",transition:".4s"},"&:hover::after":{opacity:"1"}},children:(0,q.jsx)(jn.Z,{sx:{textAlign:"center","& .MuiTypography-root":{color:"white",whiteSpace:"nowrap",width:"100%",fontSize:"var(--font-size-main)",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"600",position:"relative",zIndex:"2"}},children:"T\u1ea5t c\u1ea3"})}),qn.map(((n,e)=>{var i;return(0,q.jsxs)(bn.ZP,{component:"a",onClick:()=>ne(n),sx:{gap:"6px",padding:"4px 8px ",overflow:"hidden",bgcolor:"#EEF0F4",borderRadius:"8px",marginTop:"8px",cursor:"pointer",transition:".4s",minWidth:t?"200px":"unset",maxWidth:t?"200px":"unset",position:"relative","&::after":{content:'""',position:"absolute",height:"100%",width:"100%",left:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.3)",zIndex:"0",opacity:"0",transition:".4s"},"&:hover::after":{opacity:"1"}},children:[(0,q.jsx)(wn.Z,{sx:{minWidth:"0",position:"relative",zIndex:"2","& path":{fill:null!==(i=n.color)&&void 0!==i?i:"#c2c9d6"}},children:(0,q.jsx)(Xn,{})}),(0,q.jsx)(jn.Z,{sx:{"& .MuiTypography-root":{color:"black",whiteSpace:"nowrap",width:"100%",fontSize:"var(--font-size-main)",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"600",position:"relative",zIndex:"2"}},title:n.tenNhomHang,children:n.tenNhomHang})]},e)})),Un.map(((n,e)=>{var i;return(0,q.jsxs)(bn.ZP,{component:"a",href:"#"+n.id,sx:{gap:"6px",padding:"4px 8px",overflow:"hidden",bgcolor:n.color,borderRadius:"8px",marginTop:"12px",minWidth:t?"200px":"unset",maxWidth:t?"200px":"unset",cursor:"pointer",transition:".4s",position:"relative","&::after":{content:'""',position:"absolute",height:"100%",width:"100%",left:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.3)",zIndex:"0",opacity:"0",transition:".4s"},"&:hover::after":{opacity:"1"}},onClick:()=>ne(n),children:[(0,q.jsx)(wn.Z,{sx:{minWidth:"0",position:"relative",zIndex:"2","& path":{fill:null!==(i=n.color)&&void 0!==i?i:"#c2c9d6"}},children:(0,q.jsx)(Xn,{})}),(0,q.jsx)(jn.Z,{sx:{"& .MuiTypography-root":{color:"black",whiteSpace:"nowrap",width:"100%",fontWeight:"600",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",position:"relative",zIndex:"2"}},title:n.tenNhomHang,children:n.tenNhomHang})]},e)}))]})]})})]}),(0,q.jsx)(s.ZP,{item:!0,md:t?12:8,sx:{marginTop:"-58px"},children:(0,q.jsxs)(r.Z,{display:"flex",flexDirection:"column",children:[!t&&(0,q.jsx)(j.Z,{fullWidth:!0,sx:{backgroundColor:"#fff",borderColor:"#CFD3D4!important",borderWidth:"1px!important",boxShadow:" 0px 20px 100px 0px #0000000D",margin:"auto","& input":{color:"#3D475C!important"}},size:"small",className:"search-field",variant:"outlined",type:"search",placeholder:"T\xecm ki\u1ebfm",value:u,onChange:n=>{g(n.target.value)},InputProps:{startAdornment:(0,q.jsx)(w.Z,{position:"start",children:(0,q.jsx)(B.r,{})})}}),(0,q.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:"24px",padding:2,marginTop:"22px",sx:{width:"100%",backgroundColor:t?"transparent":"#fff",borderRadius:"8px",height:t&&innerHeight>600?"75vh":t&&innerHeight<605?"32vh":"88.5vh",overflowX:"hidden",overflowY:"auto",scrollBehavior:"smooth","&::-webkit-scrollbar":{width:"7px"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(0,0,0,0.1)",borderRadius:"8px"},"&::-webkit-scrollbar-track":{bgcolor:"var(--color-bg)"}},children:I.map(((n,e)=>(0,q.jsxs)(r.Z,{id:n.idNhomHangHoa,children:[(0,q.jsx)(y.Z,{variant:"h4",fontSize:"16px",color:"#000",pt:"5px",fontWeight:"700",marginBottom:"11px",children:n.tenNhomHang}),(0,q.jsx)(s.ZP,{container:!0,spacing:1.5,children:n.hangHoas.map((n=>(0,q.jsx)(s.ZP,{item:!0,xs:6,sm:6,md:t?4:6,lg:t?3:4,children:(0,q.jsxs)(b.Z,{spacing:2,height:"100%",padding:"8px 12px",flexDirection:"column",justifyContent:"space-between",gap:"8px",borderRadius:"4px",sx:{border:"1px solid transparent",cursor:"pointer",transition:".4s",backgroundColor:"var(--color-bg)","&:hover":{borderColor:"var(--color-main)"}},onClick:()=>{(async(n,e)=>{const i=new pn.Z({idDonViQuyDoi:n.idDonViQuyDoi,maHangHoa:n.maHangHoa,tenHangHoa:n.tenHangHoa,giaBan:n.giaBan,idNhomHangHoa:n.idNhomHangHoa,idHangHoa:n.id,soLuong:1,expanded:!1}),t=tn.filter((e=>e.idDonViQuyDoi===n.idDonViQuyDoi));if(0===t.length)an((n=>[i,...n]));else{i.id=t[0].id,i.soLuong=t[0].soLuong+1,i.nhanVienThucHien=t[0].nhanVienThucHien;const e=null===tn||void 0===tn?void 0:tn.filter((e=>e.idDonViQuyDoi!==n.idDonViQuyDoi));an((n=>[i,...e]))}un(i)})(n)},children:[(0,q.jsx)("span",{title:n.tenHangHoa,style:{fontSize:"12px",fontWeight:"700",color:"#333233",maxHeight:"32px",overflow:"hidden",textOverflow:"ellipsis"},children:n.tenHangHoa}),(0,q.jsx)("span",{style:{fontSize:"13px",color:"#333233"},children:Intl.NumberFormat("vi-VN").format(n.giaBan)})]})},n.id)))})]},e)))})]})})]}),(0,q.jsx)(s.ZP,{item:!0,md:5,sx:{paddingRight:"0"},children:(0,q.jsxs)(b.Z,{sx:{width:"calc(100% + 16px)",mt:We?"-21px":"-79px",backgroundColor:"#fff",height:"calc(100vh - 16px)",padding:"16px",paddingBottom:0,display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative","&::after":{content:"''",pointerEvents:"none",position:"absolute",left:"0",width:"100%",bottom:"0px",bgcolor:"#fff"}},children:[(0,q.jsx)(r.Z,{sx:{backgroundColor:"#fff",borderBottom:"1px solid #F2F2F2",paddingBottom:"16px"},children:(0,q.jsxs)(r.Z,{display:"flex",gap:"8px",alignItems:"center",children:[k.Z.checkNull(null===X||void 0===X?void 0:X.id)||(null===X||void 0===X?void 0:X.id)===d.i.EMPTY?(0,q.jsx)(G.Z,{sx:{width:40,height:40}}):k.Z.checkNull(null===X||void 0===X?void 0:X.avatar)?(0,q.jsx)(U,{firstChar:k.Z.getFirstLetter(null!==(e=null===X||void 0===X?void 0:X.tenKhachHang)&&void 0!==e?e:"")}):(0,q.jsx)(G.Z,{sx:{width:40,height:40},src:null===X||void 0===X?void 0:X.avatar}),(0,q.jsxs)(r.Z,{onClick:async()=>{Fn({...An,isShow:!0,id:null===i||void 0===i?void 0:i.idCheckIn})},children:[(0,q.jsx)(y.Z,{variant:"subtitle2",color:"#3D475C",children:null===nn||void 0===nn?void 0:nn.tenKhachHang}),(0,q.jsx)(y.Z,{variant:"subtitle2",fontSize:"12px",color:"#525F7A",children:null===nn||void 0===nn?void 0:nn.soDienThoai})]}),(0,q.jsx)(r.Z,{sx:{marginLeft:"auto"},children:k.Z.checkNull(null===nn||void 0===nn?void 0:nn.idKhachHang)||(null===nn||void 0===nn?void 0:nn.idKhachHang)===d.i.EMPTY?(0,q.jsx)(c.Z,{variant:"outlined",sx:{border:"1px solid var(--color-main)",bgcolor:"#fff",minWidth:"unset",width:"40px",height:"40px",borderRadius:"8px"},children:(0,q.jsx)(K.Z,{onClick:()=>{ve(!0),He({id:d.i.EMPTY,maKhachHang:"",tenKhachHang:"",soDienThoai:"",diaChi:"",idNhomKhach:"",idNguonKhach:"",gioiTinh:!1,moTa:"",idLoaiKhach:1})}})}):(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(b.Z,{spacing:2,direction:"row",children:[(0,q.jsx)(ce.Z,{onClick:async()=>{if(Object.keys(fe)){var n;const e=await Y.Z.getKhachHang(null!==(n=null===nn||void 0===nn?void 0:nn.idKhachHang)&&void 0!==n?n:"");He(e)}ve(!0)},sx:{color:"#8492AE",width:"16px",height:"16px"}}),(0,q.jsx)(Sn.Z,{sx:{color:"#8492AE",width:"16px",height:"16px"},onClick:()=>Ze(null)})]})})})]})}),(0,q.jsx)(r.Z,{sx:{scrollBehavior:"smooth",overflowY:"auto","&::-webkit-scrollbar":{width:"7px"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(0,0,0,0.1)",borderRadius:"8px"},"&::-webkit-scrollbar-track":{bgcolor:"var(--color-bg)"}},children:null===tn||void 0===tn?void 0:tn.map(((n,e)=>{var i,t,a;return(0,q.jsx)(r.Z,{padding:void 0!==(null===n||void 0===n?void 0:n.nhanVienThucHien)&&((null===n||void 0===n?void 0:n.nhanVienThucHien.length)>0||(null!==(i=null===n||void 0===n?void 0:n.tienChietKhau)&&void 0!==i?i:0)>0)?"8px 0px":"16px 0px",borderBottom:"1px solid #E0E4EB",children:(0,q.jsxs)(s.ZP,{container:!0,children:[(0,q.jsxs)(s.ZP,{item:!0,md:12,xs:12,sm:12,lg:7,children:[(0,q.jsx)(y.Z,{variant:"body1",fontSize:"14px",color:"var(--color-main)",fontWeight:"400",lineHeight:"20px",sx:{display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer"},title:n.tenHangHoa,onClick:()=>{return e=n,void Hn((n=>({...n,isShow:!0,isNew:!0,item:e,id:e.id})));var e},children:n.tenHangHoa}),void 0!==(null===n||void 0===n?void 0:n.nhanVienThucHien)&&(null===n||void 0===n?void 0:n.nhanVienThucHien.length)>0&&(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(r.Z,{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px",children:[n.nhanVienThucHien.map(((e,i)=>(0,q.jsxs)(r.Z,{sx:{fontSize:"11px",lineHeight:"16px",color:"#4C4B4C",alignItems:"center",maxWidth:void 0!==n.nhanVienThucHien&&1===n.nhanVienThucHien.length?"100%":void 0!==n.nhanVienThucHien&&n.nhanVienThucHien.length>2?"calc(50% - 23px)":"calc(50% - 4px)",backgroundColor:"var(--color-bg)",padding:"4px 8px",gap:"4px",borderRadius:"100px","& .remove-NV:hover img":{filter:"brightness(0) saturate(100%) invert(21%) sepia(100%) saturate(3282%) hue-rotate(337deg) brightness(85%) contrast(105%)"},display:i>1?"none":"flex",width:"auto"},children:[(0,q.jsx)(r.Z,{sx:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:e.tenNhanVien,children:e.tenNhanVien}),(0,q.jsx)("span",{className:"remove-NV",style:{cursor:"pointer"},onClick:()=>((n,e)=>{an(tn.map((i=>{var t;return i.id===n.id?{...i,nhanVienThucHien:null===(t=i.nhanVienThucHien)||void 0===t?void 0:t.filter((n=>n.idNhanVien!==e.idNhanVien))}:i})))})(n,e),children:(0,q.jsx)("img",{src:Dn,alt:"close"})})]},i))),n.nhanVienThucHien.length>2?(0,q.jsxs)(r.Z,{sx:{fontSize:"10px",color:"#525F7A",padding:"4px 8px",borderRadius:"100px",bgcolor:"var(--color-bg)",cursor:"pointer"},children:[n.nhanVienThucHien.length-2,"+"]}):void 0]})})]}),(0,q.jsx)(s.ZP,{item:!0,md:12,xs:12,sm:12,lg:5,mt:{xs:1,sm:1,md:1,lg:0},pl:{xs:5,sm:5,md:5,lg:0},children:(0,q.jsx)(s.ZP,{container:!0,justifyContent:"flex-end",children:(0,q.jsxs)(b.Z,{width:"100%",direction:"row",justifyContent:"flex-end",children:[(0,q.jsx)(s.ZP,{item:!0,xs:6,sm:6,md:6,lg:6,children:(0,q.jsxs)(r.Z,{sx:{display:"flex",gap:"8px",color:"#000",fontSize:"14px",fontWeight:500,transition:".4s","& .price":{color:"var(--color-main)"},"& .price:hover":{cursor:"pointer"}},children:[(0,q.jsxs)(b.Z,{direction:"row",spacing:1,children:[(0,q.jsx)("span",{children:n.soLuong}),(0,q.jsx)("span",{style:{fontSize:"13px"},children:"x"})]}),(0,q.jsxs)(r.Z,{children:[(0,q.jsx)(r.Z,{component:"span",onClick:()=>{return e=n,Bn(!0),void _n(null===e||void 0===e?void 0:e.id);var e},className:"price",children:Intl.NumberFormat("vi-VN").format(n.donGiaTruocCK)}),void 0!==(null===n||void 0===n?void 0:n.tienChietKhau)&&(null===n||void 0===n?void 0:n.tienChietKhau)>0&&(0,q.jsxs)(y.Z,{textAlign:"center",variant:"body1",color:"#8492AE",fontSize:"10px",fontStyle:"italic",children:[(0,q.jsx)("span",{children:"Gi\u1ea3m"})," ",(0,q.jsx)("span",{children:new Intl.NumberFormat("vi-VN").format(null!==(t=null===n||void 0===n?void 0:n.tienChietKhau)&&void 0!==t?t:0)})]})]})]})}),(0,q.jsx)(s.ZP,{item:!0,xs:6,sm:6,md:6,lg:6,children:(0,q.jsxs)(r.Z,{justifyContent:"flex-end",sx:{display:"flex",gap:"8px"},children:[(0,q.jsx)("span",{style:{fontWeight:500,fontSize:"14px"},children:Intl.NumberFormat("vi-VN").format(null!==(a=null===n||void 0===n?void 0:n.thanhTienSauCK)&&void 0!==a?a:0)}),(0,q.jsx)(c.Z,{sx:{minWidth:"20px",padding:"0","&:hover svg":{filter:"brightness(0) saturate(100%) invert(21%) sepia(100%) saturate(3282%) hue-rotate(337deg) brightness(85%) contrast(105%)"}},children:(0,q.jsx)(oe,{style:{cursor:"pointer",color:"#999699"},onClick:()=>{var e;e=n,an(tn.filter((n=>n.idDonViQuyDoi!==e.idDonViQuyDoi)))}})})]})})]})})})]})},e)}))}),(0,q.jsxs)(r.Z,{marginTop:"auto",children:[(0,q.jsxs)(r.Z,{pt:"8px",display:"none",children:[(0,q.jsx)(y.Z,{variant:"h3",color:"#333233",fontSize:"14px",fontWeight:"500",mb:"8px",children:"M\xe3 gi\u1ea3m gi\xe1"}),(0,q.jsx)(j.Z,{size:"small",fullWidth:!0,placeholder:"Nh\u1eadp m\xe3",value:null===nn||void 0===nn?void 0:nn.ghiChuHD,onChange:n=>en({...nn,ghiChuHD:n.target.value}),InputProps:{startAdornment:(0,q.jsx)(w.Z,{position:"start",children:(0,q.jsx)(le,{})}),endAdornment:(0,q.jsx)(c.Z,{variant:"text",sx:{padding:"0",transition:".4s",bgcolor:"transparent!important",color:"#4C4B4C","&:hover":{color:"var(--color-main)"}},children:"\xc1p d\u1ee5ng"})},sx:{"& input":{fontSize:"14px"}}})]}),(0,q.jsxs)(r.Z,{children:[(0,q.jsxs)(r.Z,{display:"flex",flexDirection:"column",gap:"16px",pt:"16px",pb:"16px",borderRadius:"12px",bgcolor:"#F9F9F9",children:[(0,q.jsxs)(r.Z,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(y.Z,{variant:"h6",fontSize:"16px",fontWeight:"700",color:"#3B4758",children:"T\u1ed5ng thanh to\xe1n"}),(0,q.jsx)(y.Z,{variant:"body1",fontWeight:"700",fontSize:"16px",color:"#3B4758",children:Intl.NumberFormat("vi-VN").format(null===nn||void 0===nn?void 0:nn.tongThanhToan)})]}),(0,q.jsxs)(r.Z,{display:"none",justifyContent:"space-between",children:[(0,q.jsx)(y.Z,{variant:"h6",fontSize:"14px",color:"#3B4758",children:"Gi\u1ea3m gi\xe1"}),(0,q.jsx)(y.Z,{variant:"caption",fontSize:"12px",color:"#3B4758",children:Intl.NumberFormat("vi-VN").format(null===nn||void 0===nn?void 0:nn.tongChietKhauHangHoa)})]}),(0,q.jsxs)(r.Z,{display:"none",justifyContent:"space-between",borderBottom:"1px solid #CBADC2",pb:"8px",children:[(0,q.jsx)(y.Z,{variant:"h6",fontSize:"14px",color:"#3B4758",children:"T\u1ed5ng gi\u1ea3m gi\xe1"}),(0,q.jsx)(y.Z,{variant:"caption",fontSize:"12px",color:"#3B4758",children:Intl.NumberFormat("vi-VN").format(null===nn||void 0===nn?void 0:nn.tongChietKhauHangHoa)})]}),(0,q.jsxs)(s.ZP,{container:!0,justifyContent:"space-between",children:[(0,q.jsx)(s.ZP,{item:!0,xs:"auto",sx:{display:"flex",alignItems:"center"},children:(0,q.jsx)(y.Z,{variant:"body1",fontSize:"14px",color:"#3D475C",fontWeight:"500",children:"Ti\u1ec1n kh\xe1ch tr\u1ea3"})}),(0,q.jsx)(s.ZP,{item:!0,xs:"auto",children:on.length>1?(0,q.jsx)(r.Z,{sx:{mb:"8px",display:"flex",gap:"16px","& .item":{fontSize:"14px",color:"#525F7A"},"& > div":{display:"flex",gap:"5px"}},children:on.map(((n,e)=>(0,q.jsxs)(r.Z,{children:[(0,q.jsxs)(r.Z,{className:"label item",children:[n.sHinhThucThanhToan,":"]}),(0,q.jsx)(r.Z,{className:"value item",children:new Intl.NumberFormat("vi-VN").format(n.tienThu)})]},e)))}):(0,q.jsx)(yn.Z,{sx:{display:"flex",flexDirection:"row"},children:ue.ZP.hinhThucThanhToan.map(((n,e)=>(0,q.jsx)(kn.Z,{sx:{"& .MuiFormControlLabel-label":{fontSize:"14px"},marginRight:2===e?"0":"16px"},label:null===n||void 0===n?void 0:n.text,checked:1==on.length&&on[0].hinhThucThanhToan===n.value,onChange:()=>{(n=>{if(2===(null===n||void 0===n?void 0:n.value)&&Re.length>0){const e=Re[0];rn(on.map((i=>({...i,hinhThucThanhToan:n.value,sHinhThucThanhToan:null===n||void 0===n?void 0:n.text,idTaiKhoanNganHang:e.id,tenNganHang:e.tenNganHang,tenChuThe:e.tenChuThe,soTaiKhoan:e.soTaiKhoan,maPinNganHang:e.maPinNganHang})))),Ye({id:null===e||void 0===e?void 0:e.id,soTaiKhoan:null===e||void 0===e?void 0:e.soTaiKhoan,tenRutGon:e.tenRutGon,tenTaiKhoan:null===e||void 0===e?void 0:e.tenChuThe,bin:null===e||void 0===e?void 0:e.maPinNganHang})}else rn(on.map((e=>({...e,hinhThucThanhToan:n.value,sHinhThucThanhToan:null===n||void 0===n?void 0:n.text,idTaiKhoanNganHang:null,tenNganHang:"",tenChuThe:"",soTaiKhoan:"",maPinNganHang:""})))),Ye({id:null,soTaiKhoan:"",tenRutGon:"",tenTaiKhoan:"",bin:""})})(n)},control:(0,q.jsx)(Kn.Z,{value:n.value,size:"small"})},e)))})}),(0,q.jsx)(s.ZP,{xs:12,item:!0,children:(0,q.jsx)(ge.h3,{size:"small",fullWidth:!0,value:V,decimalSeparator:",",thousandSeparator:".",sx:{"& input":{textAlign:"right",fontWeight:"700",color:"#3D475C",fontSize:"16px",padding:"14px"}},customInput:j.Z,onChange:n=>{const e=on.map((e=>({...e,tienThu:k.Z.formatNumberToFloat(n.target.value)})));Se(e)}})})]}),(0,q.jsxs)(r.Z,{display:0!=M?"flex":"none",justifyContent:"space-between",alignItems:"center",children:[(0,q.jsx)(y.Z,{variant:"h5",fontWeight:"400",fontSize:"14px",color:"#3B4758",children:M>0?"Ti\u1ec1n th\u1eeba":"Ti\xean kh\xe1ch thi\u1ebfu"}),(0,q.jsx)(y.Z,{variant:"body1",fontWeight:"700",fontSize:"16px",color:"#3B4758",children:new Intl.NumberFormat("vi-VN").format(Math.abs(M))})]}),2===on[0].hinhThucThanhToan&&(0,q.jsxs)(r.Z,{children:[(0,q.jsx)(Te.Z,{handleChoseItem:async n=>{console.log("changeTK ",n),Ye({id:null===n||void 0===n?void 0:n.id,soTaiKhoan:null===n||void 0===n?void 0:n.soTaiKhoan,tenRutGon:null===n||void 0===n?void 0:n.tenRutGon,tenTaiKhoan:null===n||void 0===n?void 0:n.tenChuThe,bin:null===n||void 0===n?void 0:n.maPinNganHang}),rn(on.map((e=>2===e.hinhThucThanhToan?{...e,idTaiKhoanNganHang:null===n||void 0===n?void 0:n.id}:{...e})))},idChosed:k.Z.checkNull(_e.id)?"":_e.id,listOption:Re}),Ae&&(0,q.jsx)("img",{src:Ae,style:{width:"128px",height:"128px",marginTop:"8px"}})]})]}),(0,q.jsxs)(r.Z,{sx:{display:"flex",alignItems:"stretch",mt:"8px",gap:"8px"},children:[(0,q.jsx)(c.Z,{variant:"outlined",sx:{minWidth:"unset"},onClick:ze,children:(0,q.jsx)(Nn.Z,{sx:{color:"#525F7A"}})}),(0,q.jsx)(c.Z,{variant:"contained",fullWidth:!0,sx:{fontSize:"16px",fontWeight:"700",color:"#fff",textTransform:"unset!important",backgroundColor:"var(--color-main)!important",paddingY:"12px",transition:".3s",opacity:We?"0.2":"1",pointerEvents:We?"none":"all"},className:"btn-container-hover",onClick:Ne,children:"Thanh To\xe1n"})]})]})]})]})})]})]})})),He=(0,h.createContext)({listNguonKhach:[],listNhomkhach:[]});function Ze(){const[n,e]=(0,h.useState)(1),[i,t]=(0,h.useState)(new O({idKhachHang:d.i.EMPTY,tenKhachHang:"Kh\xe1ch l\u1ebb"})),[a,o]=(0,h.useState)([]),[u,g]=(0,h.useState)([]),x=n=>{e(n),1===n?hn.Z.set("tab","1",{expires:7}):hn.Z.set("tab","2")};(0,h.useEffect)((()=>(2===n?(document.documentElement.style.overflowY="hidden",document.documentElement.style.maxHeight="100vh"):document.documentElement.style.overflowY="auto",()=>{document.documentElement.style.maxHeight="unset",document.documentElement.style.overflowY="auto"})),[n]),(0,h.useEffect)((()=>{"1"===hn.Z.get("tab")?x(1):x(2),(async()=>{const n=await an.Z.SuggestNguonKhach();o(n)})(),(async()=>{const n=await an.Z.SuggestNhomKhach();g(n)})()}),[]);const[m,v]=(0,h.useState)(!1);(0,h.useEffect)((()=>{"true"===hn.Z.get("changed")?v(!1):v(!0)}),[]);const[C,T]=(0,h.useState)(!1),[f,H]=(0,h.useState)(),[b,j]=(0,h.useState)(!1);return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(He.Provider,{value:{listNguonKhach:a,listNhomkhach:u},children:(0,q.jsxs)(s.ZP,{container:!0,padding:2,columnSpacing:2,rowSpacing:2,bgcolor:"#f8f8f8",children:[b?void 0:(0,q.jsxs)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,children:[(0,q.jsxs)(r.Z,{display:"flex",gap:"12px",children:[(0,q.jsxs)(l.Z,{sx:{"& button":{}},children:[(0,q.jsx)(c.Z,{sx:{textTransform:"unset",color:1==n?"#fff":"#999699",backgroundColor:1==n?"var(--color-main)!important":"var(--color-bg)",borderColor:"transparent!important","&:hover":{borderColor:2==n?"var(--color-main)!important":"transparent!important"}},onClick:()=>x(1),className:1===n?"active":"",variant:1===n?"contained":"outlined",children:"Checkin"}),(0,q.jsx)(c.Z,{sx:{textTransform:"unset",color:2==n?"#fff":"#999699",borderColor:"transparent!important",backgroundColor:2==n?"var(--color-main)!important":"var(--color-bg)","&:hover":{borderColor:1==n?"var(--color-main)!important":"transparent!important"}},onClick:()=>{x(2),t(new O({idKhachHang:d.i.EMPTY,tenKhachHang:"Kh\xe1ch l\u1ebb"}))},className:2===n?"active":"",variant:2===n?"contained":"outlined",children:"Thanh to\xe1n"})]}),2===n&&(0,q.jsxs)(l.Z,{sx:{"& button":{borderColor:"#C2C9D6!important"}},children:[(0,q.jsx)(c.Z,{variant:"outlined",sx:{minWidth:"unset",padding:"0",borderRight:"0!important",width:"40px",height:"40px",bgcolor:m?"#fff":"#c2c9d61a","& svg":{filter:m?"brightness(0) saturate(100%) invert(36%) sepia(11%) saturate(1139%) hue-rotate(182deg) brightness(96%) contrast(87%)":"brightness(0) saturate(100%) invert(77%) sepia(2%) saturate(1404%) hue-rotate(181deg) brightness(104%) contrast(93%)"}},onClick:()=>{v(!0),hn.Z.set("changed","true",{expires:7})},className:"btn-outline-hover",children:(0,q.jsx)(p,{})}),(0,q.jsx)(c.Z,{variant:"outlined",sx:{minWidth:"unset",padding:"0",borderLeft:"0!important",width:"40px",height:"40px",bgcolor:m?"#c2c9d61a":"#fff","& svg":{filter:m?"brightness(0) saturate(100%) invert(77%) sepia(2%) saturate(1404%) hue-rotate(181deg) brightness(104%) contrast(93%)":"brightness(0) saturate(100%) invert(36%) sepia(11%) saturate(1139%) hue-rotate(182deg) brightness(96%) contrast(87%)"}},onClick:()=>{v(!1),hn.Z.set("changed","false")},className:"btn-outline-hover",children:(0,q.jsx)(Z,{})})]})]}),2===n?f:void 0]}),1===n&&(0,q.jsx)(Hn,{hanleChoseCustomer:n=>{t((e=>({...e,idCheckIn:n.idCheckIn,idKhachHang:n.idKhachHang,maKhachHang:n.maKhachHang,tenKhachHang:n.tenKhachHang,soDienThoai:n.soDienThoai,tongTichDiem:n.tongTichDiem}))),e(2)}}),2===n&&(0,q.jsx)(fe,{customerChosed:i,CoditionLayout:m,onPaymentChild:n=>{T(n)},sendDataToParent:n=>{j(n)}})]})})})}},96933:(n,e,i)=>{i.d(e,{OT:()=>t,wA:()=>a});class t{constructor(n){let{idChiNhanhs:e=[""],textSearch:i="",currentPage:t=0,pageSize:a=10,columnSort:o="",typeSort:h="DESC",trangThais:s=[]}=n;this.idChiNhanhs=void 0,this.textSearch=void 0,this.currentPage=1,this.pageSize=10,this.columnSort=void 0,this.typeSort=void 0,this.trangThais=[],this.idChiNhanhs=e,this.textSearch=i,this.currentPage=t,this.pageSize=a,this.columnSort=o,this.typeSort=h,this.trangThais=s}}class a extends t{constructor(n){let{idChiNhanhs:e=[""],textSearch:i="",currentPage:t=0,pageSize:a=10,columnSort:o="",typeSort:h="DESC",fromDate:s=null,toDate:r=null}=n;super({idChiNhanhs:e,textSearch:i,currentPage:t,pageSize:a,columnSort:o,typeSort:h}),this.fromDate=null,this.toDate=null,this.fromDate=s,this.toDate=r}}},45682:(n,e,i)=>{i.d(e,{Z:()=>a});var t=i(96219);const a=new class{async createOrEdit(n){return(await t.Z.post("api/services/app/NhanSu/CreateOrEdit",n)).data.result}async getAll(n){return(await t.Z.get("api/services/app/NhanSu/GetAll",{params:n})).data.result}async search(n,e){return(await t.Z.post("api/services/app/NhanSu/Search?keyWord=".concat(n.toString()),e)).data.result}async getNhanSu(n){return(await t.Z.post("api/services/app/NhanSu/GetNhanSu?id=".concat(n))).data.result}async delete(n){return(await t.Z.post("api/services/app/NhanSu/Delete?id=".concat(n))).data.result}async deleteMany(n){return(await t.Z.post("api/services/app/NhanSu/DeleteMany",n)).data.result}async exportDanhSachNhanVien(n){return(await t.Z.post("api/services/app/NhanSu/ExportDanhSach",n)).data.result}async exportDanhSachNhanVienSelected(n){return(await t.Z.post("api/services/app/NhanSu/ExportSelectedNhanVien",n)).data.result}async importNhanVien(n){return(await t.Z.post("api/services/app/NhanSu/ImportExcel",n)).data.result}}},27075:(n,e,i)=>{i.d(e,{Z:()=>a});var t=i(96219);const a=new class{constructor(){this.GetNhomHangHoa_byID=async n=>await t.Z.get("api/services/app/NhomHangHoa/GetNhomHangHoa_byID?id=".concat(n)).then((n=>n.data.result)),this.GetDM_NhomHangHoa=async()=>await t.Z.get("api/services/app/NhomHangHoa/GetNhomDichVu").then((n=>n.data.result)),this.GetTreeNhomHangHoa=async()=>await t.Z.get("api/services/app/NhomHangHoa/GetTreeNhomHangHoa").then((n=>n.data.result)),this.InsertNhomHangHoa=async n=>await t.Z.post("api/services/app/NhomHangHoa/CreateNhomHangHoa",n).then((n=>n.data.result)),this.UpdateNhomHangHoa=async n=>await t.Z.post("api/services/app/NhomHangHoa/UpdateNhomHangHoa",n).then((n=>n.data.result)),this.XoaNhomHangHoa=async n=>await t.Z.post("api/services/app/NhomHangHoa/XoaNhomHangHoa?id=".concat(n)).then((n=>n.data.result))}}},95104:(n,e,i)=>{i.d(e,{Z:()=>a});var t=i(85905);class a{constructor(n){let{id:e=t.i.create().toString(),idHoaDonLienQuan:i=null,idKhachHang:a=null,idNhanVien:o=null,idTaiKhoanNganHang:h=null,idKhoanThuChi:s=null,laPTChiPhiNganHang:r=0,chiPhiNganHang:l=0,thuPhiTienGui:c=0,diemThanhToan:d=0,hinhThucThanhToan:u=1,tienThu:g=0,tenChuThe:p="",soTaiKhoan:x="",tenNganHang:m="",tenKhoanThuChi:v=""}=n;this.id=t.i.create().toString(),this.idQuyHoaDon=t.i.createEmpty().toString(),this.idHoaDonLienQuan=null,this.idKhachHang=null,this.idNhanVien=null,this.idTaiKhoanNganHang=null,this.idKhoanThuChi=null,this.laPTChiPhiNganHang=0,this.chiPhiNganHang=0,this.thuPhiTienGui=0,this.diemThanhToan=0,this.hinhThucThanhToan=1,this.tienThu=0,this.tenChuThe="",this.soTaiKhoan="",this.tenNganHang="",this.tenKhoanThuChi="",this.sHinhThucThanhToan="",this.maHoaDonLienQuan="",this.maPinNganHang="",this.id=e,this.idHoaDonLienQuan=i,this.idKhachHang=a,this.idNhanVien=o,this.idTaiKhoanNganHang=h,this.idKhoanThuChi=s,this.laPTChiPhiNganHang=r,this.chiPhiNganHang=l,this.thuPhiTienGui=c,this.diemThanhToan=d,this.hinhThucThanhToan=u,this.tienThu=g,this.tenChuThe=p,this.soTaiKhoan=x,this.tenNganHang=m,this.tenKhoanThuChi=v,Object.defineProperties(this,{sHinhThucThanhToan:{get(){let n="";switch(this.hinhThucThanhToan){case 1:case 4:n="Ti\u1ec1n m\u1eb7t";break;case 2:n="Pos";break;case 3:n="Chuy\u1ec3n kho\u1ea3n";break;case 5:n="Th\u1ebb gi\xe1 tr\u1ecb";break;case 6:n="S\u1eed d\u1ee5ng \u0111i\u1ec3m"}return n}}})}}},82739:(n,e,i)=>{i.d(e,{Z:()=>s});var t=i(96219),a=i(80280),o=i(85905),h=i(95104);const s=new class{constructor(){this.CreateQuyHoaDon=async n=>(await t.Z.post("api/services/app/QuyHoaDon/Create",n)).data.result,this.UpdateQuyHoaDon=async n=>(await t.Z.post("api/services/app/QuyHoaDon/UpdateQuyHoaDon",n)).data.result,this.DeleteSoQuy=async n=>(await t.Z.get("api/services/app/QuyHoaDon/Delete?id="+n)).data.result,this.DeleteMultiple_QuyHoaDon=async n=>(await t.Z.post("api/services/app/QuyHoaDon/DeleteMultiple_QuyHoaDon",n)).data.success,this.GetNhatKyThanhToan_ofHoaDon=async n=>{if(a.Z.checkNull(n))return[];return(await t.Z.get("api/services/app/QuyHoaDon/GetNhatKyThanhToan_ofHoaDon?idHoaDonLienQuan=".concat(n))).data.result},this.HuyPhieuThuChi_ofHoaDonLienQuan=async n=>(await t.Z.get("api/services/app/QuyHoaDon/HuyPhieuThuChi_ofHoaDonLienQuan?idHoaDonLienQuan=".concat(n))).data.result,this.CheckExistsMaPhieuThuChi=async function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a.Z.checkNull(n))return!1;a.Z.checkNull(e)&&(e=o.i.EMPTY);return(await t.Z.get("api/services/app/QuyHoaDon/CheckExistsMaPhieuThuChi?maphieu=".concat(n,"&id=").concat(e))).data.result},this.ShareMoney_QuyHD=(n,e,i,t,a,o,h)=>h>=n?{TienCoc:n,TTBangDiem:0,TienMat:0,TienPOS:0,TienChuyenKhoan:0,TienTheGiaTri:0}:e>=(n-=h)?{TienCoc:h,TTBangDiem:n,TienMat:0,TienPOS:0,TienChuyenKhoan:0,TienTheGiaTri:0}:o>=(n-=e)?{TienCoc:h,TTBangDiem:e,TienMat:0,TienPOS:0,TienChuyenKhoan:0,TienTheGiaTri:Math.abs(n)}:i>=(n-=o)?{TienCoc:h,TTBangDiem:e,TienMat:Math.abs(n),TienPOS:0,TienChuyenKhoan:0,TienTheGiaTri:o}:t>=(n-=i)?{TienCoc:h,TTBangDiem:e,TienMat:i,TienPOS:Math.abs(n),TienChuyenKhoan:0,TienTheGiaTri:o}:a>=(n-=t)?{TienCoc:h,TTBangDiem:e,TienMat:i,TienPOS:t,TienChuyenKhoan:Math.abs(n),TienTheGiaTri:o}:(n-=a,{TienCoc:h,TTBangDiem:e,TienMat:i,TienPOS:t,TienChuyenKhoan:a,TienTheGiaTri:o}),this.AssignAgainQuyChiTiet=(n,e,i)=>{let t=[],a=0,o=0,s=0,r=null,l=null;const c=n.filter((n=>2===n.hinhThucThanhToan)),d=n.filter((n=>3===n.hinhThucThanhToan));c.length>0&&(r=c[0].idTaiKhoanNganHang),d.length>0&&(l=d[0].idTaiKhoanNganHang);for(let h=0;h<n.length;h++){const e=n[h];switch(e.hinhThucThanhToan){case 1:a+=e.tienThu;break;case 2:o+=e.tienThu;break;case 3:s+=e.tienThu}}if(e>i){const n=this.ShareMoney_QuyHD(i,0,a,o,s,0,0),e=n.TienMat,c=n.TienPOS,d=n.TienChuyenKhoan;if(e>0){const n=new h.Z({hinhThucThanhToan:1,tienThu:e});t.push(n)}if(c>0){const n=new h.Z({hinhThucThanhToan:2,tienThu:c,idTaiKhoanNganHang:r});t.push(n)}if(d>0){const n=new h.Z({hinhThucThanhToan:3,tienThu:d,idTaiKhoanNganHang:l});t.push(n)}}else t=[...n];return t}}async getAll(n){return(await t.Z.get("api/services/app/QuyHoaDon/GetAll",{params:n})).data.result}async ExportToExcel(n){return(await t.Z.post("api/services/app/QuyHoaDon/ExportExcelQuyHoaDon",n)).data.result}async GetInforQuyHoaDon_byId(n){return(await t.Z.get("api/services/app/QuyHoaDon/GetForEdit?id=".concat(n))).data.result}async GetQuyChiTiet_byIQuyHoaDon(n){return(await t.Z.get("api/services/app/QuyHoaDon/GetQuyChiTiet_byIQuyHoaDon?idQuyHoaDon=".concat(n))).data.result}}}}]);