"use strict";(self.webpackChunklayout_jsx=self.webpackChunklayout_jsx||[]).push([[7699],{64247:(e,n,a)=>{a.d(n,{Z:()=>d,r:()=>r});var t,i,o,l=a(47313);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},h.apply(this,arguments)}function s(e,n){let{title:a,titleId:s,...r}=e;return l.createElement("svg",h({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":s},r),a?l.createElement("title",{id:s},a):null,t||(t=l.createElement("path",{d:"M14 10V12.6667C14 13.0203 13.8595 13.3594 13.6095 13.6095C13.3594 13.8595 13.0203 14 12.6667 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V10",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),i||(i=l.createElement("path",{d:"M11.3333 5.33301L8.00001 1.99967L4.66668 5.33301",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),o||(o=l.createElement("path",{d:"M8 2L8 10",stroke:"#666466",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const r=l.forwardRef(s),d=a.p+"static/media/upload.66c1c8a63dcade851b73fbd88865202c.svg"},69682:(e,n,a)=>{a.d(n,{Z:()=>u});var t=a(47313),i=a(48623),o=a(24631),l=a(24193),h=a(9019),s=a(61113),r=a(9506),d=a(5211),c=a(46417);function u(e){let{handleChoseItem:n,idChosed:a,listOption:u,handleClickBtnAdd:g,roleAdd:p=!1}=e;const[m,x]=(0,t.useState)(null);t.useEffect((()=>{const e=u.filter((e=>e.id==a));e.length>0?x(e[0]):x(null)}),[a]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.Z,{size:"small",fullWidth:!0,disablePortal:!0,autoComplete:!0,multiple:!1,value:m,onChange:(e,a)=>{n(a)},filterOptions:e=>e,isOptionEqualToValue:(e,n)=>e.id===n.id,options:[{id:"",soTaiKhoan:""},...u],getOptionLabel:e=>e.tenChuThe?e.tenRutGon.concat(" - ",e.soTaiKhoan," - ",e.tenChuThe):"",renderInput:e=>(0,c.jsx)(o.Z,{...e,label:"T\xecm ki\u1ebfm"}),renderOption:(e,n)=>(0,c.jsx)("div",{children:(0,t.createElement)("li",{...e,key:""==n.id?0:n.id},""==n.id&&p&&(0,c.jsx)(l.Z,{sx:{color:"var(--color-main)"},variant:"outlined",startIcon:(0,c.jsx)(d.Z,{}),fullWidth:!0,onClick:g,children:"Th\xeam m\u1edbi"},0),""!=n.id&&(0,c.jsxs)(h.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[(0,c.jsx)(s.Z,{style:{fontSize:"14px",fontWeight:500},children:n.tenChuThe.toString().concat(" (","".concat(n.soTaiKhoan),")")}),(0,c.jsx)(r.Z,{component:"span",style:{fontWeight:500,color:"#acaca5",fontSize:"12px"},children:n.tenNganHang.toString().concat(" ".concat(n.maNganHang))})]},n.id))},""==n.id?0:n.id)})})}},83546:(e,n,a)=>{a.d(n,{Z:()=>d});var t=a(47313),i=a(48623),o=a(24631),l=a(9019),h=a(61113),s=a(9506),r=a(46417);function d(e){let{handleChoseItem:n,idChosed:a,dataNhanVien:d,label:c,helperText:u}=e;const[g,p]=(0,t.useState)(null);t.useEffect((()=>{const e=d.filter((e=>e.id==a));e.length>0?p(e[0]):p(null)}),[a]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Z,{size:"small",fullWidth:!0,disablePortal:!0,autoComplete:!0,multiple:!1,value:g,onChange:(e,a)=>{n(a)},filterOptions:e=>e,isOptionEqualToValue:(e,n)=>e.id===n.id,options:d,getOptionLabel:e=>e.tenNhanVien?e.tenNhanVien:"",renderInput:e=>(0,r.jsx)(o.Z,{...e,label:null!==c&&void 0!==c?c:"T\xecm ki\u1ebfm",helperText:u}),renderOption:(e,n)=>(0,r.jsx)("li",{...e,children:(0,r.jsx)(l.ZP,{container:!0,alignItems:"center",spacing:1,children:(0,r.jsxs)(l.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[(0,r.jsx)(h.Z,{style:{fontSize:"14px"},children:n.tenNhanVien}),(0,r.jsx)(s.Z,{component:"span",style:{fontWeight:500,color:"#acaca5",fontSize:"12px"},children:n.maNhanVien})]})})})})})}},61200:(e,n,a)=>{a.d(n,{Z:()=>A});var t=a(25002),i=a(9019),o=a(9506),l=a(24193),h=a(23208),s=a(36296),r=a(35200),d=a(64352),c=a(57779),u=a(47313),g=a(69551),p=a(89600),m=a(6021),x=a(56148),T=a(85825),v=a(99004),Z=a(59376),C=a(34605),y=a(41156),N=a(98589),j=a(54497),f=a(1603),D=a(90949),H=a(9519),w=a(26537),k=a(1711),b=a(52028),S=a(95352),P=a(80280),K=a(46417);function O(e){let{defaultVal:n,handleChangeDate:a,disable:t=!1}=e;const i=new Date,[o,l]=(0,u.useState)(new Date((0,p.Z)(i,"yyyy-MM-01")));return(0,u.useEffect)((()=>{P.Z.checkNull(n)?l(null):l(new Date(n))}),[n]),(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(h._,{dateAdapter:d.H,adapterLocale:b.Z,localeText:s.I.components.MuiLocalizationProvider.defaultProps.localeText,children:(0,K.jsx)(S.W,{value:o,sx:{width:"240px","& .MuiPickersCalendarHeader-label":{fontSize:"13px"},"& .MuiPickersDay-root":{width:"32px",height:"32px"}},onChange:e=>{var n;n=e,"Invalid Date"!==new Date(n).toString()&&(a((0,p.Z)(new Date(n),"yyyy-MM-dd")),l(n))},disabled:t,dayOfWeekFormatter:e=>P.Z.Mui_GetDayOfWeekFormatter(e)})})})}function M(e){let{defaultVal:n,handleChangeDate:a,label:t,disabled:i}=e;const o=new Date,[l,g]=(0,u.useState)(new Date((0,p.Z)(o,"yyyy-MM-01")));return(0,u.useEffect)((()=>{P.Z.checkNull(n)?g(null):g(new Date(n))}),[n]),(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(h._,{dateAdapter:d.H,adapterLocale:b.Z,localeText:s.I.components.MuiLocalizationProvider.defaultProps.localeText,children:(0,K.jsx)(r.N,{label:null!==t&&void 0!==t?t:"",value:l,disabled:null!==i&&void 0!==i&&i,onChange:e=>(e=>{"Invalid Date"!==new Date(e).toString()&&(a((0,p.Z)(new Date(e),"yyyy-MM-dd")),g(e))})(e),slotProps:{textField:{size:"small",fullWidth:!0,InputProps:{startAdornment:(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(c.r,{style:{marginRight:"8px"}})})}}}})})})}function A(e){let{id:n,open:a,anchorEl:h,onClose:s,onApplyDate:r,isFuture:d=0,dateTypeDefault:c}=e;const b=new Date,[S,P]=(0,u.useState)("Th\xe1ng n\xe0y"),[A,F]=(0,u.useState)(g.Uv.THANG_NAY),[L,E]=(0,u.useState)(!0),[_,I]=(0,u.useState)((0,m.Z)(new Date(b))),[U,V]=(0,u.useState)((0,x.Z)(new Date(b))),W=d?g.ZP.ListDateType.filter((e=>![g.Uv.HOM_QUA,g.Uv.TUAN_TRUOC,g.Uv.THANG_TRUOC,g.Uv.QUY_TRUOC,g.Uv.NAM_TRUOC].includes(e.id))):g.ZP.ListDateType.filter((e=>![g.Uv.NGAY_MAI,g.Uv.TUAN_NAY,g.Uv.TUAN_TRUOC,g.Uv.TUAN_TOI,g.Uv.THANG_TOI].includes(e.id)));(0,u.useEffect)((()=>{void 0!==c&&F(c)}),[c]);const z=e=>{I(new Date(e))},G=e=>{V(new Date(e))};return(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(t.ZP,{id:null!==n&&void 0!==n?n:"popover-date-filter",open:a,anchorEl:h,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,K.jsx)("div",{style:{width:"690px"},children:(0,K.jsxs)(i.ZP,{container:!0,spacing:2,padding:"16px",children:[(0,K.jsx)(i.ZP,{item:!0,xs:3,children:(0,K.jsx)(o.Z,{display:"flex",flexDirection:"column",borderRight:"1px solid #EEF0F4",children:W.map((e=>(0,K.jsx)(l.Z,{fullWidth:!0,sx:{justifyContent:"left",color:"#525F7A",backgroundColor:e.id==A?"var(--color-bg)":""},onClick:()=>{(async e=>{switch(F(e.id),P(e.text),E(!0),e.id){case g.Uv.HOM_NAY:I(b),V(b);break;case g.Uv.HOM_QUA:{const e=(0,T.Z)(b,1);I(e),V(e)}break;case g.Uv.NGAY_MAI:{const e=(0,v.Z)(b,1);I(e),V(e)}break;case g.Uv.TUAN_NAY:I((0,Z.Z)(b,{weekStartsOn:1})),V((0,C.Z)(b,{weekStartsOn:1}));break;case g.Uv.TUAN_TRUOC:{const e=(0,T.Z)(b,7);I((0,Z.Z)(e,{weekStartsOn:1})),V((0,C.Z)(e,{weekStartsOn:1}))}break;case g.Uv.TUAN_TOI:{const e=(0,v.Z)(b,7);I((0,Z.Z)(e,{weekStartsOn:1})),V((0,C.Z)(e,{weekStartsOn:1}))}break;case g.Uv.THANG_NAY:I((0,y.Z)(b)),V((0,N.Z)(b));break;case g.Uv.THANG_TRUOC:{const e=(0,T.Z)((0,y.Z)(b),1);I((0,y.Z)(e)),V((0,N.Z)(e))}break;case g.Uv.THANG_TOI:{const e=(0,v.Z)((0,y.Z)(b),1);I((0,y.Z)(e)),V((0,N.Z)(e))}break;case g.Uv.QUY_NAY:I((0,j.Z)(b)),V((0,f.Z)(b));break;case g.Uv.QUY_TRUOC:{const e=(0,D.Z)(b,1);I((0,y.Z)(e)),V((0,N.Z)(e))}break;case g.Uv.NAM_NAY:I((0,H.Z)(b)),V((0,w.Z)(b));break;case g.Uv.NAM_TRUOC:{const e=(0,k.Z)(b,1);I((0,H.Z)(e)),V((0,w.Z)(e))}break;case g.Uv.TAT_CA:{const e=new Date("2023-01-01");I(e),V((0,x.Z)(b))}break;case g.Uv.TUY_CHON:E(!1)}})(e)},children:e.text},e.id)))})}),(0,K.jsx)(i.ZP,{item:!0,xs:9,children:(0,K.jsxs)(i.ZP,{item:!0,container:!0,spacing:2,children:[(0,K.jsxs)(i.ZP,{item:!0,xs:6,children:[(0,K.jsx)(M,{disabled:L,defaultVal:_,handleChangeDate:z}),(0,K.jsx)(O,{defaultVal:_,handleChangeDate:z,disable:L})]}),(0,K.jsxs)(i.ZP,{item:!0,xs:6,children:[(0,K.jsx)(M,{disabled:L,defaultVal:U,handleChangeDate:G}),(0,K.jsx)(O,{defaultVal:U,handleChangeDate:G,disable:L})]}),(0,K.jsxs)(i.ZP,{item:!0,xs:12,display:"flex",justifyContent:"end",gap:"8px",alignItems:"end",paddingTop:"22px !important",borderTop:"1px solid #EEF0F4",children:[(0,K.jsx)(l.Z,{variant:"outlined",sx:{color:"#525F7A",border:"1px solid #C2C9D6"},onClick:s,children:"H\u1ee7y"}),(0,K.jsx)(l.Z,{variant:"contained",onClick:async()=>{if(null!=_&&null!=U){const e=(0,p.Z)(_,"yyyy-MM-dd"),n=(0,p.Z)(U,"yyyy-MM-dd");r(e,n,A,S)}},children:"\xc1p d\u1ee5ng"})]})]})})]})})})})}},47699:(e,n,a)=>{a.r(n),a.d(n,{default:()=>me});var t=a(9506),i=a(9019),o=a(24631),l=a(47131),h=a(35898),s=a(24193),r=a(47313),d=a(64247),c=a(94469),u=a(33604),g=a(96467),p=a(83929),m=a(74268),x=a(16429),T=a(44758),v=a(26417),Z=a(2538),C=a(7410),y=a(62870),N=a(95104),j=a(12731),f=a(82739),D=a(80280),H=a(4031),w=a(48623),k=a(61113),b=a(90937),S=a(88706),P=a(48041),K=a(85905),O=a(46417);function M(e){let{idChosed:n,handleChoseItem:a,helperText:l="",err:h=!1}=e;const[s,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),[g,p]=(0,r.useState)({keyword:"",loaiDoiTuong:1,maxResultCount:50,skipCount:0,sortBy:"",sortType:""}),m=(0,r.useRef)((0,S.Z)((async e=>{const n=await P.Z.jqAutoCustomer(e);d(n)}),500)).current;r.useEffect((()=>{m(g)}),[g.keyword]),r.useEffect((()=>{(async()=>{if(D.Z.checkNull(n)||n===K.i.EMPTY)u((()=>null));else{const e=await P.Z.getKhachHang(n);u(e)}})()}),[n]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(w.Z,{size:"small",fullWidth:!0,disablePortal:!0,autoComplete:!0,multiple:!1,value:c,onChange:(e,n)=>{a(n)},onInputChange:(e,n)=>{(e=>{p({...g,keyword:e})})(n)},filterOptions:e=>e,options:s,getOptionLabel:e=>e.tenKhachHang?e.tenKhachHang:"",renderInput:e=>(0,O.jsx)(o.Z,{...e,label:"T\xecm ki\u1ebfm",helperText:l,error:h}),renderOption:(e,n)=>(0,r.createElement)("li",{...e,key:n.id,style:{borderBottom:"1px dashed var(--border-color)"}},(0,O.jsxs)(i.ZP,{container:!0,alignItems:"center",children:[(0,O.jsx)(i.ZP,{item:!0,sx:{display:"flex",width:44},children:(0,O.jsx)(b.Z,{sx:{color:"text.secondary"}})}),(0,O.jsxs)(i.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[(0,O.jsx)(k.Z,{style:{fontSize:"13px"},children:n.tenKhachHang}),(0,O.jsx)(t.Z,{component:"span",style:{fontWeight:500,color:"#acaca5",fontSize:"12px"},children:n.soDienThoai})]})]}))})})}var A=a(27458),F=a(6396),L=a(21933),E=a(89600),_=a(69551),I=a(2447),U=a(45682),V=a(83546),W=a(87068),z=a(93857),G=a(4117),R=a(11198),q=a(13882);function B(e){let{handleChoseItem:n,idChosed:a,listOption:t}=e;const[l,h]=(0,r.useState)(null);r.useEffect((()=>{const e=t.filter((e=>e.id==a));e.length>0?h(e[0]):h(null)}),[a]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(w.Z,{size:"small",fullWidth:!0,disablePortal:!0,autoComplete:!0,multiple:!1,value:l,onChange:(e,a)=>{n(a)},filterOptions:e=>e,isOptionEqualToValue:(e,n)=>e.id===n.id,options:t,getOptionLabel:e=>e.tenNganHang?e.tenNganHang:"",renderInput:e=>(0,O.jsx)(o.Z,{...e,label:"T\xecm ki\u1ebfm"}),renderOption:(e,n)=>(0,O.jsx)(O.Fragment,{children:(0,O.jsx)("li",{...e,children:""!=n.id&&(0,O.jsxs)(i.ZP,{container:!0,alignItems:"center",children:[(0,O.jsx)(i.ZP,{item:!0,sx:{display:"flex",width:44},children:(0,O.jsx)(b.Z,{sx:{color:"text.secondary"}})}),(0,O.jsx)(i.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:(0,O.jsx)(k.Z,{style:{fontSize:"14px"},children:n.tenNganHang})})]})})})})})}(0,A.Z)({components:{MuiFormControl:{styleOverrides:{root:{minWidth:"100%"}}}}});const Q=e=>{let{show:n=!1,idTaiKhoanNganHang:a=null,onClose:l,onOk:h}=e;const[d,p]=(0,r.useState)([]),[m,x]=(0,r.useState)({id:"",idNganHang:"",tenChuThe:"",soTaiKhoan:""}),[T,v]=(0,r.useState)({show:!1,title:"",type:1,mes:""}),Z=L.Ry().shape({tenChuThe:L.Z_().required("Vui l\xf2ng nh\u1eadp t\xean ch\u1ee7 th\u1ebb"),soTaiKhoan:L.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 t\xe0i kho\u1ea3n"),idNganHang:L.Z_().required("Vui l\xf2ng ch\u1ecdn ng\xe2n h\xe0ng")}),y=()=>{(async()=>{const e=await q.Z.GetAllBank();null!=e&&p(e.items)})()};(0,r.useEffect)((()=>{y()}),[]),(0,r.useEffect)((()=>{D.Z.checkNull(a)?x({...m,id:K.i.create().toString(),idNganHang:"",soTaiKhoan:"",tenChuThe:"",ghiChu:""}):n&&console.log(2)}),[n]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(W.Z,{isShow:T.show,title:T.title,mes:T.mes,onOk:()=>{console.log(1)},onCancel:()=>v({...T,show:!1})}),(0,O.jsxs)(c.Z,{open:n,fullWidth:!0,maxWidth:"sm",onClose:l,children:[(0,O.jsx)(u.Z,{children:(0,O.jsxs)("div",{className:"row",children:[(0,O.jsxs)(t.Z,{className:"col-8",sx:{float:"left"},children:[D.Z.checkNull(a)?"Th\xeam m\u1edbi":"C\u1eadp nh\u1eadt"," t\xe0i kho\u1ea3n ng\xe2n h\xe0ng"]}),(0,O.jsx)(t.Z,{className:"col-4",sx:{float:"right","& svg:hover":{filter:"brightness(0) saturate(100%) invert(36%) sepia(74%) saturate(1465%) hue-rotate(318deg) brightness(94%) contrast(100%)"}},children:(0,O.jsx)(R.Z,{style:{float:"right",height:"24px",cursor:"pointer"},onClick:l})})]})}),(0,O.jsx)(g.Z,{children:(0,O.jsx)(C.J9,{initialValues:m,validationSchema:Z,onSubmit:async()=>{const e=await q.Z.CreateOrEditBankAccount(m);x({...m,id:e.id});const n={...m};n.id=e.id,h(n)},enableReinitialize:!0,children:e=>{var n,t,h;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(C.l0,{children:[(0,O.jsxs)(i.ZP,{container:!0,rowGap:1,columnSpacing:2,children:[(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)("span",{className:"modal-lable",children:"Ng\xe2n h\xe0ng "})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,sx:{"& label":{display:"none"},"& legend":{display:"none"}},children:(0,O.jsx)(B,{idChosed:null===m||void 0===m?void 0:m.idNganHang,listOption:d,handleChoseItem:n=>{var a;e.setFieldValue("idNganHang",null!==(a=null===n||void 0===n?void 0:n.id)&&void 0!==a?a:null),x({...m,idNganHang:null===n||void 0===n?void 0:n.id,tenNganHang:null===n||void 0===n?void 0:n.tenNganHang})},error:e.touched.idNganHang&&Boolean(null===(n=e.errors)||void 0===n?void 0:n.idNganHang),helperText:e.touched.idNganHang&&e.errors.idNganHang})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)("span",{className:"modal-lable",children:"T\xean ch\u1ee7 th\u1ebb "})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(o.Z,{fullWidth:!0,size:"small",value:null===m||void 0===m?void 0:m.tenChuThe,helperText:e.touched.tenChuThe&&e.errors.tenChuThe,error:e.touched.tenChuThe&&Boolean(null===(t=e.errors)||void 0===t?void 0:t.tenChuThe),onChange:n=>{e.setFieldValue("tenChuThe",n.target.value),x({...m,tenChuThe:n.target.value})}})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)("span",{className:"modal-lable",children:"S\u1ed1 t\xe0i kho\u1ea3n"})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(o.Z,{fullWidth:!0,size:"small",value:null===m||void 0===m?void 0:m.soTaiKhoan,error:e.touched.soTaiKhoan&&Boolean(null===(h=e.errors)||void 0===h?void 0:h.soTaiKhoan),helperText:e.touched.soTaiKhoan&&e.errors.soTaiKhoan,onChange:n=>{e.setFieldValue("soTaiKhoan",n.target.value),x({...m,soTaiKhoan:n.target.value})}})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)("span",{className:"modal-lable",children:"Ghi ch\xfa"})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(o.Z,{size:"small",multiline:!0,rows:3,fullWidth:!0,value:null===m||void 0===m?void 0:m.ghiChu,onChange:e=>x({...m,ghiChu:e.target.value})})})]}),(0,O.jsxs)(G.Z,{children:[(0,O.jsx)(s.Z,{variant:"contained",className:"btn-container-hover",type:"submit",disabled:e.isSubmitting,children:"L\u01b0u"}),!D.Z.checkNull(a)&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(s.Z,{variant:"contained",sx:{bgcolor:"red"},className:"btn-container-hover",onClick:()=>{v(new z.tf({show:!0,title:"X\xe1c nh\u1eadn x\xf3a",mes:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a t\xe0i kho\u1ea3n ".concat(m.tenChuThe," kh\xf4ng?")}))},children:"X\xf3a"})}),(0,O.jsx)(s.Z,{variant:"outlined",sx:{color:"var(--color-main)"},className:"btn-outline-hover",onClick:l,children:"H\u1ee7y"})]})]})})}})})]})]})};var Y=a(69682);const X=(0,A.Z)({components:{MuiFormControl:{styleOverrides:{root:{minWidth:"100%"}}}}}),J=e=>{let{visiable:n=!1,idQuyHD:a=null,onClose:l,onOk:d}=e;const w=[{value:1,text:"Kh\xe1ch h\xe0ng"},{value:3,text:"Nh\xe2n vi\xean"}],k=((0,r.useRef)(),(0,r.useContext)(I.Il).chinhanhCurrent),[b,S]=(0,r.useState)(""),[P,A]=(0,r.useState)([]),[G,R]=(0,r.useState)([]),[B,J]=(0,r.useState)({show:!1,title:"",type:1,mes:""}),[$,ee]=(0,r.useState)({show:!1,type:1,mes:""}),[ne,ae]=(0,r.useState)(!1),[te,ie]=(0,r.useState)(new j.Z({id:K.i.create().toString(),idChiNhanh:k.id,idLoaiChungTu:11,tongTienThu:0,idDoiTuongNopTien:null,hinhThucThanhToan:1,hachToanKinhDoanh:!0,ngayLapHoaDon:(0,E.Z)(new Date,"yyyy-MM-dd HH:mm")})),oe=11===(null===te||void 0===te?void 0:te.idLoaiChungTu)?"thu":"chi",le=()=>{(async()=>{const e=await U.Z.getAll({skipCount:0,maxResultCount:100});A(e.items)})(),(async()=>{const e=await q.Z.GetAllBankAccount();null!=e&&R(e)})()};(0,r.useEffect)((()=>{le()}),[]),(0,r.useEffect)((()=>{D.Z.checkNull(a)?ie({...te,id:K.i.create().toString(),idChiNhanh:k.id,idLoaiChungTu:11,tongTienThu:0,idDoiTuongNopTien:null,maHoaDon:"",loaiDoiTuong:1,ngayLapHoaDon:(0,E.Z)(new Date,"yyyy-MM-dd HH:mm"),noiDungThu:"",hinhThucThanhToan:1,idKhoanThuChi:null,idTaiKhoanNganHang:null,hachToanKinhDoanh:!0}):n&&(async()=>{if(D.Z.checkNull(a))return;const e=await f.Z.GetInforQuyHoaDon_byId(null!==a&&void 0!==a?a:"");if(null!==e){const a=e.quyHoaDon_ChiTiet;var n,t,i,o;void 0!==a&&(null===a||void 0===a?void 0:a.length)>0&&ie({...te,id:e.id,idChiNhanh:e.idChiNhanh,idLoaiChungTu:e.idLoaiChungTu,ngayLapHoaDon:e.ngayLapHoaDon,maHoaDon:e.maHoaDon,noiDungThu:e.noiDungThu,tongTienThu:e.tongTienThu,hachToanKinhDoanh:e.hachToanKinhDoanh,loaiDoiTuong:null!=(null===(n=a[0])||void 0===n?void 0:n.idNhanVien)?3:1,idDoiTuongNopTien:null!=(null===(t=a[0])||void 0===t?void 0:t.idNhanVien)?null===(i=a[0])||void 0===i?void 0:i.idNhanVien:null===(o=a[0])||void 0===o?void 0:o.idKhachHang,hinhThucThanhToan:a[0].hinhThucThanhToan,idKhoanThuChi:a[0].idKhoanThuChi,idTaiKhoanNganHang:a[0].idTaiKhoanNganHang,quyHoaDon_ChiTiet:a})}})()}),[n]);(0,r.useEffect)((()=>{ie({...te,loaiPhieu:11===te.idLoaiChungTu?"Phi\u1ebfu thu":"Phi\u1ebfu chi"})}),[te.idLoaiChungTu]),(0,r.useEffect)((()=>{var e;ie({...te,sHinhThucThanhToan:null===(e=_.ZP.hinhThucThanhToan.filter((e=>e.value===te.hinhThucThanhToan))[0])||void 0===e?void 0:e.text})}),[te.hinhThucThanhToan]);const he=L.Ry().shape({hinhThucThanhToan:L.Rx(),maHoaDon:L.Z_().test("maHoaDon","M\xe3 phi\u1ebfu \u0111\xe3 t\u1ed3n t\u1ea1i",(async()=>{if(!D.Z.checkNull(null===te||void 0===te?void 0:te.maHoaDon)){var e;return!await f.Z.CheckExistsMaPhieuThuChi(null!==(e=null===te||void 0===te?void 0:te.maHoaDon)&&void 0!==e?e:"",a)}return!0})),tongTienThu:L.Rx().transform(((e,n)=>D.Z.formatNumberToFloat(n))).notOneOf([0],"T\u1ed5ng ti\u1ec1n ph\u1ea3i > 0").required("Vui l\xf2ng nh\u1eadp s\u1ed1 ti\u1ec1n"),idDoiTuongNopTien:L.Z_().required("Vui l\xf2ng ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng n\u1ed9p ti\u1ec1n")});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(W.Z,{isShow:B.show,title:B.title,mes:B.mes,onOk:()=>{J({...B,show:!1}),d(te,3)},onCancel:()=>J({...B,show:!1})}),(0,O.jsx)(Q,{show:ne,onClose:()=>{ae(!1)},onOk:e=>{ie({...te,idTaiKhoanNganHang:e.id,tenNganHang:e.tenNganHang,tenChuThe:e.tenChuThe}),ae(!1),R([e,...G]),ee({show:!0,type:1,mes:"Th\xeam t\xe0i kho\u1ea3n ng\xe2n h\xe0ng th\xe0nh c\xf4ng"})}}),(0,O.jsxs)(c.Z,{open:n,fullWidth:!0,maxWidth:"sm",onClose:l,children:[(0,O.jsxs)(u.Z,{children:[(0,O.jsxs)(t.Z,{className:"modal-title",sx:{float:"left"},children:[D.Z.checkNull(a)?"Th\xeam m\u1edbi":"C\u1eadp nh\u1eadt"," s\u1ed5 qu\u1ef9"]}),(0,O.jsx)(t.Z,{className:"col-4",sx:{float:"right","& svg:hover":{filter:"brightness(0) saturate(100%) invert(36%) sepia(74%) saturate(1465%) hue-rotate(318deg) brightness(94%) contrast(100%)"}},children:(0,O.jsx)(v.r,{style:{float:"right",height:"24px",cursor:"pointer"},onClick:l})})]}),(0,O.jsx)(g.Z,{children:(0,O.jsx)(C.J9,{initialValues:te,validationSchema:he,onSubmit:async()=>{const e={...te},n=3==te.loaiDoiTuong?null:te.idDoiTuongNopTien,t=3==te.loaiDoiTuong?te.idDoiTuongNopTien:null;if(D.Z.checkNull(a)){const a=new N.Z({idKhachHang:n,hinhThucThanhToan:te.hinhThucThanhToan,tienThu:te.tongTienThu,idNhanVien:t,idKhoanThuChi:te.idKhoanThuChi,idTaiKhoanNganHang:te.idTaiKhoanNganHang});e.quyHoaDon_ChiTiet=[a];const i=await f.Z.CreateQuyHoaDon(e);te.id=i.id,te.maHoaDon=i.maHoaDon,te.txtTrangThai="\u0110\xe3 thanh to\xe1n",d(te,1)}else{var i;e.quyHoaDon_ChiTiet=null===(i=te.quyHoaDon_ChiTiet)||void 0===i?void 0:i.map((e=>({id:e.id,idQuyHoaDon:e.idQuyHoaDon,idKhachHang:n,hinhThucThanhToan:te.hinhThucThanhToan,tienThu:te.tongTienThu,idNhanVien:t,idKhoanThuChi:te.idKhoanThuChi,diemThanhToan:e.diemThanhToan,chiPhiNganHang:e.chiPhiNganHang,idTaiKhoanNganHang:te.idTaiKhoanNganHang,laPTChiPhiNganHang:e.laPTChiPhiNganHang,thuPhiTienGui:e.thuPhiTienGui})));const a=await f.Z.UpdateQuyHoaDon(e);te.id=a.id,te.maHoaDon=a.maHoaDon,te.txtTrangThai="\u0110\xe3 thanh to\xe1n",d(te,2)}},enableReinitialize:!0,children:e=>{var n,t,r,d,c;return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(C.l0,{onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()},children:(0,O.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,O.jsxs)(i.ZP,{item:!0,xs:12,sm:12,lg:12,children:[(0,O.jsx)(p.Z,{value:"end",control:(0,O.jsx)(m.Z,{color:"secondary",value:11,checked:11===te.idLoaiChungTu,onChange:()=>ie({...te,idLoaiChungTu:11})}),label:"Phi\u1ebfu thu"}),(0,O.jsx)(p.Z,{value:"end",control:(0,O.jsx)(m.Z,{color:"secondary",name:"idLoaiChungTu",value:12,checked:12===te.idLoaiChungTu,onChange:()=>ie({...te,idLoaiChungTu:12})}),label:"Phi\u1ebfu chi"})]}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(F.Z,{theme:X,children:(0,O.jsx)(H.Z,{defaultVal:te.ngayLapHoaDon,labelText:"Ng\xe0y l\u1eadp phi\u1ebfu",handleChangeDate:n=>{e.setFieldValue("ngayLapHoaDon",n),ie({...te,ngayLapHoaDon:n})},helperText:e.touched.idDoiTuongNopTien&&e.errors.idDoiTuongNopTien})})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(o.Z,{size:"small",fullWidth:!0,label:"M\xe3 phi\u1ebfu",value:te.maHoaDon,onChange:n=>{e.setFieldValue("maHoaDon",n.target.value),ie({...te,maHoaDon:n.target.value})},helperText:e.touched.maHoaDon&&e.errors.maHoaDon})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(Z.Z,{label:"H\xecnh th\u1ee9c",data:_.ZP.hinhThucThanhToan,idChosed:null===te||void 0===te?void 0:te.hinhThucThanhToan,handleChange:e=>ie({...te,hinhThucThanhToan:e.value})})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(Z.Z,{label:"\u0110\u1ed1i t\u01b0\u1ee3ng n\u1ed9p",data:w,idChosed:null===te||void 0===te?void 0:te.loaiDoiTuong,handleChange:e=>ie({...te,loaiDoiTuong:e.value})})}),(0,O.jsxs)(i.ZP,{item:!0,xs:12,sm:6,children:[3!==te.loaiDoiTuong&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(M,{idChosed:null===te||void 0===te?void 0:te.idDoiTuongNopTien,handleChoseItem:n=>{var a;e.setFieldValue("idDoiTuongNopTien",null!==(a=null===n||void 0===n?void 0:n.id)&&void 0!==a?a:null),ie({...te,idDoiTuongNopTien:null===n||void 0===n?void 0:n.id,maNguoiNop:null===n||void 0===n?void 0:n.maKhachHang,tenNguoiNop:null===n||void 0===n?void 0:n.tenKhachHang})},error:e.touched.idDoiTuongNopTien&&Boolean(null===(n=e.errors)||void 0===n?void 0:n.idDoiTuongNopTien),helperText:e.touched.idDoiTuongNopTien&&e.errors.idDoiTuongNopTien})}),3===te.loaiDoiTuong&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(V.Z,{idChosed:null===te||void 0===te?void 0:te.idDoiTuongNopTien,dataNhanVien:P,handleChoseItem:n=>{var a;e.setFieldValue("idDoiTuongNopTien",null!==(a=null===n||void 0===n?void 0:n.id)&&void 0!==a?a:null),ie({...te,idDoiTuongNopTien:null===n||void 0===n?void 0:n.id,maNguoiNop:null===n||void 0===n?void 0:n.maNhanVien,tenNguoiNop:null===n||void 0===n?void 0:n.tenNhanVien})},error:e.touched.idDoiTuongNopTien&&Boolean(null===(t=e.errors)||void 0===t?void 0:t.idDoiTuongNopTien),helperText:e.touched.idDoiTuongNopTien&&e.errors.idDoiTuongNopTien})})]}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(y.h3,{fullWidth:!0,size:"small",name:"tongTienThu",label:"Ti\u1ec1n ".concat(oe),thousandSeparator:".",decimalSeparator:",",value:null===te||void 0===te?void 0:te.tongTienThu,customInput:o.Z,onChange:n=>{e.setFieldValue("tongTienThu",n.target.value),ie({...te,tongTienThu:D.Z.formatNumberToFloat(n.target.value)})},error:(null===(r=e.touched)||void 0===r?void 0:r.tongTienThu)&&Boolean(null===(d=e.errors)||void 0===d?void 0:d.tongTienThu),helperText:e.touched.tongTienThu&&e.errors.tongTienThu})}),0===(null===te||void 0===te?void 0:te.hinhThucThanhToan)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsxs)("span",{className:"modal-lable",children:["T\xe0i kho\u1ea3n ",oe," "]})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(Y.Z,{listOption:G,idChosed:te.idTaiKhoanNganHang,handleClickBtnAdd:()=>ae(!0),handleChoseItem:n=>{var a;e.setFieldValue("idTaiKhoanNganHang",null!==(a=null===n||void 0===n?void 0:n.id)&&void 0!==a?a:null),ie({...te,idTaiKhoanNganHang:null===n||void 0===n?void 0:n.id,tenNganHang:n.tenNganHang,tenChuThe:n.tenChuThe})},error:e.touched.idTaiKhoanNganHang&&Boolean(null===(c=e.errors)||void 0===c?void 0:c.idTaiKhoanNganHang),helperText:e.touched.idTaiKhoanNganHang&&e.errors.idTaiKhoanNganHang})})]}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(o.Z,{size:"small",multiline:!0,rows:3,fullWidth:!0,label:"N\u1ed9i dung ".concat(oe),value:null===te||void 0===te?void 0:te.noiDungThu,onChange:e=>ie({...te,noiDungThu:e.target.value})})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,style:{display:"none"},children:(0,O.jsx)(x.Z,{children:(0,O.jsx)(p.Z,{value:"end",control:(0,O.jsx)(T.Z,{name:"ckHachToanKinhDoanh",checked:!0===te.hachToanKinhDoanh,onChange:e=>{ie({...te,hachToanKinhDoanh:e.target.checked})},value:"true",sx:{color:"#7C3367!important"}}),label:"H\u1ea1ch to\xe1n v\xe0o k\u1ebft qu\u1ea3 ho\u1ea1t \u0111\u1ed9ng kinh doanh"})})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,children:(0,O.jsxs)(h.Z,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,O.jsx)(s.Z,{variant:"outlined",sx:{color:"var(--color-main)"},className:"btn-outline-hover",onClick:l,children:"H\u1ee7y"}),e.isSubmitting?e.isSubmitting&&(0,O.jsx)(s.Z,{variant:"contained",sx:{bgcolor:"#7C3367"},className:"btn-container-hover",type:"submit",children:"\u0110ang l\u01b0u"}):(0,O.jsx)(s.Z,{variant:"contained",sx:{bgcolor:"#7C3367"},className:"btn-container-hover",type:"submit",children:"L\u01b0u"}),!D.Z.checkNull(a)&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(s.Z,{variant:"contained",sx:{bgcolor:"red"},className:"btn-container-hover",onClick:()=>{var e,n;J(new z.tf({show:!0,title:"X\xe1c nh\u1eadn x\xf3a",mes:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ".concat(null!==(e=null===te||void 0===te?void 0:te.loaiPhieu)&&void 0!==e?e:" ","  ").concat(null!==(n=null===te||void 0===te?void 0:te.maHoaDon)&&void 0!==n?n:" "," kh\xf4ng?")}))},children:"X\xf3a"})})]})})]})})})}})})]})]})};var $=a(46734),ee=a(33859),ne=a(41202),ae=a(40225),te=a(88200),ie=a(35045),oe=a(2040),le=a(68186),he=a(66185),se=a(14881),re=a(65231),de=a(70894),ce=a(12757),ue=a(22639),ge=a(65296),pe=a(61200);const me=e=>{var n,a,c;let{xx:u}=e;const g=new Date,p=(0,r.useRef)(!0),m=(0,r.useContext)(I.Il),x=m.chinhanhCurrent,[T,v]=(0,r.useState)(!1),[Z,C]=(0,r.useState)(!1),[y,N]=(0,r.useState)(""),[j,H]=(0,r.useState)({show:!1,title:"",type:1,mes:""}),[w,k]=(0,r.useState)({show:!1,type:1,mes:""}),[b,S]=(0,r.useState)({textSearch:"",currentPage:1,columnSort:"ngayLapHoaDon",typeSort:"desc",idChiNhanhs:""===x.id?[]:[x.id],fromDate:(0,E.Z)(g,"yyyy-MM-01"),toDate:(0,E.Z)((0,ne.Z)(g),"yyyy-MM-dd")}),[P,K]=(0,r.useState)({totalCount:0,totalPage:0,items:[]}),[M,A]=(0,r.useState)([{field:"ngayLapHoaDon",sort:"desc"}]),[F,L]=(0,r.useState)([]),_=async()=>{const e=await f.Z.getAll(b);K({totalCount:e.totalCount,totalPage:D.Z.getTotalPage(e.totalCount,b.pageSize),items:e.items})};(0,r.useEffect)((()=>{_()}),[]),(0,r.useEffect)((()=>{S({...b,idChiNhanhs:""===x.id?[]:[x.id]})}),[x.id]),(0,r.useEffect)((()=>{p.current?p.current=!1:_()}),[b.currentPage,b.pageSize,b.fromDate,b.toDate,b.idChiNhanhs,b.columnSort,b.typeSort]);const U=()=>{1!==b.currentPage?S({...b,currentPage:1}):_()},V=async()=>{if(F.length>0){await f.Z.DeleteMultiple_QuyHoaDon(F)?(k({show:!0,type:1,mes:"H\u1ee7y ".concat(F.length," s\u1ed5 qu\u1ef9 th\xe0nh c\xf4ng")}),K({...P,items:P.items.filter((e=>!F.toString().includes(e.id))),totalCount:P.totalCount-F.length,totalPage:D.Z.getTotalPage(P.totalCount-F.length,b.pageSize)}),L([])):k({show:!0,type:2,mes:"H\u1ee7y ".concat(F.length," s\u1ed5 qu\u1ef9 th\u1ea5t b\u1ea1i")})}else await f.Z.DeleteSoQuy(y),K({...P,items:P.items.filter((e=>e.id!==y)),totalCount:P.totalCount-1,totalPage:D.Z.getTotalPage(P.totalCount-1,b.pageSize)}),k({show:!0,type:1,mes:"H\u1ee7y th\xe0nh c\xf4ng"});H(new z.tf({show:!1,title:"",mes:""}))},[G,R]=(0,r.useState)(null),q=Boolean(G),B=[{field:"loaiPhieu",headerName:"Lo\u1ea1i phi\u1ebfu",flex:.8,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,width:"100%",children:e.value})},{field:"maHoaDon",headerName:"M\xe3 phi\u1ebfu",minWidth:118,flex:.8,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.value})},{field:"ngayLapHoaDon",headerName:"Ng\xe0y l\u1eadp",headerAlign:"center",minWidth:118,flex:1,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,width:"100%",textAlign:"center",children:(0,E.Z)(new Date(e.value),"dd/MM/yyyy HH:mm")})},{field:"tenNguoiNop",headerName:"Ng\u01b0\u1eddi n\u1ed9p",flex:1.5,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.value})},{field:"tongTienThu",headerName:"T\u1ed5ng ti\u1ec1n",headerAlign:"right",minWidth:118,flex:1,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,width:"100%",textAlign:"end",children:new Intl.NumberFormat("vi-VN").format(e.value)})},{field:"sHinhThucThanhToan",headerName:"H\xecnh th\u1ee9c",minWidth:150,flex:1.2,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,width:"100%",children:e.value})},{field:"txtTrangThai",headerName:"Tr\u1ea1ng th\xe1i",headerAlign:"center",minWidth:118,flex:1,renderHeader:e=>(0,O.jsx)(t.Z,{title:e.value,children:e.colDef.headerName}),renderCell:e=>(0,O.jsx)(t.Z,{title:e.value,sx:{padding:"4px 8px",borderRadius:"100px",backgroundColor:"\u0110\xe3 thanh to\xe1n"===e.value?"#E8FFF3":"Ch\u01b0a thanh to\xe1n"===e.value?"#FFF8DD":"#FFF5F8",color:"\u0110\xe3 thanh to\xe1n"===e.value?"#50CD89":"Ch\u01b0a thanh to\xe1n"===e.value?"#FF9900":"#F1416C",margin:"auto"},className:"state-thanh-toan",children:e.value})},{field:"actions",headerName:"#",headerAlign:"center",width:48,flex:.4,disableColumnMenu:!0,renderCell:e=>(0,O.jsx)(te.Z,{handleAction:n=>((e,n)=>{var a,t;N(null===n||void 0===n?void 0:n.id),e<2?(console.log("itemSQ ",n),D.Z.checkNull(null===n||void 0===n?void 0:n.idBrandname)?D.Z.checkNull(null===n||void 0===n?void 0:n.idHoaDonLienQuan)&&v(!0):C(!0)):H(new z.tf({show:!0,title:"X\xe1c nh\u1eadn x\xf3a",mes:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ".concat(null!==(a=null===n||void 0===n?void 0:n.loaiPhieu)&&void 0!==a?a:" ","  ").concat(null!==(t=null===n||void 0===n?void 0:n.maHoaDon)&&void 0!==t?t:" "," kh\xf4ng?")}))})(n,e.row)}),renderHeader:e=>(0,O.jsx)(t.Z,{component:"span",children:e.colDef.headerName})}];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(J,{onClose:()=>{v(!1)},onOk:async(e,n)=>{switch(v(!1),n){case 1:e.ngayLapHoaDon=new Date(e.ngayLapHoaDon),K({...P,items:[e,...P.items],totalCount:P.totalCount+1,totalPage:D.Z.getTotalPage(P.totalCount+1,b.pageSize)}),k({show:!0,type:1,mes:"Th\xeam "+e.loaiPhieu+" th\xe0nh c\xf4ng"});break;case 2:K({...P,items:P.items.map((n=>n.id===y?{...n,maHoaDon:e.maHoaDon,ngayLapHoaDon:e.ngayLapHoaDon,idLoaiChungTu:e.idLoaiChungTu,loaiPhieu:e.loaiPhieu,hinhThucThanhToan:e.hinhThucThanhToan,sHinhThucThanhToan:e.sHinhThucThanhToan,tongTienThu:e.tongTienThu,maNguoiNop:e.maNguoiNop,tenNguoiNop:e.tenNguoiNop,idKhoanThuChi:e.idKhoanThuChi,tenKhoanThuChi:e.tenKhoanThuChi,txtTrangThai:e.txtTrangThai,trangThai:e.trangThai}:n))}),k({show:!0,type:1,mes:"C\u1eadp nh\u1eadt "+e.loaiPhieu+" th\xe0nh c\xf4ng"});break;case 3:await V()}},visiable:T,idQuyHD:y}),(0,O.jsx)(ge.Z,{visiable:Z,idQuyHD:y,onClose:()=>C(!1),onOk:async()=>{C(!1)}}),(0,O.jsx)(W.Z,{isShow:j.show,title:j.title,mes:j.mes,onOk:V,onCancel:()=>H({...j,show:!1})}),(0,O.jsx)(le.Z,{showAlert:w.show,type:w.type,title:w.mes,handleClose:()=>k({show:!1,mes:"",type:1})}),(0,O.jsxs)(t.Z,{paddingTop:2,children:[(0,O.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,lg:5,md:12,children:(0,O.jsxs)(i.ZP,{container:!0,alignItems:"center",children:[(0,O.jsx)(i.ZP,{item:!0,xs:4,sm:5,lg:2,md:2,children:(0,O.jsx)("span",{className:"page-title",children:" S\u1ed5 qu\u1ef9"})}),(0,O.jsx)(i.ZP,{item:!0,xs:8,sm:7,lg:6,md:6,children:(0,O.jsx)(o.Z,{fullWidth:!0,size:"small",sx:{backgroundColor:"#fff",borderColor:"#CDC9CD!important","& .MuiInputBase-root":{pl:"0"}},onChange:e=>{S({...b,textSearch:e.target.value})},onKeyDown:e=>{13===e.keyCode&&U()},className:"search-field",variant:"outlined",type:"search",placeholder:"T\xecm ki\u1ebfm",InputProps:{startAdornment:(0,O.jsx)(l.Z,{children:(0,O.jsx)(ie.Z,{})})}})})]})}),(0,O.jsx)(i.ZP,{item:!0,xs:12,sm:12,lg:7,md:12,children:(0,O.jsxs)(h.Z,{direction:"row",spacing:1,justifyContent:"flex-end",sx:{"& button":{height:"40px"}},children:[(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(o.Z,{label:"Th\u1eddi gian",size:"small",fullWidth:!0,variant:"outlined",sx:{"& .MuiInputBase-root":{height:"40px!important"}},onClick:e=>R(e.currentTarget),value:"".concat((0,E.Z)(new Date(b.fromDate),"dd/MM/yyyy")," - ").concat((0,E.Z)(new Date(b.toDate),"dd/MM/yyyy"))}),(0,O.jsx)(pe.Z,{id:"popover-date-filter",open:q,anchorEl:G,onClose:()=>R(null),onApplyDate:async(e,n,a)=>{R(null),S({...b,fromDate:e,toDate:n})}})]}),(0,O.jsxs)(s.Z,{hidden:!se.Z.isGrandPermission("Pages.QuyHoaDon.Export"),variant:"outlined",onClick:async()=>{const e={...b};e.pageSize=P.totalCount,e.currentPage=1;const n=await f.Z.ExportToExcel(e);he.Z.downloadExportFile(n)},startIcon:(0,O.jsx)(d.r,{}),sx:{borderColor:"#CDC9CD!important",bgcolor:"#fff!important",color:"#333233",fontSize:"14px"},className:"btn-outline-hover",children:["Xu\u1ea5t"," "]}),(0,O.jsx)(s.Z,{hidden:!se.Z.isGrandPermission("Pages.QuyHoaDon.Create"),variant:"contained",startIcon:(0,O.jsx)(oe.Z,{}),sx:{color:"#fff",fontSize:"14px"},className:"btn-container-hover",onClick:()=>{v(!0),N("")},children:"L\u1eadp phi\u1ebfu"})]})})]}),F.length>0&&(0,O.jsx)("div",{style:{marginTop:"24px"},children:(0,O.jsx)(re.Z,{lstOption:[{id:"1",text:"X\xf3a s\u1ed5 qu\u1ef9"},{id:"2",text:"In s\u1ed5 qu\u1ef9"}],countRowSelected:F.length,title:"s\u1ed5 qu\u1ef9",choseAction:async e=>{switch(parseInt(e.id)){case 1:H({...j,show:!0,mes:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ".concat(F.length," s\u1ed5 qu\u1ef9 n\xe0y kh\xf4ng?")});break;case 2:{let e="";for(let o=0;o<F.length;o++){const l=F[o].toString(),h=P.items.filter((e=>e.id===l)),s=await f.Z.GetQuyChiTiet_byIQuyHoaDon(l);if(h.length>0){var n,a,t,i;console.log("quyHD ",h),de.Z.congty=m.congty;const l=await await ue.Z.GetDetail(null!==(n=null===(a=h[0])||void 0===a?void 0:a.idChiNhanh)&&void 0!==n?n:"");de.Z.chinhanh=l,de.Z.khachhang={maKhachHang:null===(t=h[0])||void 0===t?void 0:t.maNguoiNop,tenKhachHang:h[0].tenNguoiNop,soDienThoai:null===(i=h[0])||void 0===i?void 0:i.sdtNguoiNop},de.Z.phieuthu=h[0],de.Z.phieuthu.quyHoaDon_ChiTiet=s;let r="";r=11===h[0].idLoaiChungTu?await ce.Z.GetFileMauIn("K80_PhieuThu.txt"):await ce.Z.GetFileMauIn("K80_PhieuChi.txt");let d=de.Z.replaceChiNhanh(r);d=await de.Z.replacePhieuThuChi(d),e=o<F.length-1?e.concat(d,'<p style="page-break-before:always;"></p>'):e.concat(d)}}de.Z.Print(e)}}}})}),(0,O.jsxs)(t.Z,{marginTop:F.length>0?1:5,className:"page-box-right",children:[(0,O.jsx)(ae._$,{disableRowSelectionOnClick:!0,className:F.length>0?"data-grid-row-chosed":"data-grid-row",rowHeight:46,rows:P.items,columns:B,checkboxSelection:!0,hideFooter:!0,localeText:ee.g,sortModel:M,sortingOrder:["desc","asc"],onSortModelChange:e=>{var n;(A((()=>e)),e.length>0)?S({...b,columnSort:e[0].field,typeSort:null===(n=e[0].sort)||void 0===n?void 0:n.toString()}):S({...b,typeSort:"asc"})},onRowSelectionModelChange:e=>{L(e)},rowSelectionModel:F}),(0,O.jsx)($.Z,{currentPage:null!==(n=b.currentPage)&&void 0!==n?n:0,rowPerPage:null!==(a=b.pageSize)&&void 0!==a?a:10,totalRecord:null!==(c=P.totalCount)&&void 0!==c?c:0,totalPage:P.totalPage,handlePerPageChange:e=>{S({...b,currentPage:1,pageSize:parseInt(e.target.value.toString(),10)})},handlePageChange:(e,n)=>{S({...b,currentPage:n})}})]})]})]})}},48041:(e,n,a)=>{a.d(n,{Z:()=>s});var t=a(85905),i=a(96219),o=a(80280),l=a(74776),h=a.n(l);const s=new class{constructor(){this.ChuyenNhomKhachHang=async(e,n)=>(await i.Z.post("api/services/app/KhachHang/ChuyenNhomKhachHang?idNhomKhach=".concat(n),e)).data.success,this.jqAutoCustomer=async e=>(await i.Z.post("api/services/app/KhachHang/JqAutoCustomer",e)).data.result,this.GetListCustomerId_byPhone=async e=>(await i.Z.get("api/services/app/KhachHang/GetListCustomerId_byPhone?phone=".concat(e))).data.result}async getAll(e){return(await i.Z.post("api/services/app/KhachHang/Search",e)).data.result}async createNhomKhach(e){return(await i.Z.post("api/services/app/NhomKhach/CreateOrEditNhomKhach",e)).data.result}async getForEditNhomKhach(e){return(await i.Z.post("api/services/app/NhomKhach/GetForEdit?id=".concat(e))).data.result}async XoaNhomKhachHang(e){return(await i.Z.get("api/services/app/NhomKhach/Delete?id=".concat(e))).data.result}async createOrEdit(e){return(await i.Z.post("api/services/app/KhachHang/CreateOrEdit",e)).data.result}async getDetail(e){return(await i.Z.get("api/services/app/KhachHang/GetKhachHangDetail?id=".concat(e))).data.result}async getKhachHang(e){if(o.Z.checkNull(e)||e===t.i.EMPTY)return{id:"",maKhachHang:"KL",tenKhachHang:"Kh\xe1ch l\u1ebb"};return(await i.Z.get("api/services/app/KhachHang/GetKhachHang?id=".concat(e))).data.result}async delete(e){return(await i.Z.post("api/services/app/KhachHang/Delete?id=".concat(e))).data.result}async DeleteMultipleCustomer(e){return(await i.Z.post("api/services/app/KhachHang/DeleteMultipleCustomer",e)).data.success}async exportDanhSach(e){return(await i.Z.post("api/services/app/KhachHang/ExportDanhSach",e)).data.result}async exportSelectedDanhSach(e){return(await i.Z.post("api/services/app/KhachHang/ExporSelectedtDanhSach",e)).data.result}async checkExistSoDienThoai(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o.Z.checkNull(n)&&(n=t.i.EMPTY);return(await i.Z.get("api/services/app/KhachHang/CheckExistSoDienThoai?phone=".concat(e,"&id=").concat(n))).data.result}async GetKhachHang_noBooking(e){const n=h().stringify(e);return(await i.Z.get("api/services/app/KhachHang/GetKhachHang_noBooking?".concat(n))).data.result}async importKhachHang(e){return(await i.Z.post("api/services/app/KhachHang/ImportFile_DanhMucKhachHang",e)).data.result}async lichSuGiaoDich(e,n){return(await i.Z.post("api/services/app/KhachHang/LichSuGiaoDich?idKhachHang=".concat(e),n)).data.result}async lichSuDatLich(e,n){return(await i.Z.post("api/services/app/KhachHang/LichSuDatLich?idKhachHang=".concat(e),n)).data.result}async thongTinTongHop(e){return(await i.Z.post("api/services/app/KhachHang/ThongTinKhachHang?id=".concat(e))).data.result}}},45682:(e,n,a)=>{a.d(n,{Z:()=>i});var t=a(96219);const i=new class{async createOrEdit(e){return(await t.Z.post("api/services/app/NhanSu/CreateOrEdit",e)).data.result}async getAll(e){return(await t.Z.get("api/services/app/NhanSu/GetAll",{params:e})).data.result}async search(e,n){return(await t.Z.post("api/services/app/NhanSu/Search?keyWord=".concat(e.toString()),n)).data.result}async getNhanSu(e){return(await t.Z.post("api/services/app/NhanSu/GetNhanSu?id=".concat(e))).data.result}async delete(e){return(await t.Z.post("api/services/app/NhanSu/Delete?id=".concat(e))).data.result}async deleteMany(e){return(await t.Z.post("api/services/app/NhanSu/DeleteMany",e)).data.result}async exportDanhSachNhanVien(e){return(await t.Z.post("api/services/app/NhanSu/ExportDanhSach",e)).data.result}async exportDanhSachNhanVienSelected(e){return(await t.Z.post("api/services/app/NhanSu/ExportSelectedNhanVien",e)).data.result}async importNhanVien(e){return(await t.Z.post("api/services/app/NhanSu/ImportExcel",e)).data.result}}}}]);