"use strict";(self.webpackChunklayout_jsx=self.webpackChunklayout_jsx||[]).push([[3535],{32210:(n,e,a)=>{a.d(e,{Z:()=>S});var t=a(9506),i=a(61113),o=a(47131),s=a(24631),r=a(6820),h=a(24193),l=a(9019),d=a(54299),c=a(83929),u=a(74268),p=a(56605),x=a(26417),g=a(47313),m=a(80280),T=a(62870),v=a(69551),C=a(95104),Z=a(82739),f=a(12731),j=a(85905),H=a(2447),y=a(89600),b=a(46417);const S=n=>{var e;let{toggleDetail:a,tongTienHang:S,hinhThucTT:w=1,onChangeQuyChiTiet:D,onChangeHoaDon:K,onClickThanhToan:P,formType:N=1,dataHoaDonAfterSave:G}=n;const I=[...v.ZP.hinhThucThanhToan,{value:0,text:"K\u1ebft h\u1ee3p"}],[k,z]=g.useState(w),A=(0,g.useContext)(H.Il).chinhanhCurrent,W=null===A||void 0===A?void 0:A.id,V=m.Z.RoundDecimal(null!==(e=null===G||void 0===G?void 0:G.conNo)&&void 0!==e?e:0),[L,F]=(0,g.useState)(0),[E,_]=(0,g.useState)(0),[M,B]=(0,g.useState)(!0),[R,Q]=(0,g.useState)(""),[Y,U]=(0,g.useState)(0),[O,X]=(0,g.useState)(0),[q,J]=(0,g.useState)(0),[$,nn]=(0,g.useState)([new C.Z({hinhThucThanhToan:w,tienThu:1===N?S:V})]);(0,g.useEffect)((()=>{z(w);const n=I.filter((n=>n.value===w));n.length>0&&rn(n[0])}),[w]),(0,g.useEffect)((()=>{0!==w?nn($.map((n=>n.hinhThucThanhToan===w?{...n,tienThu:1===N?S:V}:{...n}))):sn(),J(1===N?S:V),U(1===N?S:V),X(0)}),[S]);const en=1===N?S-L:V,an=n=>{let e=0;M||n&&S>0&&(e=L/S*100,_(e)),B(n)},tn=M?E:L,on=(n,e)=>{const a=m.Z.formatNumberToFloat(n);if(0===w)switch(e){case 1:{const n=q-a;nn($.map((e=>1===e.hinhThucThanhToan?{...e,tienThu:a}:2===e.hinhThucThanhToan?{...e,tienThu:n>0?n:0}:{...e,tienThu:0}))),X(0)}break;case 2:{const n=$.filter((n=>1===n.hinhThucThanhToan)).reduce(((n,e)=>e.tienThu+n),0),e=q-n-a;nn($.map((n=>1===n.hinhThucThanhToan?{...n}:2===n.hinhThucThanhToan?{...n,tienThu:a}:{...n,tienThu:e>0?e:0}))),X(0)}break;case 3:{const n=$.filter((n=>3!==n.hinhThucThanhToan)).reduce(((n,e)=>e.tienThu+n),0)+a;let e=0;n!==en&&(e=n-en,nn($.map((n=>3!==n.hinhThucThanhToan?{...n}:{...n,tienThu:a})))),U(n),X(e)}}else nn($.map((n=>n.hinhThucThanhToan===e?{...n,tienThu:a}:{...n}))),U(a),X(a-en)},sn=()=>{nn((()=>[new C.Z({tienThu:en,hinhThucThanhToan:1}),new C.Z({tienThu:0,hinhThucThanhToan:2}),new C.Z({tienThu:0,hinhThucThanhToan:3})]))},rn=n=>{z(n.value),0!==n.value?nn((()=>[new C.Z({tienThu:en,hinhThucThanhToan:n.value})])):sn()};(0,g.useEffect)((()=>{1===N&&D($)}),[$]),(0,g.useEffect)((()=>{if(1===N)if(K(E,L,en,R),J(en),U(en),0!==w)nn($.map((n=>n.hinhThucThanhToan===w?{...n,tienThu:en}:{...n})));else{sn();const n=[new C.Z({tienThu:en,hinhThucThanhToan:1}),new C.Z({tienThu:0,hinhThucThanhToan:2}),new C.Z({tienThu:0,hinhThucThanhToan:3})];D(n)}}),[E,L]),(0,g.useEffect)((()=>{1===N&&K(E,L,en,R)}),[R]);const hn=async()=>{const n=Z.Z.AssignAgainQuyChiTiet($,Y,V),e=n.reduce(((n,e)=>n+e.tienThu),0),a=new f.Z({idChiNhanh:m.Z.checkNull(G.idChiNhanh)?W:null===G||void 0===G?void 0:G.idChiNhanh,idLoaiChungTu:11,ngayLapHoaDon:(0,y.Z)(new Date,"yyyy-MM-dd HH:mm:ss"),tongTienThu:e,noiDungThu:R});return n.map((n=>{n.idHoaDonLienQuan=null===G||void 0===G?void 0:G.id,n.idKhachHang=G.idKhachHang==j.i.EMPTY?null:null===G||void 0===G?void 0:G.idKhachHang})),a.quyHoaDon_ChiTiet=n,await Z.Z.CreateQuyHoaDon(a),e};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(t.Z,{sx:{padding:"24px",boxShadow:"1px 5px 22px 4px #00000026",height:"100%",marginX:"auto",borderRadius:"12px",bgcolor:"#fff",display:"flex",flexDirection:"column",gap:"16px",position:"relative","&::after":{content:'""',position:"absolute",pointerEvents:"none",height:"40px",left:"0",width:"100%"}},children:[(0,b.jsxs)(t.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,b.jsx)(i.Z,{variant:"h3",color:"#29303D",fontSize:"24px",fontWeight:"700",children:1===N?"Chi ti\u1ebft h\xf3a \u0111\u01a1n":"Th\xf4ng tin thanh to\xe1n"}),(0,b.jsx)(o.Z,{sx:{"&:hover svg":{filter:"brightness(0) saturate(100%) invert(34%) sepia(44%) saturate(2405%) hue-rotate(316deg) brightness(98%) contrast(92%)"}},onClick:a,children:(0,b.jsx)(x.r,{})})]}),(0,b.jsxs)(t.Z,{sx:{display:1==N?"flex":"none",justifyContent:"space-between"},children:[" ",(0,b.jsx)(i.Z,{variant:"body1",color:"#3B4758",fontSize:"14px",children:"T\u1ed5ng ti\u1ec1n h\xe0ng"}),(0,b.jsx)(i.Z,{variant:"body1",color:"#29303D",fontWeight:"700",fontSize:"14px",children:new Intl.NumberFormat("vi-VN").format(S)})]}),(0,b.jsxs)(t.Z,{sx:{display:1==N?"flex":"none",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsx)(i.Z,{variant:"body1",color:"#3B4758",fontSize:"14px",children:"Gi\u1ea3m gi\xe1"}),(0,b.jsxs)(t.Z,{sx:{display:"flex",alignItems:"stretch",gap:"16px"},children:[(0,b.jsx)(T.h3,{size:"medium",fullWidth:!0,value:tn,decimalSeparator:",",thousandSeparator:".",isAllowed:n=>{const e=n.floatValue;return M?(null!==e&&void 0!==e?e:0)<=100:!!M||(null!==e&&void 0!==e?e:0)<=S},sx:{"& input":{paddingY:"13.5px"}},customInput:s.Z,onChange:n=>(n=>{let e=m.Z.formatNumberToFloat(n);e>S&&(e=S);let a=0;S>0&&(M?(a=e*S/100,_(e)):a=e),F(a)})(n.target.value)}),(0,b.jsxs)(r.Z,{sx:{"& button":{transition:".3s"}},children:[(0,b.jsx)(h.Z,{onClick:()=>an(!0),sx:{bgcolor:M?"#fff":"rgba(61, 71, 92, 0.1)",borderRight:"0!important",color:M?"#3D475C":"rgba(194, 201, 214, 0.7)"},children:"%"}),(0,b.jsx)(h.Z,{onClick:()=>an(!1),sx:{color:M?"rgba(194, 201, 214, 0.7)":"#3D475C",borderLeft:"0!important",bgcolor:M?"rgba(61, 71, 92, 0.1)":"#fff"},children:"\u0111"})]})]})]}),(0,b.jsxs)(t.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsx)(i.Z,{variant:"body1",color:"#3D475C",fontWeight:"700",fontSize:"16px",children:1==N?"Thanh to\xe1n":"C\xf2n n\u1ee3"}),(0,b.jsx)(i.Z,{variant:"body1",color:"#29303D",fontWeight:"700",fontSize:"16px",children:new Intl.NumberFormat("vi-VN").format(en)})]}),(0,b.jsxs)(l.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",rowGap:"16px",children:[(0,b.jsx)(l.ZP,{item:!0,xs:"auto",children:(0,b.jsx)(i.Z,{variant:"body1",color:"#3D475C",fontWeight:"700",fontSize:"14px",children:"Ti\u1ec1n kh\xe1ch tr\u1ea3"})}),(0,b.jsx)(l.ZP,{item:!0,xs:"auto",children:(0,b.jsx)(d.Z,{sx:{display:"flex",flexDirection:"row","& label:last-of-type":{marginRight:"0"}},children:I.map(((n,e)=>(0,b.jsx)(c.Z,{control:(0,b.jsx)(u.Z,{size:"small",value:n.value,checked:k===n.value,onChange:()=>{rn(n)}}),label:n.text,sx:{"& .MuiFormControlLabel-label":{color:"rgba(0, 0, 0, 0.85)",fontSize:"14px"}}},e)))})}),(0,b.jsxs)(l.ZP,{item:!0,xs:12,children:[0!==w&&(0,b.jsx)(T.h3,{size:"small",fullWidth:!0,sx:{"& input":{paddingY:"13.5px",textAlign:"right"}},decimalSeparator:",",thousandSeparator:".",customInput:s.Z,value:Y,onChange:n=>on(n.target.value,k)}),0===w&&(0,b.jsx)(T.h3,{size:"small",fullWidth:!0,sx:{"& input":{paddingY:"13.5px",textAlign:"right"}},decimalSeparator:",",thousandSeparator:".",customInput:s.Z,value:q,onChange:n=>J(m.Z.formatNumberToFloat(n.target.value))})]}),0===k?(0,b.jsx)(l.ZP,{container:!0,spacing:"16px",children:$.map(((n,e)=>(0,b.jsx)(l.ZP,{item:!0,xs:4,children:(0,b.jsxs)(t.Z,{sx:{border:"1px solid #C2C9D6",borderRadius:"8px",overflow:"hidden",padding:"8px 16px","& input":{border:"0",width:"100%",textAlign:"right",color:"#525F7A",fontSizze:"16px",outline:"none"},"& input::-webkit-outer-spin-button,& input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:"0"}},children:[(0,b.jsx)(i.Z,{variant:"body1",color:"#525F7A",fontSize:"12px",children:I.filter((e=>e.value===n.hinhThucThanhToan))[0].text}),(0,b.jsx)(T.h3,{size:"small",fullWidth:!0,decimalSeparator:",",thousandSeparator:".",customInput:p.Z,sx:{"&:before":{borderBottom:"none"}},value:n.tienThu,onChange:e=>on(e.target.value,n.hinhThucThanhToan)})]})},e)))}):void 0,0!==O&&(0,b.jsxs)(l.ZP,{container:!0,justifyContent:"space-between",children:[(0,b.jsx)(l.ZP,{item:!0,xs:"auto",children:(0,b.jsx)(i.Z,{variant:"body1",color:"#3D475C",fontWeight:"400",fontSize:"14px",children:O>0?"Ti\u1ec1n th\u1eeba":"Ti\xean kh\xe1ch thi\u1ebfu"})}),(0,b.jsx)(l.ZP,{xs:"auto",item:!0,children:(0,b.jsx)(i.Z,{variant:"body1",color:"#29303D",fontWeight:"700",fontSize:"14px",children:new Intl.NumberFormat("vi-VN").format(Math.abs(O))})})]})]}),(0,b.jsxs)(t.Z,{sx:{wiidth:"100%","& textarea":{height:"80px",width:"100%",borderRadius:"8px",borderColor:"#C2C9D6",outline:"none",color:"#A3ADC2",padding:"8px"}},children:[(0,b.jsx)(i.Z,{fontSize:"14px",color:"#525F7A",children:"Ghi ch\xfa"}),(0,b.jsx)("textarea",{value:R,onChange:n=>Q(n.target.value)})]}),(0,b.jsx)(h.Z,{variant:"contained",className:"btn-container-hover",sx:{width:"158px",marginX:"auto",mt:"auto",mb:"5px",paddingY:"14px",fontSize:"16px"},onClick:async()=>{let n=Y;1!==N&&(n=await hn()),P(n)},children:"Thanh to\xe1n"})]})})}},21132:(n,e,a)=>{a.d(e,{Z:()=>A});var t=a(47313),i=a(94469),o=a(33604),s=a(47131),r=a(96467),h=a(9019),l=a(9506),d=a(61113),c=a(35898),u=a(24631),p=a(6820),x=a(24193),g=a(83929),m=a(74268),T=a(90891),v=a(8586),C=a(50494),Z=a(94425),f=a(55188),j=a(2040),H=a(27458),y=a(9820),b=a(80280),S=a(62870),w=a(71294),D=a(35045),K=a(88706),P=a(4117),N=a(46417);function G(n){let{listProduct:e,handleChoseItem:a}=n;return(0,N.jsx)(N.Fragment,{children:e.map(((n,e)=>(0,N.jsxs)(h.ZP,{container:!0,paddingTop:2,spacing:2,children:[(0,N.jsx)(h.ZP,{item:!0,xs:12,children:(0,N.jsx)("span",{style:{fontSize:"16px",color:"#000",fontWeight:"700"},children:n.tenNhomHang})},e),n.hangHoas.map(((n,e)=>(0,N.jsx)(h.ZP,{item:!0,xs:12,sm:4,md:3,lg:3,onClick:()=>a(n),children:(0,N.jsxs)(c.Z,{direction:"column",padding:2,spacing:2,justifyContent:"space-around",sx:{border:"1px solid transparent",cursor:"pointer",transition:".4s",backgroundColor:"var(--color-bg)","&:hover":{borderColor:"var(--color-main)"}},children:[(0,N.jsx)(l.Z,{height:40,style:{fontSize:12,color:"#333233",fontWeight:"700"},children:n.tenHangHoa}),(0,N.jsx)(l.Z,{style:{fontSize:14,color:"#333233"},children:new Intl.NumberFormat("vi-VN").format(n.giaBan)})]})},e)))]})))})}var I=a(25742);function k(n){let{isShow:e,handlClose:a,handleChoseProduct:s}=n;const[l,d]=(0,t.useState)(""),[c,p]=((0,t.useRef)(!0),(0,t.useState)([]));(0,t.useEffect)((()=>{(async()=>{const n=await I.Z.GetDMHangHoa_groupByNhom({IdNhomHangHoas:"",TextSearch:"",IdLoaiHangHoa:"",CurrentPage:0,PageSize:50});p(n)})()}),[]);const x=(0,t.useRef)((0,K.Z)((async n=>{const e=await I.Z.GetDMHangHoa_groupByNhom(n);p(e)}),500)).current;return(0,t.useEffect)((()=>{if(e){x({IdNhomHangHoas:"",TextSearch:l,IdLoaiHangHoa:0,CurrentPage:0,PageSize:50})}}),[l]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(i.Z,{open:e,onClose:a,fullWidth:!0,maxWidth:"lg",children:[(0,N.jsx)(o.Z,{children:(0,N.jsx)("span",{style:{fontWeight:700},children:" Ch\u1ecdn d\u1ecbch v\u1ee5"})}),(0,N.jsxs)(r.Z,{children:[(0,N.jsx)(h.ZP,{container:!0,children:(0,N.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:6,children:(0,N.jsx)(u.Z,{size:"small",fullWidth:!0,value:l,onChange:n=>d(n.target.value),placeholder:"T\xecm ki\u1ebfm",InputProps:{startAdornment:(0,N.jsx)(D.Z,{})}})})}),(0,N.jsx)(G,{listProduct:c,handleChoseItem:s})]}),(0,N.jsx)(P.Z,{})]})})}var z=a(26417);(0,H.Z)({components:{MuiOutlinedInput:{styleOverrides:{root:{paddingRight:"0px"}}}}});function A(n){let{isShow:e,formType:a=0,hoadonChiTiet:H,handleSave:D,handleClose:K}=n;const[P,G]=(0,t.useState)(!1),[I,A]=(0,t.useState)({anchorEl:null,open:!1,item:{id:"",ptChietKhau:0,tienChietKhau:0,donGiaTruocCK:0}}),[W,V]=(0,t.useState)(""),[L,F]=(0,t.useState)([]),E=1===a?"none":"",[_,M]=(0,t.useState)(L.map((()=>!1))),[B,R]=(0,t.useState)(!1);t.useEffect((()=>{G(!1);const n=H.map((n=>{var e,a;return{...n,laPTChietKhau:(null!==(e=null===n||void 0===n?void 0:n.ptChietKhau)&&void 0!==e?e:0)>0||0===(null!==(a=null===n||void 0===n?void 0:n.tienChietKhau)&&void 0!==a?a:0)}}));F(n),0===a?F(H.map((n=>({...n,expanded:!0})))):M([!0])}),[e]);const Q=(n,e)=>{F(L.map((a=>{if(a.id===e){var t,i;const e=null===a||void 0===a?void 0:a.laPTChietKhau,h=null!==(t=null===a||void 0===a?void 0:a.donGiaTruocCK)&&void 0!==t?t:0;let l=0,d=null!==(i=null===a||void 0===a?void 0:a.tienChietKhau)&&void 0!==i?i:0;var o,s,r;if(e)if(n)l=null!==(o=null===a||void 0===a?void 0:a.ptChietKhau)&&void 0!==o?o:0;else d=(null!==(s=null===a||void 0===a?void 0:a.ptChietKhau)&&void 0!==s?s:0)*h/100;else if(n)l=h>0?(null!==(r=null===a||void 0===a?void 0:a.tienChietKhau)&&void 0!==r?r:0)/h*100:0;const c=h-d;return{...a,laPTChietKhau:n,ptChietKhau:l,tienChietKhau:d,donGiaSauCK:c,thanhTienSauCK:c*a.soLuong,donGiaSauVAT:c,thanhTienSauVAT:c*a.soLuong}}return a})))},Y=(n,e)=>{const a=b.Z.formatNumberToFloat(n);F(L.map((n=>{if(n.id===e){const e=n.laPTChietKhau;let t=a;e&&(t=a*n.donGiaTruocCK/100);const i=n.donGiaTruocCK-t;return{...n,ptChietKhau:e?a:0,tienChietKhau:t,donGiaSauCK:i,donGiaSauVAT:i,thanhTienSauCK:i*n.soLuong,thanhTienSauVAT:i*n.soLuong}}return n})))},U=()=>{G(!1),K()},O=[5,10,15,20,25,30,35,40,45,50];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k,{isShow:B,handlClose:()=>R(!1),handleChoseProduct:n=>{const e=new y.Z({maHangHoa:n.mahangHoa,tenHangHoa:n.tenHangHoa,idDonViQuyDoi:n.idDonViQuyDoi,idHangHoa:n.idHangHoa,idNhomHangHoa:n.idNhomHangHoa,giaBan:n.giaBan}),a=L.filter((e=>e.idDonViQuyDoi===n.idDonViQuyDoi));if(0===a.length)F([e,...L]);else{const n=a[0].soLuong+1;F(L.map((e=>{var t,i;return e.id===a[0].id?{...e,soLuong:n,thanhTienSauCK:(null!==(t=e.donGiaSauCK)&&void 0!==t?t:0)*n,thanhTienSauVAT:(null!==(i=e.donGiaSauVAT)&&void 0!==i?i:0)*n}:e})))}R(!1)}}),(0,N.jsxs)(i.Z,{open:e,onClose:K,fullWidth:!0,maxWidth:"sm",children:[(0,N.jsx)(o.Z,{sx:{color:"#29303D",fontWeight:"700",fontSize:"24px"},children:"Ch\u1ec9nh s\u1eeda gi\u1ecf h\xe0ng"}),(0,N.jsx)(s.Z,{onClick:U,sx:{position:"absolute",top:"8px",right:"8px","&:hover svg":{filter:"brightness(0) saturate(100%) invert(36%) sepia(74%) saturate(1465%) hue-rotate(318deg) brightness(94%) contrast(100%)"}},children:(0,N.jsx)(z.r,{})}),(0,N.jsxs)(r.Z,{sx:{paddingTop:0},children:[L.map(((n,e)=>(0,N.jsxs)(h.ZP,{container:!0,padding:"16px 0px",borderBottom:1===a?"":"1px dashed green",borderRadius:1,marginBottom:1===a?0:"10px",children:[(0,N.jsx)(h.ZP,{item:!0,xs:1===a?0:2,sm:1===a?0:1,md:1===a?0:1,lg:1===a?0:1,sx:{display:E},children:(0,N.jsx)(v.Z,{sx:{width:40,height:40,color:"red",padding:"8px",marginTop:"-10px"},onClick:()=>{return e=n,void F(L.filter((n=>n.id!==e.id)));var e}})}),(0,N.jsx)(h.ZP,{item:!0,xs:1===a?12:10,sm:1===a?12:11,md:1===a?12:11,lg:1===a?12:11,children:(0,N.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,N.jsx)(h.ZP,{item:!0,xs:12,sm:9,md:9,lg:9,children:(0,N.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:(0,N.jsx)(d.Z,{title:null===n||void 0===n?void 0:n.tenHangHoa,sx:{fontWeight:600,display:3===a?"none":"",color:"#3B4758",maxWidth:"calc(100% - 48px)",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:null===n||void 0===n?void 0:n.tenHangHoa})})}),(0,N.jsx)(h.ZP,{item:!0,xs:1===a?12:10,sm:1===a?3:1,md:1===a?3:2,lg:1===a?3:2,children:(0,N.jsx)(c.Z,{direction:"row",spacing:1,justifyContent:"end",height:"100%",alignItems:"center",children:(0,N.jsx)(d.Z,{sx:{fontWeight:500,textAlign:"right",color:"var(--color-main)"},children:new Intl.NumberFormat("vi-VN").format(null===n||void 0===n?void 0:n.thanhTienSauVAT)})})}),1!==a&&(0,N.jsx)(h.ZP,{item:!0,xs:2,sm:1,md:1,lg:1,children:(0,N.jsxs)(l.Z,{onClick:()=>(n=>{const e=[..._];e[n]=!e[n],M(e)})(e),sx:{cursor:"pointer"},children:[(0,N.jsx)(C.Z,{sx:{display:1===a||_[e]?"none":""}}),(0,N.jsx)(Z.Z,{sx:{display:1!==a&&_[e]?"":"none"}})]})}),(0,N.jsx)(h.ZP,{item:!0,xs:12,sm:7,md:7,lg:7,children:(0,N.jsxs)(c.Z,{direction:"column",spacing:1,children:[(0,N.jsx)(d.Z,{variant:"body2",children:"Gi\xe1 b\xe1n"}),(0,N.jsx)(S.h3,{size:"small",fullWidth:!0,value:n.donGiaTruocCK,decimalSeparator:",",thousandSeparator:".",customInput:u.Z,onChange:e=>((n,e)=>{F(L.map((a=>{if(a.id===e){const e=b.Z.formatNumberToFloat(n.target.value);let t=a.donGiaSauCK,i=a.tienChietKhau;return a.ptChietKhau>0?(i=a.ptChietKhau*e/100,t=e-i):(i=0,t=e),{...a,tienChietKhau:i,donGiaSauCK:t,donGiaTruocCK:e,donGiaSauVAT:t,thanhTienTruocCK:e*a.soLuong,thanhTienSauCK:t*a.soLuong,thanhTienSauVAT:t*a.soLuong}}return a})))})(e,n.id)})]})}),(0,N.jsx)(h.ZP,{item:!0,xs:12,sm:5,md:5,lg:5,children:(0,N.jsxs)(c.Z,{direction:"column",spacing:1,children:[(0,N.jsx)(d.Z,{sx:{textAlign:{lg:"center",md:"center",xs:"left"}},variant:"body2",children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,N.jsxs)(c.Z,{direction:"row",spacing:1,sx:{"& .btnIcon":{cursor:"pointer"}},children:[(0,N.jsx)(f.Z,{className:"btnIcon",onClick:()=>{return e=n.id,void F(L.map(((n,a)=>{if(n.id===e){const e=n.soLuong>0?n.soLuong-1:0;return{...n,soLuong:e,thanhTienTruocCK:e*n.donGiaTruocCK,thanhTienSauCK:e*n.donGiaSauCK,thanhTienSauVAT:e*n.donGiaSauVAT}}return n})));var e}}),(0,N.jsx)(u.Z,{size:"small",fullWidth:!0,value:n.soLuong,onChange:e=>((n,e)=>{F(L.map(((a,t)=>{if(a.id===e){const e=b.Z.formatNumberToFloat(n.target.value);return{...a,soLuong:e,thanhTienTruocCK:e*a.donGiaTruocCK,thanhTienSauCK:e*a.donGiaSauCK,thanhTienSauVAT:e*a.donGiaSauVAT}}return a})))})(e,n.id)}),(0,N.jsx)(j.Z,{className:"btnIcon",onClick:()=>{return e=n.id,void F(L.map((n=>{if(n.id===e){const e=n.soLuong+1;return{...n,soLuong:e,thanhTienTruocCK:e*n.donGiaTruocCK,thanhTienSauCK:e*n.donGiaSauCK,thanhTienSauVAT:e*n.donGiaSauVAT}}return n})));var e}})]})]})}),(0,N.jsx)(h.ZP,{item:!0,xs:6,md:10,lg:10,sm:10,sx:{display:_[e]?"":"none"},children:(0,N.jsxs)(c.Z,{direction:"column",spacing:1,children:[(0,N.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",children:[(0,N.jsxs)(c.Z,{direction:"row",spacing:1,children:[(0,N.jsx)(d.Z,{variant:"body2",children:"Gi\u1ea3m gi\xe1"}),(0,N.jsxs)("span",{style:{fontSize:"10px",textAlign:"right",float:"right",color:"red",display:"none"},children:["-",new Intl.NumberFormat("vi-VN").format(null===n||void 0===n?void 0:n.tienChietKhau)]})]}),(0,N.jsxs)(c.Z,{direction:"row",spacing:"4px",style:{fontSize:"10px",textAlign:"right",float:"right",color:"red",display:(null===n||void 0===n?void 0:n.tienChietKhau)>0?"":"none"},children:["-",new Intl.NumberFormat("vi-VN").format(null===n||void 0===n?void 0:n.tienChietKhau)]})]}),(0,N.jsx)(S.h3,{size:"small",fullWidth:!0,value:n.ptChietKhau>0?n.ptChietKhau:n.tienChietKhau,decimalSeparator:",",thousandSeparator:".",customInput:u.Z,onChange:e=>Y(e.target.value,n.id)})]})}),(0,N.jsx)(h.ZP,{item:!0,xs:6,md:2,lg:2,sm:2,sx:{display:_[e]?"":"none"},children:(0,N.jsxs)(p.Z,{sx:{paddingTop:"26.58px",maxWidth:"100%","& button":{minWidth:"38px !important",height:"35.69px"}},fullWidth:!0,children:[(0,N.jsx)(x.Z,{sx:{bgcolor:n.laPTChietKhau?"var(--color-main)":"",color:n.laPTChietKhau?"white":"var(--color-main)","&:hover ":{bgcolor:"var(--color-main)",color:"white"}},onClick:()=>Q(!0,n.id),children:"%"}),(0,N.jsx)(x.Z,{sx:{bgcolor:n.laPTChietKhau?"":" var(--color-main)",color:n.laPTChietKhau?"var(--color-main)":"white","&:hover ":{bgcolor:"var(--color-main)",color:"white"}},onClick:()=>Q(!1,n.id),children:"\u0111"})]})}),1===a&&n.laPTChietKhau&&(0,N.jsx)(h.ZP,{item:!0,xs:12,md:12,children:(0,N.jsx)(c.Z,{spacing:1,direction:"row",flexWrap:"wrap",useFlexGap:!0,children:O.map(((e,a)=>(0,N.jsxs)(x.Z,{onClick:()=>((n,e)=>{F(L.map((a=>{if(a.id===e){const e=n*a.donGiaTruocCK/100,t=a.donGiaTruocCK-e;return{...a,ptChietKhau:n,tienChietKhau:e,donGiaSauCK:t,donGiaSauVAT:t,thanhTienSauCK:t*a.soLuong,thanhTienSauVAT:t*a.soLuong}}return a})))})(e,n.id),sx:{minWidth:"unset",flexGrow:"1",fontSize:"12px",color:n.ptChietKhau===e?"white":"var(--color-main)",paddingY:"8px ",textAlign:"center",border:"1px solid var(--color-main)",borderRadius:"4px",bgcolor:n.ptChietKhau===e?"var(--color-main)":"","&:hover ":{bgcolor:"var(--color-main)",color:"white"}},children:[e," %"]},a)))})}),(0,N.jsx)(h.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,style:{display:"none"},children:(0,N.jsxs)(c.Z,{direction:"column",spacing:1,children:[(0,N.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",children:[(0,N.jsxs)(c.Z,{direction:"row",spacing:1,children:[(0,N.jsx)(d.Z,{variant:"body2",children:"Chi\u1ebft kh\u1ea5u"}),(0,N.jsxs)("span",{style:{fontSize:"10px",textAlign:"right",float:"right",color:"red",display:"none"},children:["- ",new Intl.NumberFormat("vi-VN").format(null===n||void 0===n?void 0:n.tienChietKhau)]})]}),(0,N.jsx)(c.Z,{direction:"row",spacing:"4px",style:{fontSize:"10px",textAlign:"right",float:"right",color:"red",display:(null===n||void 0===n?void 0:n.tienChietKhau)>0?"":"none"},children:(0,N.jsxs)("span",{children:["-",new Intl.NumberFormat("vi-VN").format(null===n||void 0===n?void 0:n.tienChietKhau)]})})]}),(0,N.jsx)(S.h3,{size:"small",fullWidth:!0,value:n.ptChietKhau>0?n.ptChietKhau:n.tienChietKhau,decimalSeparator:",",thousandSeparator:".",customInput:u.Z,onChange:e=>Y(e.target.value,n.id)})]})}),(0,N.jsxs)(h.ZP,{item:!0,xs:12,sm:12,md:12,lg:12,style:{display:"none"},children:[(0,N.jsx)(g.Z,{value:"true",control:(0,N.jsx)(m.Z,{size:"small",checked:n.laPTChietKhau}),label:"%",onChange:()=>Q(!0,n.id)}),(0,N.jsx)(g.Z,{value:"false",control:(0,N.jsx)(m.Z,{size:"small",checked:!n.laPTChietKhau}),label:"\u0111",onChange:()=>Q(!1,n.id)})]})]})})]},e))),(0,N.jsxs)(h.ZP,{container:!0,paddingTop:2,children:[(0,N.jsx)(h.ZP,{item:!0,xs:1}),(0,N.jsx)(h.ZP,{item:!0,xs:11,children:(0,N.jsx)(c.Z,{style:{display:E},sx:{"& a":{color:"var(--color-main)"}},children:(0,N.jsxs)(T.Z,{sx:{fontSize:"14px",display:"flex",alignItems:"center"},onClick:()=>R(!0),children:[(0,N.jsx)(j.Z,{}),"Th\xeam d\u1ecbch v\u1ee5"]})})})]}),(0,N.jsx)(h.ZP,{item:!0,xs:12,md:12,children:(0,N.jsxs)(c.Z,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,N.jsx)(x.Z,{variant:"outlined",className:"button-outline",onClick:U,children:"H\u1ee7y"}),(0,N.jsx)(x.Z,{variant:"contained",className:"button-container",onClick:async()=>{if(G(!0),1===a)D(L[0]);else{var n;D(L);[...L].map(((n,e)=>{n.stt=e+1})),await w.Z.Update_ChiTietHoaDon(L,null===(n=H[0])||void 0===n?void 0:n.idHoaDon)}},children:"L\u01b0u"})]})})]})]})]})}},71294:(n,e,a)=>{a.d(e,{Z:()=>s});var t=a(96219),i=a(85905),o=a(80280);const s=new class{constructor(){this.CreateHoaDon=async n=>{""!==n.idKhachHang&&n.idKhachHang!==i.i.EMPTY.toString()||(n.idKhachHang=null),""!==n.idChiNhanh&&n.idChiNhanh!==i.i.EMPTY.toString()||(n.idChiNhanh=null);return(await t.Z.post("api/services/app/HoaDon/CreateHoaDon",n)).data.result},this.CreateHoaDon2=async n=>(await t.Z.post("api/services/app/HoaDon/CreateHoaDon2",n)).data.result,this.UpdateHoaDon=async n=>(await t.Z.post("api/services/app/HoaDon/UpdateHoaDon",n)).data.result,this.Update_InforHoaDon=async n=>(await t.Z.put("api/services/app/HoaDon/Update_InforHoaDon",n)).data.result,this.Update_ChiTietHoaDon=async(n,e)=>(await t.Z.put("api/services/app/HoaDon/Update_ChiTietHoaDon?idHoadon=".concat(e),n)).data.result,this.GetListHoaDon=async n=>(await t.Z.post("api/services/app/HoaDon/GetListHoaDon",n)).data.result,this.GetInforHoaDon_byId=async n=>{if(o.Z.checkNull(n))return[];return(await t.Z.get("api/services/app/HoaDon/GetInforHoaDon_byId?id=".concat(n))).data.result},this.GetChiTietHoaDon_byIdHoaDon=async n=>{if(o.Z.checkNull(n))return[];return(await t.Z.get("api/services/app/HoaDon/GetChiTietHoaDon_byIdHoaDon?idHoaDon=".concat(n))).data.result},this.DeleteHoaDon=async n=>{if(o.Z.checkNull(n))return[];return(await t.Z.post("api/services/app/HoaDon/DeleteHoaDon?id=".concat(n))).data.result},this.Delete_MultipleHoaDon=async n=>{if(null!==n&&void 0!==n&&n.length>0){return(await t.Z.post("api/services/app/HoaDon/Delete_MultipleHoaDon",n)).data.result}return!1},this.ExportToExcel=async n=>(await t.Z.post("api/services/app/HoaDon/ExportDanhSach",n)).data.result}}},25742:(n,e,a)=>{a.d(e,{Z:()=>o});var t=a(96219),i=a(80280);const o=new class{constructor(){this.CheckExistsMaHangHoa=async(n,e)=>{if(i.Z.checkNull(n))return!1;return await t.Z.get("api/services/app/HangHoa/CheckExistsMaHangHoa?mahanghoa=".concat(n,"&id=").concat(e)).then((n=>n.data.result))},this.GetDetailProduct=async n=>await t.Z.get("api/services/app/HangHoa/GetDetailProduct?idDonViQuyDoi=".concat(n)).then((n=>n.data.result)),this.Get_DMHangHoa=async n=>await t.Z.post("api/services/app/HangHoa/GetDMHangHoa",n).then((n=>n.data.result)),this.ExportToExcel=async n=>(await t.Z.post("api/services/app/HangHoa/ExportToExcel",n)).data.result,this.CreateOrEditProduct=async n=>await t.Z.post("api/services/app/HangHoa/CreateOrEdit",n).then((n=>n.data.result)),this.DeleteProduct_byIDHangHoa=async n=>await t.Z.post("api/services/app/HangHoa/Delete?id=".concat(n)).then((n=>n.data.result)),this.DeleteMultipleProduct=async n=>(await t.Z.post("api/services/app/HangHoa/DeleteMultipleProduct",n)).data.success,this.ChuyenNhomHang=async(n,e)=>(await t.Z.post("api/services/app/HangHoa/ChuyenNhomHang?idNhomHang=".concat(e),n)).data.success,this.RestoreProduct_byIdHangHoa=async n=>await t.Z.post("api/services/app/HangHoa/RestoreProduct?idHangHoa=".concat(n)).then((n=>n.data.result)),this.GetDMHangHoa_groupByNhom=async n=>await t.Z.post("api/services/app/HangHoa/GetDMHangHoa_groupByNhom",n).then((n=>n.data.result))}async importHangHoa(n){return(await t.Z.post("api/services/app/HangHoa/ImportFile_DanhMucHangHoa",n)).data.result}}}}]);