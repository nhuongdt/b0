"use strict";(self.webpackChunklayout_jsx=self.webpackChunklayout_jsx||[]).push([[9127],{76822:(e,t,a)=>{a.r(t),a.d(t,{default:()=>X});var s=a(47313),i=(a(64562),a(96219));const n=new class{async getAll(e){return(await i.Z.get("api/services/app/NgayNghiLe/GetAll",{params:e})).data.result}async getForEdit(e){return(await i.Z.post("api/services/app/NgayNghiLe/GetForEdit?id=".concat(e))).data.result}async delete(e){return(await i.Z.post("api/services/app/NgayNghiLe/Delete?id=".concat(e))).data.result}async deleteMany(e){return(await i.Z.post("api/services/app/NgayNghiLe/DeleteMany",e)).data.result}async createOrEdit(e){return(await i.Z.post("api/services/app/NgayNghiLe/CreateOrEdit",e)).data.result}async exportToExcel(e){return(await i.Z.post("api/services/app/NgayNghiLe/ExportToExcel",e)).data.result}async exportSelectedItemToExcel(e){return(await i.Z.post("api/services/app/NgayNghiLe/ExportSelectedNghiLe",e)).data.result}async importExcel(e){return(await i.Z.post("api/services/app/NgayNghiLe/ImportExcel",e)).data.result}};var l=a(44758),o=a(9506),r=a(61113),d=a(47131),h=a(9019),c=a(24631),g=a(24193),x=a(35898),u=a(94469),p=a(33604),y=a(96467),m=a(16429),N=a(4117),w=a(21933),f=a(7410),C=a(69551),S=a(26417),j=a(47655),Z=a(89600),v=a(79015),b=a(46417);class k extends s.Component{render(){const{visible:e,onCancel:t,title:a,createOrEditDto:s}=this.props,i={id:s.id,tenNgayLe:s.tenNgayLe,tuNgay:s.tuNgay,denNgay:s.denNgay},l=w.Ry().shape({tenNgayLe:w.Z_().required("T\xean ng\xe0y l\u1ec5 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),tuNgay:w.hT().required("Ng\xe0y b\u1eaft \u0111\u1ea7u kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),denNgay:w.hT().min(w.iH("tuNgay"),"Th\u1eddi gian k\u1ebft th\xfac ph\u1ea3i l\u1edbn h\u01a1n ho\u1eb7c b\u1eb1ng ng\xe0y b\u1eaft \u0111\u1ea7u").required("Ng\xe0y k\u1ebft th\xfac kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")});return(0,b.jsxs)(u.Z,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,b.jsx)(p.Z,{children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)(o.Z,{className:"col-8",sx:{float:"left",fontSize:"24px",fontWeight:"700"},children:a}),(0,b.jsx)(o.Z,{className:"col-4",sx:{float:"right","& svg:hover":{filter:"brightness(0) saturate(100%) invert(36%) sepia(74%) saturate(1465%) hue-rotate(318deg) brightness(94%) contrast(100%)"}},children:(0,b.jsx)(S.r,{style:{float:"right",height:"24px",cursor:"pointer"},onClick:t})})]})}),(0,b.jsx)(y.Z,{children:(0,b.jsx)(f.J9,{initialValues:i,validationSchema:l,onSubmit:async e=>{e.id=s.id;null!=await n.createOrEdit(e)?e.id===C.ZP.guidEmpty||""===e.id?(0,j.yv)("Th\xeam m\u1edbi th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:3e3}):(0,j.yv)("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:3e3}):(0,j.yv)("C\xf3 l\u1ed7i s\u1ea3y ra vui l\xf2ng th\u1eed l\u1ea1i sau",{variant:"error",autoHideDuration:3e3}),t()},children:e=>{let{values:a,handleChange:s,errors:i,touched:n,isSubmitting:l}=e;return(0,b.jsxs)(f.l0,{onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()},children:[(0,b.jsxs)(h.ZP,{container:!0,direction:"row",spacing:3,alignItems:"center",children:[(0,b.jsx)(h.ZP,{item:!0,xs:12,children:(0,b.jsx)(m.Z,{children:(0,b.jsx)(c.Z,{label:(0,b.jsxs)(r.Z,{variant:"subtitle2",children:["T\xean ng\xe0y l\u1ec5",(0,b.jsx)("span",{className:"text-danger",children:" *"})]}),sx:{marginTop:"16px"},value:a.tenNgayLe,error:!(!i.tenNgayLe||!n.tenNgayLe),helperText:i.tenNgayLe&&n.tenNgayLe&&(0,b.jsx)("span",{className:"text-danger",children:i.tenNgayLe}),type:"text",name:"tenNgayLe",size:"small",onChange:s,placeholder:"Nh\u1eadp t\xean ng\xe0y l\u1ec5"})})}),(0,b.jsx)(h.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(m.Z,{children:(0,b.jsx)(v.Z,{props:{width:"100%",size:"small",label:(0,b.jsxs)(r.Z,{variant:"subtitle2",children:["T\u1eeb ng\xe0y",(0,b.jsx)("span",{className:"text-danger",children:" *"})]}),error:!(!Boolean(i.tuNgay)||!n.tuNgay),helperText:Boolean(i.tuNgay)&&(null===n||void 0===n?void 0:n.tuNgay)&&(0,b.jsx)("span",{className:"text-danger",children:String(i.tuNgay)})},defaultVal:a.tuNgay?(0,Z.Z)(new Date(a.tuNgay),"yyyy/MM/dd"):"",handleChangeDate:e=>{a.tuNgay=new Date(e)}})})}),(0,b.jsx)(h.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(m.Z,{children:(0,b.jsx)(v.Z,{props:{width:"100%",size:"small",label:(0,b.jsxs)(r.Z,{variant:"subtitle2",children:["\u0110\u1ebfn ng\xe0y",(0,b.jsx)("span",{className:"text-danger",children:" *"})]}),error:!(!Boolean(i.denNgay)||!n.denNgay),helperText:Boolean(i.denNgay)&&(null===n||void 0===n?void 0:n.denNgay)&&(0,b.jsx)("span",{className:"text-danger",children:String(i.denNgay)})},defaultVal:a.denNgay?(0,Z.Z)(new Date(a.denNgay),"yyyy/MM/dd"):"",handleChangeDate:e=>{a.denNgay=new Date(e)}})})})]}),(0,b.jsxs)(N.Z,{sx:{padding:"16px 0px 0px 0px !important"},children:[(0,b.jsx)(g.Z,{sx:{color:"var(--color-main)!important",bgcolor:"#fff!important"},variant:"outlined",type:"button",onClick:t,className:"btn-outline-hover",children:"H\u1ee7y"}),l?(0,b.jsx)(g.Z,{variant:"contained",type:"submit",className:"btn-container-hover",children:"\u0110ang l\u01b0u"}):(0,b.jsx)(g.Z,{variant:"contained",type:"submit",className:"btn-container-hover",children:"L\u01b0u"})]})]})}})})]})}}const E=k;var D=a(40225),I=a(36073),M=a(61566),L=a(5599),R=a(64247),T=a(23195),H=a(83567),P=a(69369),O=a(86618),A=a(87068),z=a(33859),F=a(33985),W=a(46734),B=a(89460),G=a(66185),V=a(14881);class _ extends s.Component{constructor(){super(...arguments),this.state={IdHoliday:"",modalVisible:!1,maxResultCount:10,skipCount:0,filter:"",sortBy:"createTime",moreOpen:!1,importShow:!1,anchorEl:null,selectedRowId:null,checkAllRow:!1,listHoliday:[],createOrEditNgayNghiLe:{id:C.ZP.guidEmpty,tenNgayLe:"",tuNgay:new Date,denNgay:new Date},listItemSelectedModel:[],expendActionSelectedRow:!1,totalCount:0,currentPage:1,totalPage:1,startIndex:0,isShowConfirmDelete:!1,sortColumn:null,sortType:"desc"},this.handlePageChange=async(e,t)=>{await this.setState({currentPage:t,skipCount:t,checkAllRow:!1}),this.getListHoliday()},this.handlePerPageChange=async e=>{await this.setState({maxResultCount:parseInt(e.target.value.toString(),10),currentPage:1,skipCount:1,checkAllRow:!1}),this.getListHoliday()},this.handleChange=e=>{const{name:t,value:a}=e.target;this.setState({createOrEditNhanSu:{...this.state.createOrEditNgayNghiLe,[t]:a}})},this.Modal=()=>{this.setState({modalVisible:!this.state.modalVisible,IdHoliday:""}),this.getData(),this.getListHoliday()},this.createOrUpdateModalOpen=async e=>{if(this.setState({IdHoliday:e}),""!==e){const t=await n.getForEdit(e);this.setState({createOrEditNgayNghiLe:t})}else this.setState({createOrEditNgayNghiLe:{id:C.ZP.guidEmpty,tenNgayLe:"",tuNgay:new Date,denNgay:new Date}});this.Modal()},this.onSort=async(e,t)=>{await this.setState({sortBy:t,sortType:e}),this.getListHoliday()},this.handleOpenMenu=(e,t)=>{this.setState({anchorEl:e.currentTarget,selectedRowId:t})},this.handleCloseMenu=async()=>{await this.setState({anchorEl:null,selectedRowId:null}),await this.getListHoliday()},this.handleView=()=>{this.handleCloseMenu()},this.delete=async e=>{null!=await n.delete(e)?(0,j.yv)("X\xf3a b\u1ea3n ghi th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:3e3}):(0,j.yv)("C\xf3 l\u1ed7i s\u1ea3y ra vui l\xf2ng th\u1eed l\u1ea1i sau!",{variant:"error",autoHideDuration:3e3})},this.deleteMany=async()=>{const e=await n.deleteMany(this.state.listItemSelectedModel);(0,j.yv)(e.message,{variant:e.status,autoHideDuration:3e3})},this.onOkDelete=async()=>{var e;await this.delete(null!==(e=this.state.selectedRowId)&&void 0!==e?e:""),this.showConfirmDelete(),await this.handleCloseMenu()},this.handleEdit=()=>{var e;this.createOrUpdateModalOpen(null!==(e=this.state.selectedRowId)&&void 0!==e?e:""),this.handleCloseMenu()},this.showConfirmDelete=()=>{this.setState({isShowConfirmDelete:!this.state.isShowConfirmDelete,IdHoliday:""})},this.exportToExcel=async()=>{const e=await n.exportToExcel({keyword:this.state.filter,maxResultCount:this.state.maxResultCount,skipCount:this.state.currentPage,sortBy:this.state.sortBy,sortType:this.state.sortType});G.Z.downloadExportFile(e)},this.exportSelectedRow=async()=>{const e=await n.exportSelectedItemToExcel(this.state.listItemSelectedModel);G.Z.downloadExportFile(e)},this.onImportShow=()=>{this.setState({importShow:!this.state.importShow}),this.getData()},this.handleImportData=async e=>{const t=await n.importExcel(e);(0,j.yv)(t.message,{variant:"success"==t.status?"success":"error",autoHideDuration:3e3})},this.downloadImportTemplate=async()=>{const e=await B.Z.downloadImportTemplate("NghiLe_ImportTemplate.xlsx");G.Z.downloadExportFile(e)},this.handleCheckboxGridRowClick=e=>{const{id:t}=e.row,a=this.state.listItemSelectedModel.indexOf(t);let s=[];s=-1===a?[...this.state.listItemSelectedModel,t]:[...this.state.listItemSelectedModel.slice(0,a),...this.state.listItemSelectedModel.slice(a+1)],this.setState({listItemSelectedModel:s})},this.handleSelectAllGridRowClick=()=>{if(this.state.checkAllRow){const e=this.state.listHoliday.map((e=>e.id)),t=this.state.listItemSelectedModel.filter((t=>!e.includes(t)));this.setState({listItemSelectedModel:t})}else{const e=this.state.listHoliday.map((e=>e.id)),t=new Set([...this.state.listItemSelectedModel,...e]);this.setState({listItemSelectedModel:Array.from(t)})}this.setState({checkAllRow:!this.state.checkAllRow})}}async componentDidMount(){this.getData(),this.getListHoliday()}async getData(){if(""!==this.state.IdHoliday){const e=await n.getForEdit(this.state.IdHoliday);this.setState({createOrEditNgayNghiLe:e})}}async getListHoliday(){const e=await n.getAll({keyword:this.state.filter,maxResultCount:this.state.maxResultCount,skipCount:this.state.currentPage,sortBy:this.state.sortBy,sortType:this.state.sortType});await this.setState({listHoliday:e.items,totalCount:e.totalCount,totalPage:Math.ceil(e.totalCount/this.state.maxResultCount)})}render(){const e=[{field:"checkBox",sortable:!1,filterable:!1,disableColumnMenu:!0,width:65,renderHeader:e=>(0,b.jsx)(l.Z,{onClick:this.handleSelectAllGridRowClick,checked:this.state.checkAllRow}),renderCell:e=>(0,b.jsx)(l.Z,{onClick:()=>this.handleCheckboxGridRowClick(e),checked:this.state.listItemSelectedModel.includes(e.row.id)})},{field:"tenNgayLe",headerName:"T\xean ng\xe0y l\u1ec5",flex:1,renderHeader:e=>(0,b.jsx)(o.Z,{sx:{fontWeight:"700"},children:e.colDef.headerName}),renderCell:e=>(0,b.jsx)(o.Z,{sx:{overflow:"hidden",width:"100%",textOverflow:"ellipsis",fontSize:"13px",fontWeight:"400",fontFamily:"Roboto",color:"#3D475C",textAlign:"left"},children:e.value})},{field:"tuNgay",headerName:"Ng\xe0y b\u1eaft \u0111\u1ea7u",flex:1,renderCell:e=>(0,b.jsxs)(o.Z,{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"start"},children:[(0,b.jsx)(P.r,{style:{marginRight:4}}),(0,b.jsx)(r.Z,{fontSize:"13px",fontWeight:"400",fontFamily:"Roboto",color:"#3D475C",lineHeight:"16px",children:new Date(e.value).toLocaleDateString("en-GB")})]}),renderHeader:e=>(0,b.jsx)(o.Z,{sx:{fontWeight:"500",color:"#525F7A",fontSize:"13px",fontFamily:"Roboto"},children:e.colDef.headerName})},{field:"denNgay",headerName:"Ng\xe0y k\u1ebft th\xfac",sortable:!1,flex:1,renderCell:e=>(0,b.jsxs)(o.Z,{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"start"},children:[(0,b.jsx)(P.r,{style:{marginRight:4}}),(0,b.jsx)(r.Z,{fontSize:"13px",fontWeight:"400",fontFamily:"Roboto",color:"#3D475C",lineHeight:"16px",children:new Date(e.value).toLocaleDateString("en-GB")})]}),renderHeader:e=>(0,b.jsx)(o.Z,{sx:{fontWeight:"500",color:"#525F7A",fontSize:"13px",fontFamily:"Roboto"},children:e.colDef.headerName})},{field:"tongSoNgay",headerName:"T\u1ed5ng s\u1ed1 ng\xe0y",flex:1,renderCell:e=>(0,b.jsx)(o.Z,{sx:{width:"100%",textAlign:"left"},children:(0,b.jsxs)(r.Z,{fontSize:"13px",fontWeight:"400",fontFamily:"Roboto",color:"#3D475C",lineHeight:"16px",children:[e.value," ng\xe0y"]})}),renderHeader:e=>(0,b.jsx)(o.Z,{sx:{fontWeight:"500",color:"#525F7A",fontSize:"13px",fontFamily:"Roboto"},children:e.colDef.headerName})},{field:"actions",headerName:"H\xe0nh \u0111\u1ed9ng",flex:.3,disableColumnMenu:!0,renderCell:e=>(0,b.jsx)(d.Z,{"aria-label":"Actions","aria-controls":"actions-menu-".concat(e.row.id),"aria-haspopup":"true",onClick:t=>this.handleOpenMenu(t,e.row.id),children:(0,b.jsx)(O.Z,{})}),renderHeader:e=>(0,b.jsx)(o.Z,{sx:{display:"none"},children:e.colDef.headerName})}];return(0,b.jsxs)(o.Z,{paddingTop:"16px",className:"thoi-gian-nghi-page",children:[(0,b.jsxs)(h.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(h.ZP,{item:!0,xs:12,md:"auto",display:"flex",gap:"10px",alignItems:"center",children:[(0,b.jsx)(r.Z,{color:"#333233",variant:"h1",fontSize:"16px",fontWeight:"700",children:"Qu\u1ea3n l\xfd th\u1eddi gian ngh\u1ec9"}),(0,b.jsx)(o.Z,{className:"form-search",children:(0,b.jsx)(c.Z,{size:"small",sx:{backgroundColor:"#fff",borderColor:"#CDC9CD!important","& .MuiInputBase-root":{pl:"0"}},onChange:e=>{this.setState({filter:e.target.value})},onKeyDown:e=>{"Enter"==e.key&&this.getListHoliday()},className:"search-field",variant:"outlined",type:"search",placeholder:"T\xecm ki\u1ebfm",InputProps:{startAdornment:(0,b.jsx)(d.Z,{type:"button",onClick:()=>{this.getListHoliday()},children:(0,b.jsx)("img",{src:M.Z})})}})})]}),(0,b.jsxs)(h.ZP,{xs:12,md:"auto",item:!0,display:"flex",gap:"8px",justifyContent:"end",children:[(0,b.jsx)(g.Z,{hidden:!0,size:"small",onClick:this.onImportShow,variant:"outlined",startIcon:(0,b.jsx)("img",{src:L.Z}),sx:{textTransform:"capitalize",fontWeight:"400",color:"#666466",height:"40px",backgroundColor:"#fff!important",borderColor:"#E6E1E6!important"},className:"btn-outline-hover",children:"Nh\u1eadp"}),(0,b.jsx)(g.Z,{hidden:!V.Z.isGrandPermission("Pages.NhanSu_NgayNghiLe.Export"),size:"small",onClick:this.exportToExcel,variant:"outlined",startIcon:(0,b.jsx)("img",{src:R.Z}),sx:{textTransform:"capitalize",fontWeight:"400",color:"#666466",backgroundColor:"#fff!important",padding:"10px 16px",borderColor:"#E6E1E6!important",height:"40px"},className:"btn-outline-hover",children:"Xu\u1ea5t"}),(0,b.jsx)(g.Z,{size:"small",variant:"contained",onClick:()=>{this.createOrUpdateModalOpen("")},hidden:!V.Z.isGrandPermission("Pages.NhanSu_NgayNghiLe.Create"),startIcon:(0,b.jsx)("img",{src:I.Z}),sx:{textTransform:"capitalize",fontWeight:"400",minWidth:"173px",height:"40px",fontSize:"14px"},className:"btn-container-hover",children:"Th\xeam ng\xe0y ngh\u1ec9"})]})]}),(0,b.jsxs)(o.Z,{paddingTop:"16px",children:[this.state.listItemSelectedModel.length>0?(0,b.jsxs)(x.Z,{spacing:1,marginBottom:2,direction:"row",alignItems:"center",children:[(0,b.jsxs)(o.Z,{sx:{position:"relative"},onMouseLeave:()=>{this.setState({expendActionSelectedRow:!1})},children:[(0,b.jsx)(g.Z,{variant:"contained",endIcon:(0,b.jsx)(H.Z,{}),onClick:()=>this.setState({expendActionSelectedRow:!this.state.expendActionSelectedRow}),children:"Thao t\xe1c"}),(0,b.jsx)(o.Z,{sx:{display:this.state.expendActionSelectedRow?"":"none",zIndex:1,position:"absolute",borderRadius:"4px",border:"1px solid #cccc",minWidth:150,backgroundColor:"rgba(248,248,248,1)","& .MuiStack-root .MuiStack-root:hover":{backgroundColor:"#cccc"}},children:(0,b.jsxs)(x.Z,{alignContent:"center",justifyContent:"start",textAlign:"left",spacing:.5,children:[(0,b.jsx)(g.Z,{startIcon:"X\xf3a ng\xe0y ngh\u1ec9 l\u1ec5",sx:{color:"black","&:hover":{backgroundColor:"#E6E6E6",boxShadow:"none"}},onClick:this.showConfirmDelete}),(0,b.jsx)(g.Z,{startIcon:"Xu\u1ea5t danh s\xe1ch",sx:{color:"black","&:hover":{backgroundColor:"#E6E6E6",boxShadow:"none"}},onClick:this.exportSelectedRow})]})})]}),(0,b.jsxs)(x.Z,{direction:"row",children:[(0,b.jsxs)(r.Z,{variant:"body2",color:"red",children:[this.state.listItemSelectedModel.length,"\xa0"]}),(0,b.jsx)(r.Z,{variant:"body2",children:"b\u1ea3n ghi \u0111\u01b0\u1ee3c ch\u1ecdn"})]}),(0,b.jsx)(T.Z,{color:"error",onClick:()=>{this.setState({listItemSelectedModel:[],checkAllRow:!1})}})]}):null,(0,b.jsx)(D._$,{disableRowSelectionOnClick:!0,rowHeight:46,rows:this.state.listHoliday,columns:e,checkboxSelection:!1,sortingOrder:["desc","asc"],sortModel:[{field:this.state.sortBy,sort:"desc"==this.state.sortType?"desc":"asc"}],onSortModelChange:e=>{var t,a,s;e.length>0&&this.onSort(null!==(t=null===(a=e[0].sort)||void 0===a?void 0:a.toString())&&void 0!==t?t:"creationTime",null!==(s=e[0].field)&&void 0!==s?s:"desc")},sx:{"& .MuiDataGrid-columnHeader":{background:"#EEF0F4"}},hideFooter:!0,localeText:z.g}),(0,b.jsx)(F.Z,{selectedRowId:this.state.selectedRowId,anchorEl:this.state.anchorEl,closeMenu:this.handleCloseMenu,handleView:this.handleEdit,permissionView:"Pages.NhanSu_NgayNghLe.Edit",handleEdit:this.handleEdit,permissionEdit:"Pages.NhanSu_NgayNghiLe.Edit",handleDelete:this.showConfirmDelete,permissionDelete:"Pages.NhanSu_NgayNghiLe.Delete"}),(0,b.jsx)(W.Z,{currentPage:this.state.currentPage,rowPerPage:this.state.maxResultCount,totalRecord:this.state.totalCount,totalPage:this.state.totalPage,handlePerPageChange:this.handlePerPageChange,handlePageChange:this.handlePageChange})]}),(0,b.jsx)(A.Z,{isShow:this.state.isShowConfirmDelete,onOk:this.onOkDelete,onCancel:this.showConfirmDelete}),(0,b.jsx)(E,{visible:this.state.modalVisible,title:""==this.state.IdHoliday?"Th\xeam m\u1edbi ng\xe0y l\u1ec5":"C\u1eadp nh\u1eadt n\xe0y l\u1ec5",onCancel:()=>{this.Modal()},createOrEditDto:this.state.createOrEditNgayNghiLe})]})}}const X=_},10298:(e,t,a)=>{var s=a(64836);t.Z=void 0;var i=s(a(45045)),n=a(46417),l=(0,i.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined");t.Z=l}}]);